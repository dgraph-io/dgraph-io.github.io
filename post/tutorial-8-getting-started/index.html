<!DOCTYPE html>

<head>
  <meta charset="utf-8">

  <link rel="shortcut icon" href="https://blog.dgraph.io//images/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.dgraph.io//index.xml">

  
    <title>Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features - Dgraph Blog</title>
    <meta property='og:title' content="Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features - Dgraph Blog">
    <meta property="og:type" content="article">
  

  <meta property="og:url" content="https://blog.dgraph.io/post/tutorial-8-getting-started/">
  
  <meta property="og:image" content="https://blog.dgraph.io//images/tutorials/8/cover.jpg">

  <link href="https://fonts.googleapis.com/css?family=Lato:400,700|Work+Sans:400,500,700,800" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" integrity="sha256-0rguYS0qgS6L4qVzANq4kjxPLtvnp5nn2nB5G1lWRv4=" crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css" rel="stylesheet" integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js" integrity="sha256-sNPiigbfSkqUzMc5rgrdztLnneCMAp6W9wetJUZu9Zw=" crossorigin="anonymous"></script>

  <link
    href='https://blog.dgraph.io//css/runnable.css?7bbf71b4888bc97241e85bc7326a12fe'
    rel="stylesheet"
  />
  <link
    href='https://blog.dgraph.io//css/runnable-custom.css?74110b504a7b8a6e92a95279cfa96032'
    rel="stylesheet"
  />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous" />

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js" integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css" integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js" integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js" integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin="anonymous"></script>
  

  <script src="https://cdn.jsdelivr.net/npm/algoliasearch@3/dist/algoliasearch.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.0.0/dist/instantsearch.production.min.js" integrity="sha256-6S7q0JJs/Kx4kb/fv0oMjS855QTz5Rc2hh9AkIUjUsk=" crossorigin="anonymous"></script>
  <script src="https://blog.dgraph.io//js/search.js"></script>

  <link
    rel="stylesheet"
    href='https://blog.dgraph.io//css/styles.css?21ad29131562e6f79799833d1702fcb9'>
  <link
    rel="stylesheet"
    href='https://blog.dgraph.io//css/custom.css?83898a52f9f9600dfde9404842bcb2d4'>

  
  
    
      <meta name="twitter:card" content="summary_large_image"/>
      <meta name="twitter:image" content="https://blog.dgraph.io//images/tutorials/8/cover.jpg"/>
    
  

  <meta name="twitter:title" content="Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features"/>
  <meta name="twitter:description" content="Welcome to the eighth episode of getting started with Dgraph.
In the previous episode, we learned about building a twitter-like user-search feature using Dgraph&rsquo;s fuzzy search.
In this episode, we&rsquo;ll build a graph of tourist locations around San Francisco and help our Zoologist friend, Mary, and her team in their mission to conserve birds using Dgraph&rsquo;s geolocation capabilities.
You might have used Google to find the restaurants near you or to find the shopping centres within a mile of your current location."/>
  <meta name="twitter:site" content="@dgraphlabs"/>
</head>


<body class="blog-article" data-gr-c-s-loaded="true">

  <div class="svg-holder">
    <svg xmlns="https://www.w3.org/2000/svg">
      <symbol viewBox="0 0 32 32" id="icon-chevron-down">
        <title>chevron-down</title>
        <path d="M1.352,9.793l3.089-3.07C4.678,6.49,4.957,6.371,5.28,6.371S5.883,6.49,6.12,6.723L16,16.605l9.88-9.883
          c0.237-0.232,0.517-0.352,0.84-0.352s0.603,0.119,0.84,0.352l3.089,3.07C30.882,10.03,31,10.31,31,10.641
          c0,0.327-0.118,0.609-0.352,0.847L16.84,25.276c-0.237,0.235-0.517,0.353-0.84,0.353s-0.603-0.117-0.84-0.353L1.352,11.487
          C1.118,11.25,1,10.968,1,10.641C1,10.31,1.118,10.03,1.352,9.793z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-chevron-right">
        <title>chevron-right</title>
        <polygon points="30.644,16.012 1.356,1 10.835,16.012 1.356,31 "></polygon>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-chevron-up">
        <title>chevron-up</title>
        <path d="M30.648,22.207l-3.089,3.07c-0.237,0.232-0.517,0.352-0.84,0.352s-0.603-0.119-0.84-0.352L16,15.395l-9.88,9.883
          c-0.237,0.232-0.517,0.352-0.84,0.352s-0.603-0.119-0.84-0.352l-3.089-3.07C1.118,21.97,1,21.69,1,21.359
          c0-0.327,0.118-0.609,0.352-0.847L15.16,6.724c0.237-0.235,0.517-0.353,0.84-0.353s0.603,0.117,0.84,0.353l13.809,13.789
          C30.882,20.75,31,21.032,31,21.359C31,21.69,30.882,21.97,30.648,22.207z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-comment">
        <title>comment</title>
        <path d="M6.625,1.938v3.75H27.25v15H31V1.938H6.625z M1,24.438h3.75v5.625l5.625-5.625h15V7.562H1V24.438z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-dropdown">
        <title>dropdown</title>
        <path d="M30.924,9.199c-0.164-0.422-0.574-0.643-1.027-0.643H2.105c-0.457,0-0.863,0.221-1.029,0.643
          c-0.166,0.424-0.055,0.876,0.279,1.184L15.252,23.16c0.211,0.193,0.479,0.283,0.748,0.283s0.537-0.1,0.75-0.295l13.895-12.762
          C30.979,10.077,31.09,9.623,30.924,9.199z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-facebook">
        <title>facebook</title>
        <path d="M26,1H6C3.239,1,1,3.239,1,6v19.999C1,28.761,3.237,31,6,31h10V17.875h-3.75v-3.75H16v-2.812
          c0-2.588,2.099-4.688,4.688-4.688h4.688v3.75h-4.688c-0.518,0-0.938,0.42-0.938,0.938v2.812h5.156l-0.938,3.75H19.75V31H26
          c2.761,0,5-2.239,5-5.001V6C31,3.239,28.763,1,26,1z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-folder">
        <title>folder</title>
        <path d="M30.202,8.34H13.658l-3.236-2.942c-0.178-0.161-0.407-0.249-0.646-0.249H2.117C1.589,5.149,1,5.418,1,5.947v19.788
          c0,0.527,0.589,1.117,1.117,1.117h28.085c0.528,0,0.798-0.59,0.798-1.117V9.138C31,8.61,30.73,8.34,30.202,8.34z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-google-plus">
        <title>google-plus</title>
        <g>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M10.546,14.636v3.274h5.414c-0.219,1.402-1.638,4.117-5.414,4.117
            c-3.261,0-5.918-2.699-5.918-6.027c0-3.327,2.657-6.027,5.918-6.027c1.854,0,3.095,0.791,3.804,1.473L16.94,8.95
            c-1.663-1.556-3.816-2.496-6.395-2.496C5.268,6.455,1,10.723,1,16s4.268,9.545,9.546,9.545c5.509,0,9.164-3.871,9.164-9.327
            c0-0.627-0.069-1.105-0.151-1.582H10.546z"></path>
          <polygon fill-rule="evenodd" clip-rule="evenodd" points="28.272,14.636 28.272,11.909 25.546,11.909 25.546,14.636 22.818,14.636
            22.818,17.363 25.546,17.363 25.546,20.092 28.272,20.092 28.272,17.363 31,17.363 31,14.636       "></polygon>
        </g>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-label">
        <title>label</title>
        <path d="M27.578,7.283c-0.789,0.79-2.068,0.79-2.857,0c-0.791-0.79-0.791-2.069-0.002-2.858s2.068-0.789,2.857,0
          C28.367,5.214,28.369,6.493,27.578,7.283z M30.662,3.318c-0.047-1.084-0.973-2.003-2.057-2.042l-7.629-0.274
          c-1.086-0.04-2.6,0.556-3.367,1.323L1.586,18.354c-0.768,0.767-0.768,2.023,0,2.79l9.279,9.279c0.768,0.768,2.021,0.768,2.789,0
          l16.023-16.027c0.766-0.767,1.357-2.281,1.311-3.365L30.662,3.318z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-linkedin">
        <title>linkedin</title>
        <path d="M28.188,1H3.812C2.266,1,1,2.266,1,3.812v24.375C1,29.734,2.266,31,3.812,31h24.375C29.734,31,31,29.734,31,28.188V3.812
          C31,2.266,29.734,1,28.188,1z M12.25,25.375H8.5V12.25h3.75V25.375z M10.375,10.375C9.339,10.375,8.5,9.537,8.5,8.5
          s0.839-1.875,1.875-1.875S12.25,7.463,12.25,8.5S11.411,10.375,10.375,10.375z M25.375,25.375h-3.75v-7.5
          c0-1.036-0.839-1.875-1.875-1.875s-1.875,0.839-1.875,1.875v7.5h-3.75V12.25h3.75v2.326c0.773-1.06,1.956-2.326,3.281-2.326
          c2.333,0,4.219,2.098,4.219,4.688V25.375z"></path>
      </symbol>
      <symbol viewBox="0 0 50 50" id="icon-github">
        <title>github</title>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M25 10c-8.3 0-15 6.7-15 15 0 6.6 4.3 12.2 10.3 14.2.8.1 1-.3 1-.7v-2.6c-4.2.9-5.1-2-5.1-2-.7-1.7-1.7-2.2-1.7-2.2-1.4-.9.1-.9.1-.9 1.5.1 2.3 1.5 2.3 1.5 1.3 2.3 3.5 1.6 4.4 1.2.1-1 .5-1.6 1-2-3.3-.4-6.8-1.7-6.8-7.4 0-1.6.6-3 1.5-4-.2-.4-.7-1.9.1-4 0 0 1.3-.4 4.1 1.5 1.2-.3 2.5-.5 3.8-.5 1.3 0 2.6.2 3.8.5 2.9-1.9 4.1-1.5 4.1-1.5.8 2.1.3 3.6.1 4 1 1 1.5 2.4 1.5 4 0 5.8-3.5 7-6.8 7.4.5.5 1 1.4 1 2.8v4.1c0 .4.3.9 1 .7 6-2 10.2-7.6 10.2-14.2C40 16.7 33.3 10 25 10z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-loupe">
        <title>loupe</title>
        <path d="M30.296,27.986l-3.463-3.462l0.003-0.003l-4.038-4.038c1.618-2.111,2.503-4.675,2.514-7.37
          c0.014-3.248-1.239-6.298-3.528-8.586C19.508,2.253,16.477,1,13.248,1C9.983,1,6.91,2.276,4.594,4.593
          c-2.304,2.304-3.58,5.359-3.593,8.604c-0.014,3.248,1.239,6.297,3.528,8.586c2.274,2.275,5.306,3.528,8.535,3.528
          c2.714,0,5.293-0.885,7.417-2.513l4.038,4.038l0.005-0.005l3.462,3.463c0.805,0.805,1.975,0.941,2.611,0.303
          C31.236,29.961,31.1,28.791,30.296,27.986z M5.954,20.358c-1.906-1.906-2.949-4.446-2.938-7.153c0.011-2.71,1.077-5.262,3.004-7.188
          c1.936-1.937,4.503-3.003,7.229-3.003c2.69,0,5.216,1.043,7.111,2.938c1.905,1.905,2.948,4.446,2.938,7.153
          c-0.011,2.711-1.077,5.263-3.004,7.188c-1.935,1.938-4.502,3.004-7.229,3.004C10.373,23.297,7.849,22.253,5.954,20.358z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-next">
        <title>next</title>
        <polygon points="3.168,1 3.402,1.234 18.227,16 3.227,31 13.773,31 26.137,18.636 28.834,16 26.137,13.364 13.83,1 3.166,1 "></polygon>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-01">
        <title>perk-01</title>
        <path d="M12.725,13.023c-1.627,0-2.977,1.32-2.977,2.977c0,1.627,1.32,2.977,2.977,2.977c1.658,0,2.977-1.322,2.977-2.977
          C15.671,14.372,14.351,13.023,12.725,13.023z M12.725,11.58c2.455,0,4.42,1.994,4.42,4.42c0,2.456-1.995,4.42-4.42,4.42
          s-4.45-1.965-4.45-4.42C8.274,13.543,10.27,11.58,12.725,11.58z M10.944,16c0,0.981,0.797,1.78,1.78,1.78
          c0.981,0,1.749-0.798,1.749-1.78s-0.798-1.781-1.781-1.781C11.711,14.218,10.944,15.018,10.944,16z M28.531,9.768
          c-0.153-0.214-0.431-0.214-0.584,0l-2.395,3.499c-0.153,0.246,0,0.554,0.276,0.554h0.921v8.931c0,0.275,0.215,0.459,0.461,0.459
          h2.087c0.277,0,0.461-0.213,0.461-0.459v-8.931h0.891c0.276,0,0.46-0.308,0.276-0.554L28.531,9.768z M21.226,18.24h-2.088
          c-0.276,0-0.46,0.215-0.46,0.461v4.082c0,0.277,0.214,0.461,0.46,0.461h2.088c0.276,0,0.461-0.215,0.461-0.461v-4.082
          C21.687,18.455,21.472,18.24,21.226,18.24z M25.246,16.06h-2.088c-0.276,0-0.46,0.214-0.46,0.46v6.261
          c0,0.277,0.214,0.461,0.46,0.461h2.088c0.276,0,0.46-0.215,0.46-0.461V16.52C25.736,16.276,25.522,16.06,25.246,16.06z
          M23.16,14.986h1.258v-4.204c0-1.104-0.921-2.025-2.025-2.025H3.025C1.92,8.756,1,9.677,1,10.782v10.435
          c0,1.105,0.92,2.025,2.025,2.025h14.608c-0.061-0.154-0.061-0.307-0.061-0.461v-1.258H5.112c0.03-0.123,0.03-0.246,0.03-0.367
          c0-1.135-0.92-2.057-2.056-2.057c-0.123,0-0.246,0-0.367,0.031V12.87c0.123,0.03,0.246,0.03,0.367,0.03
          c1.136,0,2.056-0.921,2.056-2.057c0-0.122,0-0.245-0.03-0.367h15.069c-0.03,0.153-0.061,0.338-0.061,0.491
          c0,1.135,0.921,2.056,2.056,2.056c0.184,0,0.337-0.031,0.521-0.061v2.088C22.854,15.018,23.007,14.986,23.16,14.986z M6.247,14.771
          c0.675,0,1.229,0.554,1.229,1.229c0,0.674-0.554,1.227-1.229,1.227c-0.674,0-1.228-0.553-1.228-1.227
          C5.02,15.325,5.573,14.771,6.247,14.771z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-02">
        <title>perk-02</title>
        <g>
          <path d="M28.748,23.826 M27.998,5.83H4.006c-0.412,0-0.75,0.338-0.75,0.75v17.247c0,0,25.426,0,25.491,0V6.58
            C28.747,6.167,28.409,5.83,27.998,5.83z M27.276,7.131v15.394H4.729V7.131H27.276"></path>
          <path d="M30.995,25.232v-0.469H18.519c-0.048,0.264-0.282,0.469-0.576,0.469h-3.891c-0.294,0-0.528-0.205-0.577-0.469H1v0.469
            h0.005l1.5,0.938H29.5l1.5-0.938H30.995z"></path>
        </g>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-03">
        <title>perk-03</title>
        <path d="M3.217,20.503c-0.336,0-0.605-0.269-0.605-0.605V6.491c0-0.336,0.27-0.605,0.605-0.605h25.638
          c0.336,0,0.605,0.27,0.605,0.605v13.373c0,0.336-0.27,0.605-0.605,0.605H3.217V20.503z M29.122,4.274H2.881
          C1.84,4.274,1,5.114,1,6.155v15.558c0,1.041,0.84,1.881,1.881,1.881h10.752v1.848l-2.621,1.21c-0.537,0.234-0.369,1.074,0.234,1.074
          h9.609c0.605,0,0.773-0.807,0.234-1.074l-2.621-1.21v-1.848h10.65c1.041,0,1.881-0.84,1.881-1.881V6.155
          C31.005,5.114,30.165,4.274,29.122,4.274z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-04">
        <title>perk-04</title>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M27,2.8C27,1.806,26.328,1,25.5,1h-19C5.672,1,5,1.806,5,2.8v26.4
          C5,30.194,5.672,31,6.5,31h19c0.828,0,1.5-0.806,1.5-1.8V2.8z M16,30.359c-0.483,0-0.875-0.392-0.875-0.875s0.392-0.875,0.875-0.875
          s0.875,0.392,0.875,0.875S16.483,30.359,16,30.359z M25,28H7V4h18V28z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-05">
        <title>perk-05</title>
        <g>
          <path d="M10.24,15.323l2.318-7.521l4.955,11.268l1.096-3.81h11.934c0.625-2.192,0.453-3.82,0.377-4.386
            c-0.303-2.285-1.537-6.543-6.539-7.528c-0.748-0.147-1.447-0.217-2.098-0.227c-0.049,0-0.096-0.002-0.145-0.002
            c-0.002,0-0.002,0-0.004,0c-3.473-0.004-5.527,2.149-6.146,2.752c-0.619-0.604-2.674-2.756-6.148-2.752c-0.002,0-0.002,0-0.004,0
            c-0.047,0-0.096,0-0.143,0.002c-0.65,0.009-1.35,0.079-2.098,0.227c-5.002,0.985-6.35,5.484-6.539,7.528
            c-0.049,0.514-0.221,2.184,0.451,4.448H10.24z"></path>
          <path d="M19.943,17.032l-2.082,7.232L12.85,12.867l-1.305,4.228H2.168c1.6,3.537,5.32,7.974,13.82,11.787
            c8.602-3.861,12.33-8.312,13.906-11.852h-9.951V17.032z"></path>
        </g>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-06">
        <title>perk-06</title>
        <path d="M16.464,27.867c7.343,0,9.74-7.942,9.74-7.942S31,18.127,31,13.63c0-2.997-1.649-6.144-5.695-6.144
          c-5.694,0-7.643,3.896-6.443,6.594c-6.595-0.899-7.644,4.047-7.943,5.395c-0.6-1.348-1.199-2.997-3.297-4.795
          c-1.798-1.649-2.248-3.897-2.548-4.496c-0.3-0.75,0.45-1.199,1.199-0.45c0.449,0.299,2.098,0.299,4.196-1.648
          c0.3-0.15,0.3-0.6,0.149-0.899C10.169,6.587,9.42,5.688,8.67,5.088C7.771,4.339,7.172,3.74,5.823,3.889
          c-1.199,0.15-2.248,1.199-3.147,1.948c-1.349,1.199-1.799,2.997-1.648,5.695c0.149,1.948,0.3,5.694,2.248,10.49
          c1.198,3.298,4.845,5.745,5.545,5.845C11.258,28.467,16.464,27.867,16.464,27.867z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-07">
        <title>perk-07</title>
        <g>
          <path d="M22.315,20.725c1.791-1.791,4.707-1.793,6.499,0l0.025,0.029c0.136,0.145,0.376,0.148,0.523,0.006
            c0.146-0.145,0.149-0.375,0.005-0.521c-0.007-0.012-0.019-0.025-0.031-0.037c-2.081-2.078-5.464-2.078-7.543,0
            c-0.144,0.145-0.144,0.379,0,0.523S22.171,20.869,22.315,20.725z"></path>
          <path d="M27.689,21.904c0.133,0.146,0.377,0.15,0.522,0.006c0.146-0.143,0.147-0.377,0.006-0.523
            c-0.009-0.012-0.02-0.021-0.032-0.033c-1.445-1.447-3.799-1.447-5.244,0c-0.144,0.145-0.144,0.377,0,0.521
            c0.146,0.145,0.377,0.145,0.521,0c1.158-1.158,3.042-1.156,4.2,0.002L27.689,21.904z"></path>
          <path d="M26.596,22.992c0.138,0.139,0.376,0.152,0.523,0.012s0.152-0.375,0.012-0.523c0.002,0-0.014-0.021-0.031-0.039
            c-0.846-0.846-2.22-0.844-3.065,0c-0.146,0.146-0.144,0.379,0,0.523c0.146,0.145,0.378,0.145,0.523,0
            c0.553-0.553,1.449-0.557,2.007-0.012C26.573,22.967,26.584,22.98,26.596,22.992z"></path>
          <path d="M26.095,23.799c0,0.688-1.034,0.688-1.034,0C25.061,23.109,26.095,23.109,26.095,23.799"></path>
          <path d="M30.344,28.088c0,0.256-0.207,0.463-0.461,0.463h-0.669v-2.191h0.669c0.254,0,0.461,0.207,0.461,0.463V28.088z
            M29.883,25.703h-0.669v-0.014c0-0.053-0.003-0.105-0.007-0.158c-0.014-0.135-0.126-0.236-0.264-0.236h-6.636
            c-0.135,0-0.249,0.104-0.263,0.236c-0.006,0.053-0.007,0.105-0.007,0.158v3.061c0,0.799,0.593,1.459,1.361,1.566
            c0.028,0.012,0.058,0.016,0.09,0.016c0.115,0,0.21,0.096,0.21,0.211c0,0.146,0.119,0.266,0.264,0.266h3.323
            c0.146,0,0.263-0.119,0.263-0.266c0-0.115,0.095-0.211,0.211-0.211c0.031,0,0.061-0.004,0.089-0.016
            c0.614-0.086,1.116-0.525,1.294-1.105h0.736c0.618,0,1.121-0.504,1.121-1.121v-1.266C31.004,26.203,30.5,25.703,29.883,25.703z"></path>
          <path d="M12.34,29.51c-0.026,0.24-0.229,0.318-0.476,0.318H9.627c-0.247,0-0.448-0.078-0.475-0.318H1
            c0,0.715,0.26,1.293,0.974,1.293H19.53c0.714,0,0.958-0.578,0.958-1.293H12.34z"></path>
          <path d="M3.876,18.982h13.738v8.627H3.876V18.982z M18.183,28.887c0.392,0,0.709-0.318,0.709-0.711v-9.762
            c0-0.393-0.317-0.711-0.709-0.711H3.308c-0.392,0-0.711,0.318-0.711,0.711v9.762c0,0.393,0.317,0.711,0.711,0.711H18.183z"></path>
          <path d="M1.167,10.477c0,0.02,0,0.037,0,0.055c0.002,0.067,0.035,0.126,0.084,0.165c0.064,0.075,0.161,0.123,0.269,0.123
            c0.537,0,0.789,0.11,1.081,0.24c0.319,0.141,0.681,0.3,1.366,0.3c0.687,0,1.048-0.159,1.367-0.3c0.291-0.128,0.544-0.24,1.081-0.24
            c0.536,0,0.789,0.11,1.08,0.24c0.319,0.141,0.682,0.3,1.367,0.3c0.687,0,1.048-0.159,1.367-0.3c0.291-0.128,0.544-0.24,1.081-0.24
            c0.536,0,0.789,0.11,1.08,0.24c0.319,0.141,0.681,0.3,1.367,0.3c0.686,0,1.048-0.159,1.367-0.3c0.291-0.128,0.544-0.24,1.08-0.24
            c0.537,0,0.79,0.11,1.081,0.24c0.319,0.141,0.681,0.3,1.367,0.3c0.686,0,1.047-0.159,1.366-0.3c0.292-0.128,0.544-0.24,1.081-0.24
            s0.79,0.11,1.081,0.24c0.317,0.141,0.681,0.3,1.367,0.3c0.686,0,1.047-0.159,1.366-0.3c0.283-0.124,0.528-0.233,1.035-0.24
            c0.506,0.007,0.753,0.114,1.035,0.24c0.283,0.124,0.601,0.265,1.147,0.295v0.007c0.037,0,0.074-0.002,0.109-0.002
            c0.035,0.002,0.071,0.002,0.108,0.002v-0.007c0.548-0.03,0.865-0.171,1.147-0.295c0.293-0.128,0.544-0.24,1.083-0.24
            c0.194,0,0.353-0.158,0.353-0.354c0-0.195-0.158-0.354-0.353-0.354c-0.687,0-1.05,0.159-1.367,0.3
            c-0.271,0.119-0.509,0.225-0.972,0.239c-0.464-0.015-0.7-0.12-0.973-0.239c-0.298-0.131-0.633-0.278-1.238-0.298
            c-0.013-0.002-0.024-0.002-0.037-0.002c-0.016,0-0.029,0-0.045,0c-0.015,0-0.03,0-0.046,0c-0.013,0-0.024,0-0.037,0.002
            c-0.604,0.02-0.94,0.167-1.238,0.298c-0.292,0.13-0.544,0.24-1.081,0.24s-0.79-0.11-1.083-0.24
            c-0.181-0.079-0.373-0.164-0.633-0.225c-0.099-0.034-0.2-0.068-0.308-0.105c-0.216-0.071-0.454-0.152-0.735-0.25
            c0.198-0.348,0.372-0.724,0.521-1.12c0.227-0.604,0.398-1.265,0.509-1.963c0.07-0.437,0.107-0.832,0.126-1.16
            c1.622,1.993,3.778,2.423,3.778,2.423c-0.174-1.079-0.671-1.884-1.551-2.736c-0.178-0.172-0.354-0.323-0.527-0.456
            c1.669,0.618,3.394,0.535,3.394,0.535c-0.258-0.672-0.84-1.107-1.837-1.502c-0.509-0.202-1.002-0.321-1.451-0.386
            c1.229-0.786,1.819-1.767,1.819-1.767c-0.912-0.177-1.703-0.007-2.647,0.463c-0.47,0.235-0.839,0.5-1.128,0.764
            c-1.239-1.613-2.737-1.734-2.737-1.734c0.277,0.916,0.511,1.463,1.178,2.125c0.01,0.01,0.019,0.019,0.029,0.029
            c-2.442-0.321-4.262,0.816-4.262,0.816c0.815,0.635,1.687,0.864,2.86,0.874c0.258,0.002,0.5-0.013,0.726-0.039
            c-1.556,0.788-2.478,2.066-2.478,2.066c0.786,0.241,1.536,0.102,2.483-0.353c0.693-0.333,1.202-0.748,1.568-1.133
            c-0.062,0.978-0.293,2.59-1.116,3.978c-0.554-0.216-1.24-0.502-2.124-0.903c-4.603-2.09-5.912-5.385-6.542-6.969
            c-0.045-0.118-0.089-0.227-0.13-0.325c-0.033-0.082-0.113-0.134-0.203-0.134H7.195c-0.095,0-0.179,0.061-0.209,0.151
            C6.858,1.768,6.676,2.392,6.442,3.229C5.979,4.894,4.894,6.247,4.063,7.087C3.158,8.005,2.35,8.532,2.344,8.537
            c-0.854,0.545-1.165,1.35-1.175,1.913c0,0.007-0.002,0.012-0.002,0.021C1.167,10.471,1.167,10.474,1.167,10.477z"></path>
          <path d="M1.521,12.502c0.536,0,0.789,0.11,1.08,0.24c0.319,0.141,0.682,0.3,1.367,0.3c0.687,0,1.048-0.159,1.367-0.3
            c0.291-0.13,0.544-0.24,1.08-0.24c0.537,0,0.79,0.11,1.081,0.24c0.319,0.141,0.681,0.3,1.367,0.3c0.686,0,1.048-0.159,1.367-0.3
            c0.291-0.13,0.544-0.24,1.08-0.24c0.537,0,0.79,0.11,1.081,0.24c0.319,0.141,0.681,0.3,1.367,0.3c0.686,0,1.047-0.159,1.366-0.3
            c0.292-0.13,0.544-0.24,1.081-0.24s0.79,0.11,1.081,0.24c0.319,0.141,0.681,0.3,1.367,0.3c0.686,0,1.047-0.159,1.366-0.3
            c0.291-0.13,0.544-0.24,1.081-0.24s0.79,0.11,1.081,0.24c0.317,0.141,0.681,0.3,1.366,0.3c0.687,0,1.048-0.159,1.367-0.3
            c0.269-0.119,0.504-0.223,0.958-0.238c0.011,0.002,0.021,0.002,0.031,0.002c0.537,0,0.79,0.11,1.081,0.24
            c0.282,0.124,0.601,0.265,1.147,0.294v0.006c0.037,0,0.074,0,0.109-0.002c0.035,0.002,0.071,0.002,0.108,0.002v-0.006
            c0.548-0.029,0.865-0.17,1.147-0.294c0.293-0.128,0.544-0.24,1.083-0.24c0.194,0,0.353-0.158,0.353-0.354
            c0-0.195-0.158-0.353-0.353-0.353c-0.687,0-1.05,0.159-1.367,0.299c-0.272,0.12-0.509,0.225-0.972,0.239
            c-0.464-0.015-0.7-0.119-0.973-0.239c-0.292-0.13-0.621-0.273-1.205-0.296c-0.021-0.005-0.046-0.007-0.068-0.007
            c-0.687,0-1.048,0.159-1.367,0.3c-0.292,0.13-0.544,0.24-1.081,0.24c-0.536,0-0.789-0.11-1.082-0.24
            c-0.319-0.141-0.681-0.3-1.367-0.3c-0.686,0-1.047,0.159-1.366,0.3c-0.292,0.13-0.544,0.24-1.081,0.24s-0.79-0.11-1.081-0.24
            c-0.319-0.141-0.681-0.3-1.367-0.3c-0.686,0-1.047,0.159-1.366,0.3c-0.292,0.13-0.544,0.24-1.081,0.24s-0.79-0.11-1.081-0.24
            c-0.319-0.141-0.681-0.3-1.366-0.3c-0.687,0-1.048,0.159-1.367,0.3c-0.291,0.13-0.544,0.24-1.081,0.24s-0.789-0.11-1.081-0.24
            c-0.319-0.141-0.681-0.3-1.366-0.3c-0.687,0-1.048,0.159-1.367,0.3c-0.291,0.13-0.544,0.24-1.081,0.24s-0.789-0.11-1.08-0.24
            c-0.319-0.141-0.682-0.3-1.367-0.3c-0.195,0-0.354,0.157-0.354,0.354C1.167,12.344,1.326,12.502,1.521,12.502z"></path>
          <path d="M23.536,14.723c0.687,0,1.048-0.159,1.367-0.3c0.277-0.122,0.518-0.229,1.002-0.238c0.001,0,0.003,0,0.005,0
            c0.537,0,0.79,0.112,1.081,0.24c0.282,0.125,0.6,0.265,1.147,0.295v0.007c0.037,0,0.073,0,0.108-0.002
            c0.035,0.002,0.072,0.002,0.109,0.002V14.72c0.547-0.03,0.864-0.17,1.147-0.295c0.293-0.128,0.544-0.24,1.082-0.24
            c0.195,0,0.353-0.158,0.353-0.354c0-0.195-0.157-0.354-0.353-0.354c-0.686,0-1.049,0.159-1.366,0.3
            c-0.272,0.119-0.509,0.225-0.973,0.239c-0.463-0.015-0.7-0.12-0.972-0.239c-0.3-0.131-0.639-0.28-1.249-0.298
            c-0.015-0.002-0.028-0.004-0.043-0.004c-0.686,0-1.049,0.16-1.366,0.301c-0.291,0.128-0.544,0.24-1.081,0.24
            s-0.789-0.112-1.083-0.24c-0.317-0.141-0.681-0.301-1.366-0.301c-0.687,0-1.048,0.16-1.367,0.301
            c-0.291,0.128-0.544,0.24-1.081,0.24c-0.536,0-0.789-0.112-1.08-0.24c-0.319-0.141-0.681-0.301-1.367-0.301
            s-1.048,0.16-1.367,0.301c-0.291,0.128-0.544,0.24-1.08,0.24c-0.537,0-0.79-0.112-1.081-0.24c-0.319-0.141-0.681-0.301-1.367-0.301
            c-0.686,0-1.047,0.16-1.366,0.301c-0.292,0.128-0.544,0.24-1.081,0.24s-0.79-0.112-1.081-0.24
            c-0.319-0.141-0.681-0.301-1.367-0.301c-0.686,0-1.047,0.16-1.366,0.301c-0.292,0.128-0.544,0.24-1.081,0.24
            c-0.539,0-0.79-0.112-1.081-0.24c-0.319-0.141-0.681-0.301-1.366-0.301c-0.195,0-0.354,0.158-0.354,0.354
            c0,0.195,0.157,0.353,0.354,0.353c0.536,0,0.789,0.11,1.08,0.24c0.319,0.141,0.681,0.301,1.367,0.301
            c0.686,0,1.048-0.16,1.367-0.301c0.291-0.128,0.544-0.24,1.08-0.24c0.537,0,0.79,0.11,1.081,0.24
            c0.319,0.141,0.681,0.301,1.367,0.301c0.686,0,1.047-0.16,1.366-0.301c0.292-0.128,0.544-0.24,1.083-0.24
            c0.537,0,0.789,0.11,1.081,0.24c0.319,0.141,0.681,0.301,1.366,0.301c0.687,0,1.048-0.16,1.367-0.301
            c0.291-0.128,0.544-0.24,1.081-0.24s0.789,0.11,1.081,0.24c0.319,0.141,0.681,0.301,1.366,0.301c0.687,0,1.048-0.16,1.367-0.301
            c0.291-0.128,0.544-0.24,1.081-0.24c0.536,0,0.789,0.11,1.08,0.24C22.488,14.564,22.851,14.723,23.536,14.723z"></path>
        </g>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-perk-08">
        <title>perk-08</title>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M9.386,30.538L7.993,25.95c-1.231,0.708-2.263,1.089-2.604,0.739H5.381
          c-0.39-0.378,0.105-1.576,0.941-2.954l-4.936-1.498c-0.319-0.181-0.497-0.468-0.312-0.646l0.737-0.645
          c0.303-0.158,0.655-0.314,1-0.306l5.667,0.025c0.586-0.745,1.164-1.404,1.637-1.876l5.153-5.15l-0.956-0.957L4.124,10.681
          c-1.226-0.25-2.471-0.29-1.789-1.295l0.622-0.832c0.378-0.506,1.092-0.808,1.724-0.808h16.488l4.434-4.43
          c1.912-1.92,4.18-2.773,5.047-1.898h0.011c0.867,0.868,0.017,3.135-1.903,5.055l-4.433,4.433v16.852
          c0,0.631-0.304,1.348-0.812,1.726l-0.831,0.622c-1.004,0.679-1.045-0.566-1.293-1.792l-2.104-10.65l-0.858-0.859l-5.15,5.15
          c-0.559,0.564-1.396,1.276-2.315,1.981l0.022,5.178c0.009,0.348-0.147,0.698-0.309,1.001L10.03,30.85
          C9.853,31.039,9.569,30.861,9.386,30.538z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-pin">
        <title>pin</title>
        <path fill-rule="evenodd" clip-rule="evenodd" d="M16,16c3.106,0,5.625-2.519,5.625-5.625S19.106,4.75,16,4.75
          s-5.625,2.519-5.625,5.625S12.894,16,16,16z M16,31c0,0,11.25-10.242,11.25-19.688C27.25,5.617,22.213,1,16,1
          S4.75,5.617,4.75,11.312C4.75,20.758,16,31,16,31z"></path>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-previous">
        <title>previous</title>
        <polygon points="28.831,31 28.598,30.766 13.773,16 28.773,1 18.227,1 5.863,13.364 3.166,16 5.863,18.635 18.17,31 28.834,31 "></polygon>
      </symbol>
      <symbol viewBox="0 0 32 32" id="icon-twitter">
        <title>twitter</title>
        <path d="M31,6.696c-1.103,0.489-2.291,0.82-3.536,0.969c1.271-0.762,2.247-1.968,2.708-3.404c-1.189,0.705-2.508,1.218-3.909,1.493
          c-1.122-1.196-2.723-1.943-4.493-1.943c-3.398,0-6.154,2.755-6.154,6.154c0,0.483,0.055,0.953,0.159,1.402
          C10.66,11.111,6.125,8.66,3.089,4.937C2.561,5.846,2.256,6.902,2.256,8.031c0,2.135,1.086,4.019,2.737,5.123
          c-1.009-0.031-1.957-0.309-2.786-0.77c-0.002,0.025-0.002,0.052-0.002,0.078c0,2.982,2.122,5.469,4.937,6.034
          c-0.517,0.142-1.061,0.217-1.622,0.217c-0.396,0-0.782-0.039-1.158-0.112c0.784,2.444,3.057,4.225,5.75,4.274
          c-2.105,1.651-4.761,2.635-7.645,2.635c-0.496,0-0.985-0.029-1.467-0.086c2.723,1.746,5.958,2.765,9.434,2.765
          c11.321,0,17.512-9.379,17.512-17.512c0-0.268-0.005-0.533-0.018-0.796C29.131,9.014,30.174,7.93,31,6.696L31,6.696z"></path>
      </symbol>
    </svg>
  </div>
  <header id="page-header" class="page-header">
	<div class="container">
	  <div class="row">
		<div class="col-12 offset-0 col-md-10 offset-md-1">
		  <figure class="page-logo"><a href="https://blog.dgraph.io/"><img src="https://blog.dgraph.io//images/logo.svg" alt="Dgraph Logo"></a></figure>
				  
			<span class="topnav-stargazers-wrapper">
			  <a href="https://github.com/dgraph-io/dgraph" data-show-count="true" aria-label="Star Dgraph on GitHub" class="github-button">Star</a>
			</span>
		  
  
		  	<span 
				onclick="toggleVisibility()"  
			  	class="search-button pull-right button button-dgraph-site button--outline"
			>
			<i class="fa fa-search" aria-hidden="true"></i>
		  </span>
  
		  <a
			  href="https://dgraph.io/"
			  title="Dgraph Website"
			  class="button button-dgraph-site button--outline pull-right"
		  >
			Dgraph.io
		  </a>
		</div>
	  </div>

	  <div id="searchbox"></div>

	</div>
  
	<script>
		createSearch();
	</script>
  </header>
  

  
  <section class="page-intro page-intro--blog-article">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 offset-xs-0 col-md-10 offset-md-1">
          <header class="page-intro__header">
            <div class="article__meta">
              <span class="article__meta-item article__date">
                
                  Tue, Jan 28, 2020
                 by
                Karthic Rao


              </span>
              <div class="share">
                <ul class="share__list">
                  
                  <li class="share__item">
                    <a href="https://twitter.com/share?text=Getting%20started%20with%20Dgraph-8%3a%20Easily%20build%20location-aware%20apps%20using%20our%20native%20geolocation%20features&amp;url=https%3a%2f%2fblog.dgraph.io%2fpost%2ftutorial-8-getting-started%2f&amp;via=dgraphlabs" class="share__link">
                      <svg class="icon share__icon share__icon--twitter">
                        <use xlink:href="#icon-twitter" xmlns:xlink="https://www.w3.org/1999/xlink"></use>
                      </svg>
                      Tweet this
                    </a>
                  </li>
                  
                </ul>
              </div>
            </div>
            <h1 class="page-intro__title page-intro__title--blog">Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features</h1>
          </header>
        </div>
      </div>
    </div>
  </section>
  
  <div class="page-content">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 offset-xs-0 col-md-10 offset-md-1">
          <img
            class="main__image"
            src="https://blog.dgraph.io//images/tutorials/8/cover.jpg"
          >
          <div class="article-content">

<p>Welcome to the eighth episode of getting started with Dgraph.</p>

<p>In the <a href="https://blog.dgraph.io/post/tutorial-7-getting-started/">previous episode</a>, we learned about building a twitter-like user-search feature using <a href="https://docs.dgraph.io/query-language/#fuzzy-matching">Dgraph&rsquo;s fuzzy search</a>.</p>

<p>In this episode, we&rsquo;ll build a graph of tourist locations around San Francisco and help our Zoologist friend, Mary, and her team in their mission to conserve birds using Dgraph&rsquo;s geolocation capabilities.</p>

<p>You might have used Google to find the restaurants near you or to find the shopping centres within a mile of your current location.
Applications like these make use of your geolocation data.</p>

<p>Geolocation has become an integral part of mobile applications, especially with the advent of smartphones in the last decade, the list of applications which revolves around users location to power application features has grown beyond imagination.</p>

<p>Let&rsquo;s take Uber, for instance, the location data of the driver and passenger is pivotal for the functionality of the application.
We&rsquo;re gathering more GPS data than ever before, being able to store and query the location data efficiently can give you an edge over your competitors.</p>

<p>Real-world data is interconnected; they are not sparse; this is more relevant when it comes to location data.
The natural representation of railway networks, maps, routes are graphs.</p>

<p>The good news is that <a href="https://dgraph.io">Dgraph</a>, the world&rsquo;s most advanced graph database, comes with functionalities to efficiently store and perform useful queries on graphs containing location data.
If you want to run queries like <code>find me the hotels near Golden Gate Bridge</code>, or find me all the tourist location around <code>Golden Gate Park</code>, Dgraph has your back.</p>

<p>First, let&rsquo;s learn how to represent Geolocation data in Dgraph.</p>

<h4 id="representing-geolocation-data">Representing Geolocation data</h4>

<p>You can represent location data in Dgraph using two ways:</p>

<ul>
<li><strong>Point location</strong></li>
</ul>

<p>Point location contains the geo-coordinate tuple (latitude, longitude) of your location of interest.</p>

<p>The following image has the point location with the latitude and longitude for the Eifel tower in Paris.
Point locations are useful for representing a precise location; for instance, your location when booking a cab or your delivery address.</p>

<p><img src="https://blog.dgraph.io/images/tutorials/8/b-paris.png" alt="model" /></p>

<ul>
<li><strong>Polygonal location</strong></li>
</ul>

<p>It&rsquo;s not possible to represent geographical entities which are spread across multiple geo-coordinates just using a point location.
To represent geo entities like a city, a lake, or a national park, you should use a polygonal location.
Here is an example:
<img src="https://blog.dgraph.io/images/tutorials/8/c-delhi.jpg" alt="model" /></p>

<p>The polygonal fence above represents the city of Delhi, India.
This polygonal fence or the geo-fence is formed by connecting multiple straight-line boundaries, and they are collectively represented using an array of location tuples of format <code>[(latitude, longitude), (latitude, longitude), ...]</code>.
Each tuple pair <code>(2 tuples and 4 coordinates)</code> represents a straight line boundary of the geo-fence, and a polygonal fence can contain any number of lines.</p>

<p>Let&rsquo;s start with building a simple San Francisco tourist graph, here&rsquo;s the graph model.
<img src="https://blog.dgraph.io/images/tutorials/8/a-graph.jpg" alt="model" /></p>

<p>The above graph has three entities represented by the nodes:</p>

<ul>
<li><strong>City</strong></li>
</ul>

<p>A <code>city node</code> represents the tourist city.
Our dataset only contains the city of <code>San Francisco</code>, and a node in the graph represents it.</p>

<ul>
<li><strong>Location</strong></li>
</ul>

<p>A location node, along with the name of the location, it contains the point or polygonal location of the place of interest.</p>

<ul>
<li><strong>Location Type</strong></li>
</ul>

<p>A location type consists of the type of location.
There are four types of location in our dataset: <code>zoo</code>, <code>museum</code>, <code>hotel</code> or a <code>tourist attraction</code>.</p>

<p>The <code>location nodes</code> with geo-coordinates of a <code>hotel</code> also contains their pricing information.</p>

<p>There are different ways to model the same graph.
For instance, the <code>location type</code> could just be a property or a predicate of the <code>location node</code>, rather than being a node of its own.</p>

<p>The queries you want to perform or the relationships you like to explore mostly influence the modelling decisions.
The goal of the tutorial is not to arrive at the ideal graph model, but to use a simple dataset to demonstrate the geolocation capabilities of Dgraph.</p>

<p>For the rest of the tutorial, let&rsquo;s call the node representing a <code>City</code> as a <code>city</code> node, and the node representing a <code>Location</code> as a <code>location</code> node, and the node representing the <code>Location Type</code> as a <code>location type</code> node.</p>

<p>Here&rsquo;s the relationship between these nodes:</p>

<ul>
<li>Every <code>city node</code> is connected to a <code>location node</code> via the <code>has_location</code> edge.</li>
<li>Every <code>location node</code> is connected to its node representing a <code>location type</code> via the <code>has_type</code> edge.</li>
</ul>

<p><em>Note: Dgraph allows you to associate one or more types for the nodes using its type system feature, for now, we are using nodes without types, we&rsquo;ll learn about type system for nodes in a future episode.
Check <a href="https://docs.dgraph.io/query-language/#type-system">this page from the documentation site</a>, if you want to explore type system feature for nodes.</em></p>

<p>Here is our sample dataset.
Open Ratel, go to the mutate tab, paste the mutation, and click Run.</p>

<pre><code class="language-json">{
  &quot;set&quot;: [
    {
      &quot;city&quot;: &quot;San Francisco&quot;,
      &quot;uid&quot;: &quot;_:SFO&quot;,
      &quot;has_location&quot;: [
        {
          &quot;name&quot;: &quot;USS Pampanito&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.4160088,
                  37.8096674
                ],
                [
                  -122.4161147,
                  37.8097628
                ],
                [
                  -122.4162064,
                  37.8098357
                ],
                [
                  -122.4163467,
                  37.8099312
                ],
                [
                  -122.416527,
                  37.8100471
                ],
                [
                  -122.4167504,
                  37.8101792
                ],
                [
                  -122.4168272,
                  37.8102137
                ],
                [
                  -122.4167719,
                  37.8101612
                ],
                [
                  -122.4165683,
                  37.8100108
                ],
                [
                  -122.4163888,
                  37.8098923
                ],
                [
                  -122.4162492,
                  37.8097986
                ],
                [
                  -122.4161469,
                  37.8097352
                ],
                [
                  -122.4160088,
                  37.8096674
                ]
              ]
            ]
          },
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:museum&quot;,
              &quot;loc_type&quot;: &quot;Museum&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Alameda Naval Air Museum&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.2995054,
                  37.7813924
                ],
                [
                  -122.2988538,
                  37.7813582
                ],
                [
                  -122.2988421,
                  37.7814972
                ],
                [
                  -122.2994937,
                  37.7815314
                ],
                [
                  -122.2995054,
                  37.7813924
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;Ferry Point Road&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:museum&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Burlingame Museum of PEZ Memorabilia&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.3441509,
                  37.5792003
                ],
                [
                  -122.3438207,
                  37.5794257
                ],
                [
                  -122.3438987,
                  37.5794587
                ],
                [
                  -122.3442289,
                  37.5792333
                ],
                [
                  -122.3441509,
                  37.5792003
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;California Drive&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:museum&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Carriage Inn&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.3441509,
                  37.5792003
                ],
                [
                  -122.3438207,
                  37.5794257
                ],
                [
                  -122.3438987,
                  37.5794587
                ],
                [
                  -122.3442289,
                  37.5792333
                ],
                [
                  -122.3441509,
                  37.5792003
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;7th street&quot;,
          &quot;price_per_night&quot;: 350.00,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:hotel&quot;,
              &quot;loc_type&quot;: &quot;Hotel&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Lombard Motor In&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.4260484,
                  37.8009811
                ],
                [
                  -122.4260137,
                  37.8007969
                ],
                [
                  -122.4259083,
                  37.80081
                ],
                [
                  -122.4258724,
                  37.8008144
                ],
                [
                  -122.4257962,
                  37.8008239
                ],
                [
                  -122.4256354,
                  37.8008438
                ],
                [
                  -122.4256729,
                  37.8010277
                ],
                [
                  -122.4260484,
                  37.8009811
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;Lombard Street&quot;,
          &quot;price_per_night&quot;: 400.00,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:hotel&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Holiday Inn San Francisco Golden Gateway&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.4214895,
                  37.7896108
                ],
                [
                  -122.4215628,
                  37.7899798
                ],
                [
                  -122.4215712,
                  37.790022
                ],
                [
                  -122.4215987,
                  37.7901606
                ],
                [
                  -122.4221004,
                  37.7900985
                ],
                [
                  -122.4221044,
                  37.790098
                ],
                [
                  -122.4219952,
                  37.7895481
                ],
                [
                  -122.4218207,
                  37.78957
                ],
                [
                  -122.4216158,
                  37.7895961
                ],
                [
                  -122.4214895,
                  37.7896108
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;Van Ness Avenue&quot;,
          &quot;price_per_night&quot;: 250.00,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:hotel&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Golden Gate Bridge&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.479784,
                  37.8288329
                ],
                [
                  -122.4775646,
                  37.8096291
                ],
                [
                  -122.4775538,
                  37.8095165
                ],
                [
                  -122.4775465,
                  37.8093304
                ],
                [
                  -122.4775823,
                  37.8093296
                ],
                [
                  -122.4775387,
                  37.8089749
                ],
                [
                  -122.4773545,
                  37.8089887
                ],
                [
                  -122.4773402,
                  37.8089575
                ],
                [
                  -122.4772752,
                  37.8088285
                ],
                [
                  -122.4772084,
                  37.8087099
                ],
                [
                  -122.4771322,
                  37.8085903
                ],
                [
                  -122.4770518,
                  37.8084793
                ],
                [
                  -122.4769647,
                  37.8083687
                ],
                [
                  -122.4766802,
                  37.8080091
                ],
                [
                  -122.4766629,
                  37.8080195
                ],
                [
                  -122.4765701,
                  37.8080751
                ],
                [
                  -122.476475,
                  37.8081322
                ],
                [
                  -122.4764106,
                  37.8081708
                ],
                [
                  -122.476396,
                  37.8081795
                ],
                [
                  -122.4764936,
                  37.8082814
                ],
                [
                  -122.476591,
                  37.8083823
                ],
                [
                  -122.4766888,
                  37.8084949
                ],
                [
                  -122.47677,
                  37.808598
                ],
                [
                  -122.4768444,
                  37.8087008
                ],
                [
                  -122.4769144,
                  37.8088105
                ],
                [
                  -122.4769763,
                  37.8089206
                ],
                [
                  -122.4770373,
                  37.8090416
                ],
                [
                  -122.477086,
                  37.809151
                ],
                [
                  -122.4771219,
                  37.8092501
                ],
                [
                  -122.4771529,
                  37.809347
                ],
                [
                  -122.477179,
                  37.8094517
                ],
                [
                  -122.4772003,
                  37.809556
                ],
                [
                  -122.4772159,
                  37.8096583
                ],
                [
                  -122.4794624,
                  37.8288561
                ],
                [
                  -122.4794098,
                  37.82886
                ],
                [
                  -122.4794817,
                  37.8294742
                ],
                [
                  -122.4794505,
                  37.8294765
                ],
                [
                  -122.4794585,
                  37.8295453
                ],
                [
                  -122.4795423,
                  37.8295391
                ],
                [
                  -122.4796312,
                  37.8302987
                ],
                [
                  -122.4796495,
                  37.8304478
                ],
                [
                  -122.4796698,
                  37.8306078
                ],
                [
                  -122.4796903,
                  37.830746
                ],
                [
                  -122.4797182,
                  37.8308784
                ],
                [
                  -122.4797544,
                  37.83102
                ],
                [
                  -122.479799,
                  37.8311522
                ],
                [
                  -122.4798502,
                  37.8312845
                ],
                [
                  -122.4799025,
                  37.8314139
                ],
                [
                  -122.4799654,
                  37.8315458
                ],
                [
                  -122.4800346,
                  37.8316718
                ],
                [
                  -122.4801231,
                  37.8318137
                ],
                [
                  -122.4802112,
                  37.8319368
                ],
                [
                  -122.4803028,
                  37.8320547
                ],
                [
                  -122.4804046,
                  37.8321657
                ],
                [
                  -122.4805121,
                  37.8322792
                ],
                [
                  -122.4805883,
                  37.8323459
                ],
                [
                  -122.4805934,
                  37.8323502
                ],
                [
                  -122.4807146,
                  37.8323294
                ],
                [
                  -122.4808917,
                  37.832299
                ],
                [
                  -122.4809526,
                  37.8322548
                ],
                [
                  -122.4809672,
                  37.8322442
                ],
                [
                  -122.4808396,
                  37.8321298
                ],
                [
                  -122.4807166,
                  37.8320077
                ],
                [
                  -122.4806215,
                  37.8319052
                ],
                [
                  -122.4805254,
                  37.8317908
                ],
                [
                  -122.4804447,
                  37.8316857
                ],
                [
                  -122.4803548,
                  37.8315539
                ],
                [
                  -122.4802858,
                  37.8314395
                ],
                [
                  -122.4802227,
                  37.8313237
                ],
                [
                  -122.4801667,
                  37.8312051
                ],
                [
                  -122.4801133,
                  37.8310812
                ],
                [
                  -122.4800723,
                  37.8309602
                ],
                [
                  -122.4800376,
                  37.8308265
                ],
                [
                  -122.4800087,
                  37.8307005
                ],
                [
                  -122.4799884,
                  37.8305759
                ],
                [
                  -122.4799682,
                  37.8304181
                ],
                [
                  -122.4799501,
                  37.8302699
                ],
                [
                  -122.4798628,
                  37.8295146
                ],
                [
                  -122.4799157,
                  37.8295107
                ],
                [
                  -122.4798451,
                  37.8289002
                ],
                [
                  -122.4798369,
                  37.828829
                ],
                [
                  -122.479784,
                  37.8288329
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;Golden Gate Bridge&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:attraction&quot;,
              &quot;loc_type&quot;: &quot;Tourist Attraction&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Carriage Inn&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.3441509,
                  37.5792003
                ],
                [
                  -122.3438207,
                  37.5794257
                ],
                [
                  -122.3438987,
                  37.5794587
                ],
                [
                  -122.3442289,
                  37.5792333
                ],
                [
                  -122.3441509,
                  37.5792003
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;7th street&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:attraction&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;San Francisco Zoo&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.5036126,
                  37.7308562
                ],
                [
                  -122.5028991,
                  37.7305879
                ],
                [
                  -122.5028274,
                  37.7305622
                ],
                [
                  -122.5027812,
                  37.7305477
                ],
                [
                  -122.5026992,
                  37.7305269
                ],
                [
                  -122.5026211,
                  37.7305141
                ],
                [
                  -122.5025342,
                  37.7305081
                ],
                [
                  -122.5024478,
                  37.7305103
                ],
                [
                  -122.5023667,
                  37.7305221
                ],
                [
                  -122.5022769,
                  37.7305423
                ],
                [
                  -122.5017546,
                  37.7307008
                ],
                [
                  -122.5006917,
                  37.7311277
                ],
                [
                  -122.4992484,
                  37.7317075
                ],
                [
                  -122.4991414,
                  37.7317614
                ],
                [
                  -122.4990379,
                  37.7318177
                ],
                [
                  -122.4989369,
                  37.7318762
                ],
                [
                  -122.4988408,
                  37.731938
                ],
                [
                  -122.4987386,
                  37.7320142
                ],
                [
                  -122.4986377,
                  37.732092
                ],
                [
                  -122.4978359,
                  37.7328712
                ],
                [
                  -122.4979122,
                  37.7333232
                ],
                [
                  -122.4979485,
                  37.7333909
                ],
                [
                  -122.4980162,
                  37.7334494
                ],
                [
                  -122.4980945,
                  37.7334801
                ],
                [
                  -122.4989553,
                  37.7337384
                ],
                [
                  -122.4990551,
                  37.7337743
                ],
                [
                  -122.4991479,
                  37.7338184
                ],
                [
                  -122.4992482,
                  37.7338769
                ],
                [
                  -122.4993518,
                  37.7339426
                ],
                [
                  -122.4997605,
                  37.7342142
                ],
                [
                  -122.4997578,
                  37.7343433
                ],
                [
                  -122.5001258,
                  37.7345486
                ],
                [
                  -122.5003425,
                  37.7346621
                ],
                [
                  -122.5005576,
                  37.7347566
                ],
                [
                  -122.5007622,
                  37.7348353
                ],
                [
                  -122.500956,
                  37.7349063
                ],
                [
                  -122.5011438,
                  37.7349706
                ],
                [
                  -122.5011677,
                  37.7349215
                ],
                [
                  -122.5013556,
                  37.7349785
                ],
                [
                  -122.5013329,
                  37.7350294
                ],
                [
                  -122.5015181,
                  37.7350801
                ],
                [
                  -122.5017265,
                  37.7351269
                ],
                [
                  -122.5019229,
                  37.735164
                ],
                [
                  -122.5021252,
                  37.7351953
                ],
                [
                  -122.5023116,
                  37.7352187
                ],
                [
                  -122.50246,
                  37.7352327
                ],
                [
                  -122.5026074,
                  37.7352433
                ],
                [
                  -122.5027534,
                  37.7352501
                ],
                [
                  -122.5029253,
                  37.7352536
                ],
                [
                  -122.5029246,
                  37.735286
                ],
                [
                  -122.5033453,
                  37.7352858
                ],
                [
                  -122.5038376,
                  37.7352855
                ],
                [
                  -122.5038374,
                  37.7352516
                ],
                [
                  -122.5054006,
                  37.7352553
                ],
                [
                  -122.5056182,
                  37.7352867
                ],
                [
                  -122.5061792,
                  37.7352946
                ],
                [
                  -122.5061848,
                  37.7352696
                ],
                [
                  -122.5063093,
                  37.7352671
                ],
                [
                  -122.5063297,
                  37.7352886
                ],
                [
                  -122.5064719,
                  37.7352881
                ],
                [
                  -122.5064722,
                  37.735256
                ],
                [
                  -122.506505,
                  37.7352268
                ],
                [
                  -122.5065452,
                  37.7352287
                ],
                [
                  -122.5065508,
                  37.7351214
                ],
                [
                  -122.5065135,
                  37.7350885
                ],
                [
                  -122.5065011,
                  37.7351479
                ],
                [
                  -122.5062471,
                  37.7351127
                ],
                [
                  -122.5059669,
                  37.7349341
                ],
                [
                  -122.5060092,
                  37.7348205
                ],
                [
                  -122.5060405,
                  37.7347219
                ],
                [
                  -122.5060611,
                  37.734624
                ],
                [
                  -122.5060726,
                  37.7345101
                ],
                [
                  -122.5060758,
                  37.73439
                ],
                [
                  -122.5060658,
                  37.73427
                ],
                [
                  -122.5065549,
                  37.7342676
                ],
                [
                  -122.5067262,
                  37.7340364
                ],
                [
                  -122.506795,
                  37.7340317
                ],
                [
                  -122.5068355,
                  37.733827
                ],
                [
                  -122.5068791,
                  37.7335407
                ],
                [
                  -122.5068869,
                  37.7334106
                ],
                [
                  -122.5068877,
                  37.733281
                ],
                [
                  -122.5068713,
                  37.7329795
                ],
                [
                  -122.5068598,
                  37.7328652
                ],
                [
                  -122.506808,
                  37.7325954
                ],
                [
                  -122.5067837,
                  37.732482
                ],
                [
                  -122.5067561,
                  37.7323727
                ],
                [
                  -122.5066387,
                  37.7319688
                ],
                [
                  -122.5066273,
                  37.731939
                ],
                [
                  -122.5066106,
                  37.7319109
                ],
                [
                  -122.506581,
                  37.7318869
                ],
                [
                  -122.5065404,
                  37.731872
                ],
                [
                  -122.5064982,
                  37.7318679
                ],
                [
                  -122.5064615,
                  37.731878
                ],
                [
                  -122.5064297,
                  37.7318936
                ],
                [
                  -122.5063553,
                  37.7317985
                ],
                [
                  -122.5063872,
                  37.7317679
                ],
                [
                  -122.5064106,
                  37.7317374
                ],
                [
                  -122.5064136,
                  37.7317109
                ],
                [
                  -122.5063998,
                  37.7316828
                ],
                [
                  -122.5063753,
                  37.7316581
                ],
                [
                  -122.5061296,
                  37.7314636
                ],
                [
                  -122.5061417,
                  37.731453
                ],
                [
                  -122.5060145,
                  37.7313791
                ],
                [
                  -122.5057839,
                  37.7312678
                ],
                [
                  -122.5054352,
                  37.7311479
                ],
                [
                  -122.5043701,
                  37.7310447
                ],
                [
                  -122.5042805,
                  37.7310343
                ],
                [
                  -122.5041861,
                  37.7310189
                ],
                [
                  -122.5041155,
                  37.7310037
                ],
                [
                  -122.5036126,
                  37.7308562
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;San Francisco Zoo&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:zoo&quot;,
              &quot;loc_type&quot;: &quot;Zoo&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Flamingo Park&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.5033039,
                  37.7334601
                ],
                [
                  -122.5032811,
                  37.7334601
                ],
                [
                  -122.503261,
                  37.7334601
                ],
                [
                  -122.5032208,
                  37.7334495
                ],
                [
                  -122.5031846,
                  37.7334357
                ],
                [
                  -122.5031806,
                  37.7334718
                ],
                [
                  -122.5031685,
                  37.7334962
                ],
                [
                  -122.5031336,
                  37.7335078
                ],
                [
                  -122.503128,
                  37.7335189
                ],
                [
                  -122.5031222,
                  37.7335205
                ],
                [
                  -122.5030954,
                  37.7335269
                ],
                [
                  -122.5030692,
                  37.7335444
                ],
                [
                  -122.5030699,
                  37.7335677
                ],
                [
                  -122.5030813,
                  37.7335868
                ],
                [
                  -122.5031034,
                  37.7335948
                ],
                [
                  -122.5031511,
                  37.73359
                ],
                [
                  -122.5031933,
                  37.7335916
                ],
                [
                  -122.5032228,
                  37.7336022
                ],
                [
                  -122.5032697,
                  37.7335937
                ],
                [
                  -122.5033194,
                  37.7335874
                ],
                [
                  -122.5033515,
                  37.7335693
                ],
                [
                  -122.5033723,
                  37.7335518
                ],
                [
                  -122.503369,
                  37.7335068
                ],
                [
                  -122.5033603,
                  37.7334702
                ],
                [
                  -122.5033462,
                  37.7334474
                ],
                [
                  -122.5033073,
                  37.733449
                ],
                [
                  -122.5033039,
                  37.7334601
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;San Francisco Zoo&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:zoo&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Peace Lantern&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Point&quot;,
            &quot;coordinates&quot;: [
              -122.4705776,
              37.7701084
            ]
          },
          &quot;street&quot;: &quot;Golden Gate Park&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:attraction&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Buddha&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Point&quot;,
            &quot;coordinates&quot;: [
              -122.469942,
              37.7703183
            ]
          },
          &quot;street&quot;: &quot;Golden Gate Park&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:attraction&quot;
            }
          ]
        },
        {
          &quot;name&quot;: &quot;Japanese Tea Garden&quot;,
          &quot;location&quot;: {
            &quot;type&quot;: &quot;Polygon&quot;,
            &quot;coordinates&quot;: [
              [
                [
                  -122.4692131,
                  37.7705116
                ],
                [
                  -122.4698998,
                  37.7710069
                ],
                [
                  -122.4702431,
                  37.7710137
                ],
                [
                  -122.4707248,
                  37.7708919
                ],
                [
                  -122.4708911,
                  37.7701541
                ],
                [
                  -122.4708428,
                  37.7700354
                ],
                [
                  -122.4703492,
                  37.7695011
                ],
                [
                  -122.4699255,
                  37.7693989
                ],
                [
                  -122.4692131,
                  37.7705116
                ]
              ]
            ]
          },
          &quot;street&quot;: &quot;Golden Gate Park&quot;,
          &quot;has_type&quot;: [
            {
              &quot;uid&quot;: &quot;_:attraction&quot;
            }
          ]
        }
      ]
    }
  ]
}
</code></pre>

<p><em>Note: If this mutation syntax is new to you, refer to the <a href="https://blog.dgraph.io/post/tutorial-1-getting-started/">first tutorial</a> to learn the basics of mutations in Dgraph.</em></p>

<p>Run the query below to fetch the entire graph:</p>

<pre><code class="language-graphql">{
  entire_graph(func: has(city)) {
    city
    has_location {
    name 
    has_type {
      loc_type
      }
    }
  }
}
</code></pre>

<p><em>Note: Check the <a href="https://blog.dgraph.io/post/tutorial-2-getting-started/">second tutorial</a> if you want to learn more about traversal queries like the above one.</em></p>

<p>Here&rsquo;s our graph!
<img src="https://blog.dgraph.io/images/tutorials/8/d-full-graph.png" alt="full graph" /></p>

<p>Our graph has:</p>

<ul>
<li>One blue <code>city node</code>.
We just have one node which represents the city of <code>San Francisco</code>.</li>
<li>The green ones are the the <code>location</code> nodes.
We have a total of 13 locations.</li>
<li>The pink nodes represent the <code>location types</code>.
We have four kinds of locations in our dataset: <code>museum</code>, <code>zoo</code>, <code>hotel</code>, and <code>tourist attractions</code>.</li>
</ul>

<p>You can also see that Dgraph has auto-detected the data types of the predicates from the schema tab, and the location predicate has been auto-assigned <code>geo</code> type.</p>

<p><img src="https://blog.dgraph.io/images/tutorials/8/e-schema.png" alt="type detection" />
<em>Note: Check out the <a href="https://blog.dgraph.io/post/tutorial-3-getting-started/">previous tutorial</a> to know more about data types in Dgraph.</em></p>

<p>Before we start, please say Hello to <code>Mary</code>, a zoologist who has dedicated her research for the cause of conserving various bird species.</p>

<p>For the rest of the tutorial, let&rsquo;s help Mary and her team of zoologists in their mission to conserving birds.</p>

<h4 id="enter-san-francisco-hotel-booking">Enter San Francisco: Hotel booking</h4>

<p>Several research projects done by Mary suggested that Flamingos thrive better when there are abundant water bodies for their habitat.</p>

<p>Her team got approval for expanding the water source for the Flamingos in the San Francisco Zoo, and her team is ready for a trip to San Francisco with Mary remotely monitoring the progress of the team.</p>

<p>Her teammates wish to stay close to the <code>Golden Gate Bridge</code> so that they could cycle around the Golden gate, enjoy the breeze, and the sunrise every morning.</p>

<p>Let&rsquo;s help them find a hotel which is within a reasonable distance from the <code>Golden Gate Bridge</code>, and we&rsquo;ll do so using Dgraph&rsquo;s geolocation functions.</p>

<p>Dgraph provides a variety of functions to query geolocation data.
To use them, you have to set the <code>geo</code> index first.</p>

<p>Go to the Schema tab and set the index on the <code>location</code> predicate.</p>

<p><img src="https://blog.dgraph.io/images/tutorials/8/f-index.png" alt="geo-index" /></p>

<p>After setting the <code>geo</code> index on the <code>location</code> predicate, you can use Dgraph&rsquo;s built-in function <code>near</code> to find the hotels near the Golden gate bridge.</p>

<p>Here is the syntax of the <code>near</code> function: <code>near(geo-predicate, [long, lat], distance)</code>.</p>

<p>The <a href="https://docs.dgraph.io/query-language/#near"><code>near</code> function</a> matches and returns all the geo-predicates stored in the database which are within <code>distance meters</code> of geojson coordinate <code>[long, lat]</code> provided by the user.</p>

<p>Let&rsquo;s search for hotels within 7KM of from a point on the Golden Gate bridge.</p>

<p>Go to the query tab, paste the query below and click Run.</p>

<pre><code class="language-graphql">{
  find_hotel(func: near(location, [-122.479784,37.82883295],7000) )  {
    name
    has_type {
      loc_type
    }
  }
}
</code></pre>

<p><img src="https://blog.dgraph.io/images/tutorials/8/g-near-1.png" alt="geo-index" />
Wait! The search returns not just the hotels, but also all other locations within 7 Km from the point coordinate on the <code>Golden Gate Bridge</code>.</p>

<p>Let&rsquo;s use the <code>@filter</code> function to filter for search results containing only the hotels.
You can visit our <a href="https://blog.dgraph.io/post/tutorial-3-getting-started/">third tutorial</a> of the series to refresh our previous discussions around using the <code>@filter</code> directive.</p>

<pre><code class="language-graphql">{
  find_hotel(func: near(location, [-122.479784,37.82883295],7000)) {
    name
    has_type @filter(eq(loc_type, &quot;hotel&quot;)){
      loc_type 
    }
  }
}
</code></pre>

<p>Oops, we forgot to add an index while using the <code>eq</code> comparator in the filter.</p>

<p><img src="https://blog.dgraph.io/images/tutorials/8/h-near-2.png" alt="geo-index" /></p>

<p>Let&rsquo;s add a <code>hash</code> index to the <code>loc_type</code> and re-run the query.
<img src="https://blog.dgraph.io/images/tutorials/8/i-near-3.png" alt="geo-index" />
<img src="https://blog.dgraph.io/images/tutorials/8/j-near-4.png" alt="geo-index" /></p>

<p><em>Note: Refer to the <a href="https://blog.dgraph.io/post/tutorial-3-getting-started/">third tutorial</a> of the series to learn more about hash index and comparator functions in Dgraph.</em></p>

<p>The search result still contains nodes representing locations which are not hotels. That&rsquo;s because the root query first finds all the location nodes which are within 7KM from the specified point location, and then it applies the filter while selectively traversing to the <code>location type nodes</code>.</p>

<p>Only the predicates in the location nodes can be filtered at the root level, and you cannot filter the <code>location types</code> without traversing to the <code>location type nodes</code>.</p>

<p>We have the filter to select only the <code>hotels</code> while we traverse the <code>location type nodes</code>.
Can we cascade or bubble up the filter to the root level, so that, we only have <code>hotels</code> in the final result?</p>

<p>Yes you can! You can do by using the <code>@cascade</code> directive.
The <code>@cascade</code> directive helps you <code>cascade</code> or <code>bubble up</code> the filters applied to your inner query traversals to the root level nodes, by doing so, we get only the locations of <code>hotels</code> in our result.</p>

<pre><code class="language-graphql">{
  find_hotel(func: near(location, [-122.479784,37.82883295],7000)) @cascade {
   name
   price_per_night
   has_type @filter(eq(loc_type,&quot;Hotel&quot;)){
     loc_type
    }
  }
}
</code></pre>

<p><img src="https://blog.dgraph.io/images/tutorials/8/k-near-5.png" alt="geo-index" /></p>

<p>Voila! You can see in the result that, after adding the <code>@cascade</code> directive in the query, only the locations with type <code>hotel</code> appear in the result.</p>

<p>We have two hotels in the result, and one of them is over their budget of 300$ per night.
Let&rsquo;s add another filter to search for Hotels priced below $300 per night.</p>

<p>The price information of every hotel is stored in the <code>location nodes</code> along with their coordinates, hence the filter on the pricing should be at the root level of the query, not at the level we traverse the location type nodes.</p>

<p>Before you jump onto run the query, don&rsquo;t forget to add an index on the <code>price_per_night</code> predicate.</p>

<p><img src="https://blog.dgraph.io/images/tutorials/8/l-float-index.png" alt="geo-index" /></p>

<pre><code class="language-graphql">{
  find_hotel(func: near(location, [-122.479784,37.82883295],7000)) @cascade @filter(le(price_per_night, 300)){
    name
    price_per_night
    has_type @filter(eq(loc_type,&quot;Hotel&quot;)){
      loc_type
    }
  }
}

</code></pre>

<p><img src="https://blog.dgraph.io/images/tutorials/8/m-final-result.png" alt="geo-index" /></p>

<p>Now we have a hotel well within the budget, and also close to the Golden Gate Bridge!</p>

<h4 id="summary">Summary</h4>

<p>In this tutorial, we learned about geolocation capabilities in Dgraph, and helped Mary&rsquo;s team book a hotel near Golden bridge.</p>

<p>In the next episode, we&rsquo;ll showcase more geolocation functionalities in Dgraph and assist Mary&rsquo;s team in their quest for conserving Flamingo&rsquo;s.</p>

<p>See you all in the next episode.
Till then, happy Graphing!</p>

<p>Remember to click the &ldquo;Join our community&rdquo; button below and subscribe to our newsletter to get the latest tutorial right into your inbox.</p>

<hr />

<div class="engage">
	<p>
		<strong>
			We are building a fast, transactional and distributed graph database.
			If you like what you read above,
			<a href="https://dgraph.io/careers">come join</a> the team!
		</strong>
	</p>
  <table>
    <thead>
    <tr>
    <th></th>
    <th></th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td><a href="https://docs.dgraph.io" target="_blank">Get started with Dgraph</a></td>
      <td><a href="https://docs.dgraph.io" target="_blank">https://docs.dgraph.io</a></td>
    </tr>
    <tr>
      <td><a href="https://github.com/dgraph-io/dgraph" target="_blank">Star us on GitHub</a></td>
      <td><a href="https://github.com/dgraph-io/dgraph" target="_blank">https://github.com/dgraph-io/dgraph</a></td>
    </tr>
    <tr>
      <td><a href="https://discuss.dgraph.io" target="_blank">Ask us questions</a></td>
      <td><a href="https://discuss.dgraph.io" target="_blank">https://discuss.dgraph.io</a></td>
    </tr>
    </tbody>
  </table>
	<strong>Fortune 500 companies are using Dgraph in production. If you need production support,
    <a href="mailto:manish@dgraph.io">talk to us.</a></strong>
</div>
<br/>

<script>
	$('a[href="https://github.com/dgraph-io/dgraph"]').click(function(e) {
		var $el = $(e.target);
		if ($el.text().toLowerCase().indexOf('star') >= 0) {
			var pos = $el.offset();
			keenClient && keenClient.recordEvent('star-click', {
				offsetTop: pos.top,
				offsetLeft: pos.left,
			})

			ga && ga('send', 'event', 'Blog', 'text-star-click', 'Non Widget GitHub Click', 1);
		}
	})
</script>


<script src="//unpkg.com/clipboard@2.0.4"></script>
<script src="https://blog.dgraph.io/js/tutorial-3.js"></script>

<style>
 pre.with-expand {
 position: relative;
 max-height: 300px;
 overflow: hidden;
 }

 pre.with-expand .expander {
 color: #ccc;
 cursor: pointer;
 padding: 32px 0 2px;
 position: absolute;
 text-align: center;
 bottom: 0;
 left: 0;
 right: 0;
 background: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.75));
 }

 pre.with-expand.expanded {
 max-height: unset;
 }
 pre.with-expand.expanded .expander {
 display: none;
 }

 .copy-btn {
 background: #fff;
 border: 1px solid #666;
 border-radius: 2px;
 cursor: pointer;
 display: block;
 padding: 2px 6px;
 position: absolute;
 top: 4px;
 right: 4px;
 }
</style>
</div>
          <div class="article-tag-list">
            
            
                
                
                    <a href="https://blog.dgraph.io/tags/tutorial/">tutorial</a>
                
            
                
                
                    <a href="https://blog.dgraph.io/tags/devrel/">devrel</a>
                
            
          </div>
          <div class="modal fade" id="runnable-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <a href="#" data-dismiss="modal" class="modal-close-btn">
    Close
  </a>

  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">

      </div>
    </div>
  </div>
</div>
        </div>
      </div>
    </div>

    <footer class="article-footer">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="article-author">
  <figure class="article-author__figure">
    
	<img src="https://blog.dgraph.io/images/people/karthic.png" class="article-author__image">


  </figure>
  <div class="article-author__bio">
    <h4 class="article-author__name">Karthic Rao


      <span class="article-author__title">Author</span>
    </h4>
    
<nav class="social__nav article-author__social">
    <ul class="social__list social__list--inline">
        <li class="social__item social__item--inline">
            <a href="https://www.linkedin.com/in/hackintoshrao/" class="social__link">
                <svg class="icon social__icon social__icon--linkedin">
                    <use xlink:href="#icon-linkedin" xmlns:xlink="https://www.w3.org/1999/xlink"></use>
                </svg>
            </a>
        </li>
        <li class="social__item social__item--inline">
            <a href="https://twitter.com/hackintoshrao" class="social__link">
                <svg class="icon social__icon social__icon--twitter">
                    <use xlink:href="#icon-twitter" xmlns:xlink="https://www.w3.org/1999/xlink"></use>
                </svg>
            </a>
        </li>
    </ul>
</nav>
<p>
    Karthic is a Developer Advocate who strives to create value across multiple areas at Dgraph. 
    He has experience working with a wide range of startups in different domains across the globe.
    Prior to Dgraph, Caddy Server and Minio are the major Go open source projects he has contributed significantly to.
    He is an avid blogger, speaker, and musician. When not at work you could find him reading, 
    at the gym, meditating, practicing music, or on motorcycle trips.
</p>


  </div>
</div>

            
          </div>
          <div class="col-12">
            <div id='discourse-comments'></div>
          </div>
        </div>
      </div>
    </footer>
  </div>

  <div class="page-footer__wrapper">
  <footer id="page-footer" class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col-12 col-md-3">
          <figure class="page-logo-footer"><a href="https://blog.dgraph.io/"><img src="https://blog.dgraph.io/images/logo.svg" width="140" height="42" alt="Company Logo"></a></figure>
        </div>
        
        <div class="col-4 col-md-2">
          <nav class="page-footer-nav">
            <h6 class="page-footer-nav__title">Company</h6>
            <ul class="page-footer-nav__list">
              <li class="page-footer-nav__item"><a href="https://dgraph.io/about.html" title="Learn More about us" target="_blank" class="page-footer-nav__link">About</a></li>
              <li class="page-footer-nav__item"><a href="https://dgraph.io/careers.html" title="See open positions" target="_blank" class="page-footer-nav__link">Careers</a></li>
              <li class="page-footer-nav__item"><a href="https://dgraph.io/contact.html" title="How can you reach us" target="_blank" class="page-footer-nav__link">Contact</a></li>
              
              <li class="page-footer-nav__item"><a href="https://wiki.dgraph.io/Beginners_Guide#Installation" title="Download" target="_blank" class="page-footer-nav__link page-footer-nav__link--download">Download</a></li>
              
            </ul>
          </nav>
        </div>
        
        <div class="col-4 col-md-2">
          <nav class="page-footer-nav">
            <h6 class="page-footer-nav__title">Community</h6>
            <ul class="page-footer-nav__list">
              <li class="page-footer-nav__item"><a href="https://blog.dgraph.io/post/tutorial-8-getting-started/" title="Our thoughts" target="_blank" class="page-footer-nav__link">Blog</a></li>
              
              <li class="page-footer-nav__item"><a href="https://wiki.dgraph.io/" title="Documentation" target="_blank" class="page-footer-nav__link">Documentation</a></li>
              
              
              <li class="page-footer-nav__item"><a href="https://github.com/dgraph-io/dgraph" title="We are on GitHub, check it out." target="_blank" class="page-footer-nav__link">GitHub</a></li>
              
              
              <li class="page-footer-nav__item"><a href="https://discuss.dgraph.io/" title="Join our community" target="_blank" class="page-footer-nav__link">Discuss</a></li>
              
              
              <li class="page-footer-nav__item"><a href="https://slack.dgraph.io/" title="Join our community" target="_blank" class="page-footer-nav__link">Slack</a></li>
              
            </ul>
          </nav>
        </div>
        <div class="col-4 col-md-2">
          <nav class="page-footer-nav">
            <h6 class="page-footer-nav__title">Connect</h6>
            <ul class="page-footer-nav__list">
              
              <li class="page-footer-nav__item"><a href="https://twitter.com/dgraphlabs" title="Follow us on twitter" target="_blank" class="page-footer-nav__link">Twitter</a></li>
              
              
              <li class="page-footer-nav__item"><a href="https://angel.co/dgraph-labs" title="Follow us on twitter" target="_blank" class="page-footer-nav__link">Angel List</a></li>
              
            </ul>
          </nav>
        </div>
      </div>
      <div class="row">
        <span class="imprint__copyrights">Copyright (c) 2020, Dgraph Labs, Inc. All rights reserved.</span>
      </div>
    </div>

    <div class="github-engage">
      <div class="line1">Do you like our blog?</div>
      <a class="github-close" href="javascript:void(0)">
        <i class="fa fas fa-times"></i>
      </a>

      <div id="star-us-wrapper">
        <a
            class="github-button"
            href="https://github.com/dgraph-io/dgraph"
            data-size="large" data-show-count="true"
            aria-label="Star dgraph-io/dgraph on GitHub">
          Star us on GitHub
        </a>
      </div>
      <div class="love">
        <div class="heart-wrapper">
          <div class="heart">
            <div class="tl"></div>
            <div class="tr"></div>
            <div class="bl"></div>
            <div class="br"></div>
          </div>
          <div class="ring"></div>
          <div class="circles"></div>
        </div>

        <div class="love-text">
          We Love You!
        </div>
      </div>
    </div>
  </footer>
  
</div>

    <script src="https://blog.dgraph.io//js/clipboard.min.js"></script>
    <script
      src='https://blog.dgraph.io//js/runnable.js?29f8ba4fb8d90804cf24ff53b70192ad'
    ></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>




<script>
  window.Countly = window.Countly || {};
  Countly.q = Countly.q || [];

  Countly.q.push(['track_sessions']);
  Countly.q.push(['track_pageview']);
  (function() {
  	var cly = document.createElement('script');
  	cly.type = 'text/javascript';
  	cly.async = true;
  	cly.src = "https://dgraph.io/assets/js/unminified/stats/dgraph-stats.min.js";
  	cly.onload = function() {
      Countly.init({
        app_key: "e93284ab5e5d21ef9eb16a94516b3c1c6eba1015",
        url: "https://stats.dgraph.io",
        force_post: true,
      })
  	};
  	document.body.appendChild(cly);
  })();
</script>


<script>
$(document.links)
  .filter(function() {
    return this.hostname != window.location.hostname;
  })
  .attr("target", "_blank");
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/visibility.js/1.2.4/visibility.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/heart.css?24a50879951b2391f04750723b4a012e'
  rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/github-engage.css?d60d80bf2b6a24350cdb5d834ab47e27'
  rel="stylesheet">

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js"
  integrity="sha256-7/yoZS3548fXSRXqc/xYzjsmuW3sFKzuvOCHd06Pmps="
  crossorigin="anonymous"
></script>
<script
  type="text/javascript"
  src='https://blog.dgraph.io//js/custom.js?94f0c667422b8dac293e14c9c49872e3'
></script>

<script src="//unpkg.com/@dgraph-io/community"></script>

</body>
</html>

  

  
  <script type="text/javascript">
DiscourseEmbed = {
  discourseUrl: "https:\/\/discuss.dgraph.io\/",
  topicId:  5984 
  };
(function() {
  var d = document.createElement("script");
  d.type = "text/javascript";
  d.async = true;
  d.src = DiscourseEmbed.discourseUrl + "javascripts/embed.js";
  (document.getElementsByTagName("head")[0] ||
    document.getElementsByTagName("body")[0])
    .appendChild(d);
})();
</script>
  <noscript>Please enable JavaScript to view the comments on <a href="https://discuss.dgraph.io/">discuss</a>.</noscript>
  
</html>
