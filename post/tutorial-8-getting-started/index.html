<!DOCTYPE html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1">
  <link rel="canonical" href="https://blog.dgraph.io/post/tutorial-8-getting-started/" />


  <link rel="apple-touch-icon" sizes="57x57" href="https://dgraph.io/assets/images/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://dgraph.io/assets/images/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://dgraph.io/assets/images/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://dgraph.io/assets/images/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://dgraph.io/assets/images/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://dgraph.io/assets/images/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://dgraph.io/assets/images/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://dgraph.io/assets/images/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://dgraph.io/assets/images/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"
    href="https://dgraph.io/assets/images/favicons/android-icon-192x192.png">
  <link rel="manifest" href="https://dgraph.io/assets/images/favicons/manifest.json">
  <link rel="icon" type="image/png" sizes="32x32" href="https://dgraph.io/assets/images/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://dgraph.io/assets/images/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://dgraph.io/assets/images/faviconsfavicon-16x16.png">
  <link rel="shortcut icon" href="https://dgraph.io/assets/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://dgraph.io/assets/images/faviconsms-icon-144x144.png">
  <meta name="msapplication-config" content="https://dgraph.io/assets/favicons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.dgraph.io//index.xml">
  
  <title>Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features - Dgraph Blog</title>
  <meta property='og:title' content="Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features - Dgraph Blog">
  <meta property="og:type" content="article">
  

  <meta property="og:url" content="https://blog.dgraph.io/post/tutorial-8-getting-started/">
  
  
  <meta property="og:image" content="https://blog.dgraph.io//images/tutorials/8/cover.jpg">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
    integrity="sha256-0rguYS0qgS6L4qVzANq4kjxPLtvnp5nn2nB5G1lWRv4=" crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css" rel="stylesheet"
    integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"
    integrity="sha256-sNPiigbfSkqUzMc5rgrdztLnneCMAp6W9wetJUZu9Zw=" crossorigin="anonymous"></script>
  <link
    href='https://blog.dgraph.io//css/runnable.css?7bbf71b4888bc97241e85bc7326a12fe'
    rel="stylesheet" />
  
  <link
    href='https://blog.dgraph.io//css/runnable-custom.css?74110b504a7b8a6e92a95279cfa96032'
    rel="stylesheet" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500&display=swap" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />

  <link href="https://dgraph.io/assets/css/style.min.css?06042020-12" rel="stylesheet" type="text/css" />

  <link href="https://dgraph.io/assets/css/font-awesome/css/all.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:ital@1&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">


  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js"
    integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css"
    integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js"
    integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js"
    integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin="anonymous"></script>
  

  <script src="https://cdn.jsdelivr.net/npm/algoliasearch@3/dist/algoliasearch.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.0.0/dist/instantsearch.production.min.js"
    integrity="sha256-6S7q0JJs/Kx4kb/fv0oMjS855QTz5Rc2hh9AkIUjUsk=" crossorigin="anonymous"></script>
  <script src="https://blog.dgraph.io//js/search.js?04292020"></script>
  <script>

    $(".subscribe-box").hide();
    $(window).scroll(function () {
      if ($(window).scrollTop() > 220) {
        $(".subscribe-box").fadeIn("slow");
      }
      else {
        $(".subscribe-box").fadeOut("fast");
      }
    });
   
    
    
    $(window).scroll(function () {
      if ($(window).scrollTop() > 180) {
        $("#page-header").addClass("bg-white");
      }
      else {
        $("#page-header").removeClass("bg-white");
      }
    });

    $(document).scroll(function () {
      checkOffset();
    });

   
    function checkOffset() {
      var x = $(".container").offset();
        var leftPosition = x.left + 90;
      if ($('.subscribe-box').offset().top + $('.subscribe-box').height()
        >= $('.bottom-section').offset().top - 10){
        $('.subscribe-box').addClass('footer-before');
        $('.footer-before').css('left',  -leftPosition  );
        }
      if ($(document).scrollTop() + window.innerHeight < $('.bottom-section').offset().top){
        $('.subscribe-box').removeClass('footer-before');
        $('.subscribe-box').css('left',  '15px' );
      }
         
    }
    $(document).ready(function () {
      $( ".page-search" ).wrapInner( "<div class='wrapper'></div>")
      $('.wrapper').after($('.page-search__results'))

      $(".subscribe-box-mobi .click-btn").click(function () {
        $(".subscribe-box").toggleClass("open");
        $(".subscribe-box-mobi").toggleClass('hide');
      });
      $(".subscribe-box .close").click(function () {
        $(".subscribe-box").toggleClass("open");
        $(".subscribe-box-mobi").toggleClass('hide');
      });
      $('.nav-icon').click(function() {
	    $('.page-nav').toggleClass('shownav');
	    $(this).toggleClass('active');
  });
  var $nav = document.querySelector('.page-nav > ul');
	var $navItems = document.querySelectorAll('.page-nav > ul > li');
	var $navItemHeading = document.querySelectorAll('.page-nav > ul > li > div');
  var $subnav = document.querySelectorAll('.page-nav > ul > li > ul');
  $($navItemHeading).click(function(e) {
	    $($navItems).removeClass('active');
	    $(this).parent().toggleClass('active');
	});
  $('.nav-icon[target="_blank"]').removeAttr('target');
  var x = $(".container").offset();
  var leftPosition = x.left;
    });
  </script>

  
  
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://blog.dgraph.io//images/tutorials/8/cover.jpg" />
  
  

  <meta name="twitter:title" content="Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features" />
  <meta name="twitter:description"
    content="Welcome to the eighth episode of getting started with Dgraph.
In the previous episode, we learned about building a twitter-like user-search feature using Dgraph&rsquo;s fuzzy search." />
  
  <meta name="twitter:site" content="@dgraphlabs" />

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-666192333"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'AW-666192333');</script>
</head>

<body class="blog-single has-lightning" data-gr-c-s-loaded="true">

    <header id="page-header" class="page-header">
	<div class="page-logo">
		<a href="https://dgraph.io/">
			<img src="https://dgraph.io/assets/images/logo.svg">
		</a>
	</div>
	<nav class="page-nav">
    <ul>
        <li>
            <div data-label="Products">
                <span>Products</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/graphql" data-label="GraphQL">
                        <span>GraphQL</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/enterprise" data-label="Enterprise">
                        <span>Enterprise</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/downloads" data-label="Downloads">
                        <span>Downloads</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Learn" class="is-active">
                <span>Learn</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/blog" data-label="Blog">
                        <span>Blog</span>
                    </a>
                </li>
                <li>
                    <a href="https://tour.dgraph.io" target="_blank" data-label="Interactive Tour">
                        <span>Interactive Tour</span>
                    </a>
                </li>
                <li>
                    <a href="https://discuss.dgraph.io" target="_blank" data-label="Forum">
                        <span>Forum</span>
                    </a>
                </li>
                <li>
                    <a href="https://slack.dgraph.io" target="_blank" data-label="Slack">
                        <span>Slack</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Docs"><span>Docs</span></div>
            <ul>
                <li>
                    <a href="https://docs.dgraph.io" target="_blank" data-label="Dgraph Docs">
                        <span>Dgraph Docs</span>
                    </a>
                </li>
                <li>
                    <a href="https://graphql.dgraph.io/docs/" target="_blank" data-label="GraphQL Docs">
                        <span>GraphQL Docs</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Company"><span>Company</span></div>
            <ul>
                <li>
                    <a href="https://dgraph.io/about" data-label="Team">
                        <span>Team</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/careers" data-label="Careers">
                        <span>Careers</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/contact" data-label="Contact">
                        <span>Contact</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/conduct" data-label="Conduct">
                        <span>Conduct</span>
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</nav>

	<div class="page-cta">
    <ul>
        <li class="hide-tablet">
            <a href="https://dgraph.io/contact" title="Contact">Contact</a>
        </li>
        <li>
            <a href="https://dgraph.io/downloads" title="Download" class="button button--secondary">
                <span>Download</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        </li>
    </ul>
</div>

</header>




    <section class="page-body">
        <div class="page-body__content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-10 ">

                        <div class="page-search form-group has-search">
	<span class="fas fa-search form-control-feedback"></span>
	
</div>
                     </div>
                </div>
            </div>
        </div>
        
        <div class="container">
            <div class="row justify-content-center">

                <div class="col-10 ">
                    <div class="">

                        <div class="post__meta">

                            <div class="post__date">

    
        Tue, Jan 28, 2020
    
    
</div>


                            <div class="post__share">
                                
                                <a href="https://twitter.com/share?text=Getting%20started%20with%20Dgraph-8%3a%20Easily%20build%20location-aware%20apps%20using%20our%20native%20geolocation%20features&amp;url=https%3a%2f%2fblog.dgraph.io%2fpost%2ftutorial-8-getting-started%2f&amp;via=dgraphlabs"
                                    target="_blank">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                
                            </div>

                        </div>

                        <div class="post__cover">

                            <img
                                src="https://blog.dgraph.io//images/tutorials/8/cover.jpg">

                            <div class="post__header">

                                <h1 class="post__title">
                                    Getting started with Dgraph-8: Easily build location-aware apps using our native geolocation features
                                </h1>

                                
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/karthic/">Karthic Rao</a>
        
    

</div>



                            </div>

                        </div>

                        <div class="post__content inner-content lg-pl-80 lg-pr-80 md-pl-50 md-pr-50 xs-pl-30 xs-pr-30 clearfix">
                            <p>Welcome to the eighth episode of getting started with Dgraph.</p>
<p>In the <a href="https://blog.dgraph.io/post/tutorial-7-getting-started/">previous episode</a>, we learned about building a twitter-like user-search feature using <a href="https://docs.dgraph.io/query-language/#fuzzy-matching">Dgraph&rsquo;s fuzzy search</a>.</p>
<p>In this episode, we&rsquo;ll build a graph of tourist locations around San Francisco and help our Zoologist friend, Mary, and her team in their mission to conserve birds using Dgraph&rsquo;s geolocation capabilities.</p>
<p>You might have used Google to find the restaurants near you or to find the shopping centres within a mile of your current location.
Applications like these make use of your geolocation data.</p>
<p>Geolocation has become an integral part of mobile applications, especially with the advent of smartphones in the last decade, the list of applications which revolves around users location to power application features has grown beyond imagination.</p>
<p>Let&rsquo;s take Uber, for instance, the location data of the driver and passenger is pivotal for the functionality of the application.
We&rsquo;re gathering more GPS data than ever before, being able to store and query the location data efficiently can give you an edge over your competitors.</p>
<p>Real-world data is interconnected; they are not sparse; this is more relevant when it comes to location data.
The natural representation of railway networks, maps, routes are graphs.</p>
<p>The good news is that <a href="https://dgraph.io">Dgraph</a>, the world&rsquo;s most advanced graph database, comes with functionalities to efficiently store and perform useful queries on graphs containing location data.
If you want to run queries like <code>find me the hotels near Golden Gate Bridge</code>, or find me all the tourist location around <code>Golden Gate Park</code>, Dgraph has your back.</p>
<p>First, let&rsquo;s learn how to represent Geolocation data in Dgraph.</p>
<h4 id="representing-geolocation-data">Representing Geolocation data</h4>
<p>You can represent location data in Dgraph using two ways:</p>
<ul>
<li><strong>Point location</strong></li>
</ul>
<p>Point location contains the geo-coordinate tuple (latitude, longitude) of your location of interest.</p>
<p>The following image has the point location with the latitude and longitude for the Eifel tower in Paris.
Point locations are useful for representing a precise location; for instance, your location when booking a cab or your delivery address.</p>
<p><img src="https://blog.dgraph.io/images/tutorials/8/b-paris.png" alt="model"></p>
<ul>
<li><strong>Polygonal location</strong></li>
</ul>
<p>It&rsquo;s not possible to represent geographical entities which are spread across multiple geo-coordinates just using a point location.
To represent geo entities like a city, a lake, or a national park, you should use a polygonal location.
Here is an example:
<img src="https://blog.dgraph.io/images/tutorials/8/c-delhi.jpg" alt="model"></p>
<p>The polygonal fence above represents the city of Delhi, India.
This polygonal fence or the geo-fence is formed by connecting multiple straight-line boundaries, and they are collectively represented using an array of location tuples of format <code>[(latitude, longitude), (latitude, longitude), ...]</code>.
Each tuple pair <code>(2 tuples and 4 coordinates)</code> represents a straight line boundary of the geo-fence, and a polygonal fence can contain any number of lines.</p>
<p>Let&rsquo;s start with building a simple San Francisco tourist graph, here&rsquo;s the graph model.
<img src="https://blog.dgraph.io/images/tutorials/8/a-graph.jpg" alt="model"></p>
<p>The above graph has three entities represented by the nodes:</p>
<ul>
<li><strong>City</strong></li>
</ul>
<p>A <code>city node</code> represents the tourist city.
Our dataset only contains the city of <code>San Francisco</code>, and a node in the graph represents it.</p>
<ul>
<li><strong>Location</strong></li>
</ul>
<p>A location node, along with the name of the location, it contains the point or polygonal location of the place of interest.</p>
<ul>
<li><strong>Location Type</strong></li>
</ul>
<p>A location type consists of the type of location.
There are four types of location in our dataset: <code>zoo</code>, <code>museum</code>, <code>hotel</code> or a <code>tourist attraction</code>.</p>
<p>The <code>location nodes</code> with geo-coordinates of a <code>hotel</code> also contains their pricing information.</p>
<p>There are different ways to model the same graph.
For instance, the <code>location type</code> could just be a property or a predicate of the <code>location node</code>, rather than being a node of its own.</p>
<p>The queries you want to perform or the relationships you like to explore mostly influence the modelling decisions.
The goal of the tutorial is not to arrive at the ideal graph model, but to use a simple dataset to demonstrate the geolocation capabilities of Dgraph.</p>
<p>For the rest of the tutorial, let&rsquo;s call the node representing a <code>City</code> as a <code>city</code> node, and the node representing a <code>Location</code> as a <code>location</code> node, and the node representing the <code>Location Type</code> as a <code>location type</code> node.</p>
<p>Here&rsquo;s the relationship between these nodes:</p>
<ul>
<li>Every <code>city node</code> is connected to a <code>location node</code> via the <code>has_location </code> edge.</li>
<li>Every <code>location node</code> is connected to its node representing a <code>location type</code> via the <code>has_type</code> edge.</li>
</ul>
<p><em>Note: Dgraph allows you to associate one or more types for the nodes using its type system feature, for now, we are using nodes without types, we&rsquo;ll learn about type system for nodes in a future episode.
Check <a href="https://docs.dgraph.io/query-language/#type-system">this page from the documentation site</a>, if you want to explore type system feature for nodes.</em></p>
<p>Here is our sample dataset.
Open Ratel, go to the mutate tab, paste the mutation, and click Run.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#000080">&#34;set&#34;</span>: [
    {
      <span style="color:#000080">&#34;city&#34;</span>: <span style="color:#d14">&#34;San Francisco&#34;</span>,
      <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:SFO&#34;</span>,
      <span style="color:#000080">&#34;has_location&#34;</span>: [
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;USS Pampanito&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.4160088</span>,
                  <span style="color:#099">37.8096674</span>
                ],
                [
                  <span style="color:#099">-122.4161147</span>,
                  <span style="color:#099">37.8097628</span>
                ],
                [
                  <span style="color:#099">-122.4162064</span>,
                  <span style="color:#099">37.8098357</span>
                ],
                [
                  <span style="color:#099">-122.4163467</span>,
                  <span style="color:#099">37.8099312</span>
                ],
                [
                  <span style="color:#099">-122.416527</span>,
                  <span style="color:#099">37.8100471</span>
                ],
                [
                  <span style="color:#099">-122.4167504</span>,
                  <span style="color:#099">37.8101792</span>
                ],
                [
                  <span style="color:#099">-122.4168272</span>,
                  <span style="color:#099">37.8102137</span>
                ],
                [
                  <span style="color:#099">-122.4167719</span>,
                  <span style="color:#099">37.8101612</span>
                ],
                [
                  <span style="color:#099">-122.4165683</span>,
                  <span style="color:#099">37.8100108</span>
                ],
                [
                  <span style="color:#099">-122.4163888</span>,
                  <span style="color:#099">37.8098923</span>
                ],
                [
                  <span style="color:#099">-122.4162492</span>,
                  <span style="color:#099">37.8097986</span>
                ],
                [
                  <span style="color:#099">-122.4161469</span>,
                  <span style="color:#099">37.8097352</span>
                ],
                [
                  <span style="color:#099">-122.4160088</span>,
                  <span style="color:#099">37.8096674</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:museum&#34;</span>,
              <span style="color:#000080">&#34;loc_type&#34;</span>: <span style="color:#d14">&#34;Museum&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Alameda Naval Air Museum&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.2995054</span>,
                  <span style="color:#099">37.7813924</span>
                ],
                [
                  <span style="color:#099">-122.2988538</span>,
                  <span style="color:#099">37.7813582</span>
                ],
                [
                  <span style="color:#099">-122.2988421</span>,
                  <span style="color:#099">37.7814972</span>
                ],
                [
                  <span style="color:#099">-122.2994937</span>,
                  <span style="color:#099">37.7815314</span>
                ],
                [
                  <span style="color:#099">-122.2995054</span>,
                  <span style="color:#099">37.7813924</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;Ferry Point Road&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:museum&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Burlingame Museum of PEZ Memorabilia&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.3441509</span>,
                  <span style="color:#099">37.5792003</span>
                ],
                [
                  <span style="color:#099">-122.3438207</span>,
                  <span style="color:#099">37.5794257</span>
                ],
                [
                  <span style="color:#099">-122.3438987</span>,
                  <span style="color:#099">37.5794587</span>
                ],
                [
                  <span style="color:#099">-122.3442289</span>,
                  <span style="color:#099">37.5792333</span>
                ],
                [
                  <span style="color:#099">-122.3441509</span>,
                  <span style="color:#099">37.5792003</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;California Drive&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:museum&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Carriage Inn&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.3441509</span>,
                  <span style="color:#099">37.5792003</span>
                ],
                [
                  <span style="color:#099">-122.3438207</span>,
                  <span style="color:#099">37.5794257</span>
                ],
                [
                  <span style="color:#099">-122.3438987</span>,
                  <span style="color:#099">37.5794587</span>
                ],
                [
                  <span style="color:#099">-122.3442289</span>,
                  <span style="color:#099">37.5792333</span>
                ],
                [
                  <span style="color:#099">-122.3441509</span>,
                  <span style="color:#099">37.5792003</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;7th street&#34;</span>,
          <span style="color:#000080">&#34;price_per_night&#34;</span>: <span style="color:#099">350.00</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:hotel&#34;</span>,
              <span style="color:#000080">&#34;loc_type&#34;</span>: <span style="color:#d14">&#34;Hotel&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Lombard Motor In&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.4260484</span>,
                  <span style="color:#099">37.8009811</span>
                ],
                [
                  <span style="color:#099">-122.4260137</span>,
                  <span style="color:#099">37.8007969</span>
                ],
                [
                  <span style="color:#099">-122.4259083</span>,
                  <span style="color:#099">37.80081</span>
                ],
                [
                  <span style="color:#099">-122.4258724</span>,
                  <span style="color:#099">37.8008144</span>
                ],
                [
                  <span style="color:#099">-122.4257962</span>,
                  <span style="color:#099">37.8008239</span>
                ],
                [
                  <span style="color:#099">-122.4256354</span>,
                  <span style="color:#099">37.8008438</span>
                ],
                [
                  <span style="color:#099">-122.4256729</span>,
                  <span style="color:#099">37.8010277</span>
                ],
                [
                  <span style="color:#099">-122.4260484</span>,
                  <span style="color:#099">37.8009811</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;Lombard Street&#34;</span>,
          <span style="color:#000080">&#34;price_per_night&#34;</span>: <span style="color:#099">400.00</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:hotel&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Holiday Inn San Francisco Golden Gateway&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.4214895</span>,
                  <span style="color:#099">37.7896108</span>
                ],
                [
                  <span style="color:#099">-122.4215628</span>,
                  <span style="color:#099">37.7899798</span>
                ],
                [
                  <span style="color:#099">-122.4215712</span>,
                  <span style="color:#099">37.790022</span>
                ],
                [
                  <span style="color:#099">-122.4215987</span>,
                  <span style="color:#099">37.7901606</span>
                ],
                [
                  <span style="color:#099">-122.4221004</span>,
                  <span style="color:#099">37.7900985</span>
                ],
                [
                  <span style="color:#099">-122.4221044</span>,
                  <span style="color:#099">37.790098</span>
                ],
                [
                  <span style="color:#099">-122.4219952</span>,
                  <span style="color:#099">37.7895481</span>
                ],
                [
                  <span style="color:#099">-122.4218207</span>,
                  <span style="color:#099">37.78957</span>
                ],
                [
                  <span style="color:#099">-122.4216158</span>,
                  <span style="color:#099">37.7895961</span>
                ],
                [
                  <span style="color:#099">-122.4214895</span>,
                  <span style="color:#099">37.7896108</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;Van Ness Avenue&#34;</span>,
          <span style="color:#000080">&#34;price_per_night&#34;</span>: <span style="color:#099">250.00</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:hotel&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Golden Gate Bridge&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.479784</span>,
                  <span style="color:#099">37.8288329</span>
                ],
                [
                  <span style="color:#099">-122.4775646</span>,
                  <span style="color:#099">37.8096291</span>
                ],
                [
                  <span style="color:#099">-122.4775538</span>,
                  <span style="color:#099">37.8095165</span>
                ],
                [
                  <span style="color:#099">-122.4775465</span>,
                  <span style="color:#099">37.8093304</span>
                ],
                [
                  <span style="color:#099">-122.4775823</span>,
                  <span style="color:#099">37.8093296</span>
                ],
                [
                  <span style="color:#099">-122.4775387</span>,
                  <span style="color:#099">37.8089749</span>
                ],
                [
                  <span style="color:#099">-122.4773545</span>,
                  <span style="color:#099">37.8089887</span>
                ],
                [
                  <span style="color:#099">-122.4773402</span>,
                  <span style="color:#099">37.8089575</span>
                ],
                [
                  <span style="color:#099">-122.4772752</span>,
                  <span style="color:#099">37.8088285</span>
                ],
                [
                  <span style="color:#099">-122.4772084</span>,
                  <span style="color:#099">37.8087099</span>
                ],
                [
                  <span style="color:#099">-122.4771322</span>,
                  <span style="color:#099">37.8085903</span>
                ],
                [
                  <span style="color:#099">-122.4770518</span>,
                  <span style="color:#099">37.8084793</span>
                ],
                [
                  <span style="color:#099">-122.4769647</span>,
                  <span style="color:#099">37.8083687</span>
                ],
                [
                  <span style="color:#099">-122.4766802</span>,
                  <span style="color:#099">37.8080091</span>
                ],
                [
                  <span style="color:#099">-122.4766629</span>,
                  <span style="color:#099">37.8080195</span>
                ],
                [
                  <span style="color:#099">-122.4765701</span>,
                  <span style="color:#099">37.8080751</span>
                ],
                [
                  <span style="color:#099">-122.476475</span>,
                  <span style="color:#099">37.8081322</span>
                ],
                [
                  <span style="color:#099">-122.4764106</span>,
                  <span style="color:#099">37.8081708</span>
                ],
                [
                  <span style="color:#099">-122.476396</span>,
                  <span style="color:#099">37.8081795</span>
                ],
                [
                  <span style="color:#099">-122.4764936</span>,
                  <span style="color:#099">37.8082814</span>
                ],
                [
                  <span style="color:#099">-122.476591</span>,
                  <span style="color:#099">37.8083823</span>
                ],
                [
                  <span style="color:#099">-122.4766888</span>,
                  <span style="color:#099">37.8084949</span>
                ],
                [
                  <span style="color:#099">-122.47677</span>,
                  <span style="color:#099">37.808598</span>
                ],
                [
                  <span style="color:#099">-122.4768444</span>,
                  <span style="color:#099">37.8087008</span>
                ],
                [
                  <span style="color:#099">-122.4769144</span>,
                  <span style="color:#099">37.8088105</span>
                ],
                [
                  <span style="color:#099">-122.4769763</span>,
                  <span style="color:#099">37.8089206</span>
                ],
                [
                  <span style="color:#099">-122.4770373</span>,
                  <span style="color:#099">37.8090416</span>
                ],
                [
                  <span style="color:#099">-122.477086</span>,
                  <span style="color:#099">37.809151</span>
                ],
                [
                  <span style="color:#099">-122.4771219</span>,
                  <span style="color:#099">37.8092501</span>
                ],
                [
                  <span style="color:#099">-122.4771529</span>,
                  <span style="color:#099">37.809347</span>
                ],
                [
                  <span style="color:#099">-122.477179</span>,
                  <span style="color:#099">37.8094517</span>
                ],
                [
                  <span style="color:#099">-122.4772003</span>,
                  <span style="color:#099">37.809556</span>
                ],
                [
                  <span style="color:#099">-122.4772159</span>,
                  <span style="color:#099">37.8096583</span>
                ],
                [
                  <span style="color:#099">-122.4794624</span>,
                  <span style="color:#099">37.8288561</span>
                ],
                [
                  <span style="color:#099">-122.4794098</span>,
                  <span style="color:#099">37.82886</span>
                ],
                [
                  <span style="color:#099">-122.4794817</span>,
                  <span style="color:#099">37.8294742</span>
                ],
                [
                  <span style="color:#099">-122.4794505</span>,
                  <span style="color:#099">37.8294765</span>
                ],
                [
                  <span style="color:#099">-122.4794585</span>,
                  <span style="color:#099">37.8295453</span>
                ],
                [
                  <span style="color:#099">-122.4795423</span>,
                  <span style="color:#099">37.8295391</span>
                ],
                [
                  <span style="color:#099">-122.4796312</span>,
                  <span style="color:#099">37.8302987</span>
                ],
                [
                  <span style="color:#099">-122.4796495</span>,
                  <span style="color:#099">37.8304478</span>
                ],
                [
                  <span style="color:#099">-122.4796698</span>,
                  <span style="color:#099">37.8306078</span>
                ],
                [
                  <span style="color:#099">-122.4796903</span>,
                  <span style="color:#099">37.830746</span>
                ],
                [
                  <span style="color:#099">-122.4797182</span>,
                  <span style="color:#099">37.8308784</span>
                ],
                [
                  <span style="color:#099">-122.4797544</span>,
                  <span style="color:#099">37.83102</span>
                ],
                [
                  <span style="color:#099">-122.479799</span>,
                  <span style="color:#099">37.8311522</span>
                ],
                [
                  <span style="color:#099">-122.4798502</span>,
                  <span style="color:#099">37.8312845</span>
                ],
                [
                  <span style="color:#099">-122.4799025</span>,
                  <span style="color:#099">37.8314139</span>
                ],
                [
                  <span style="color:#099">-122.4799654</span>,
                  <span style="color:#099">37.8315458</span>
                ],
                [
                  <span style="color:#099">-122.4800346</span>,
                  <span style="color:#099">37.8316718</span>
                ],
                [
                  <span style="color:#099">-122.4801231</span>,
                  <span style="color:#099">37.8318137</span>
                ],
                [
                  <span style="color:#099">-122.4802112</span>,
                  <span style="color:#099">37.8319368</span>
                ],
                [
                  <span style="color:#099">-122.4803028</span>,
                  <span style="color:#099">37.8320547</span>
                ],
                [
                  <span style="color:#099">-122.4804046</span>,
                  <span style="color:#099">37.8321657</span>
                ],
                [
                  <span style="color:#099">-122.4805121</span>,
                  <span style="color:#099">37.8322792</span>
                ],
                [
                  <span style="color:#099">-122.4805883</span>,
                  <span style="color:#099">37.8323459</span>
                ],
                [
                  <span style="color:#099">-122.4805934</span>,
                  <span style="color:#099">37.8323502</span>
                ],
                [
                  <span style="color:#099">-122.4807146</span>,
                  <span style="color:#099">37.8323294</span>
                ],
                [
                  <span style="color:#099">-122.4808917</span>,
                  <span style="color:#099">37.832299</span>
                ],
                [
                  <span style="color:#099">-122.4809526</span>,
                  <span style="color:#099">37.8322548</span>
                ],
                [
                  <span style="color:#099">-122.4809672</span>,
                  <span style="color:#099">37.8322442</span>
                ],
                [
                  <span style="color:#099">-122.4808396</span>,
                  <span style="color:#099">37.8321298</span>
                ],
                [
                  <span style="color:#099">-122.4807166</span>,
                  <span style="color:#099">37.8320077</span>
                ],
                [
                  <span style="color:#099">-122.4806215</span>,
                  <span style="color:#099">37.8319052</span>
                ],
                [
                  <span style="color:#099">-122.4805254</span>,
                  <span style="color:#099">37.8317908</span>
                ],
                [
                  <span style="color:#099">-122.4804447</span>,
                  <span style="color:#099">37.8316857</span>
                ],
                [
                  <span style="color:#099">-122.4803548</span>,
                  <span style="color:#099">37.8315539</span>
                ],
                [
                  <span style="color:#099">-122.4802858</span>,
                  <span style="color:#099">37.8314395</span>
                ],
                [
                  <span style="color:#099">-122.4802227</span>,
                  <span style="color:#099">37.8313237</span>
                ],
                [
                  <span style="color:#099">-122.4801667</span>,
                  <span style="color:#099">37.8312051</span>
                ],
                [
                  <span style="color:#099">-122.4801133</span>,
                  <span style="color:#099">37.8310812</span>
                ],
                [
                  <span style="color:#099">-122.4800723</span>,
                  <span style="color:#099">37.8309602</span>
                ],
                [
                  <span style="color:#099">-122.4800376</span>,
                  <span style="color:#099">37.8308265</span>
                ],
                [
                  <span style="color:#099">-122.4800087</span>,
                  <span style="color:#099">37.8307005</span>
                ],
                [
                  <span style="color:#099">-122.4799884</span>,
                  <span style="color:#099">37.8305759</span>
                ],
                [
                  <span style="color:#099">-122.4799682</span>,
                  <span style="color:#099">37.8304181</span>
                ],
                [
                  <span style="color:#099">-122.4799501</span>,
                  <span style="color:#099">37.8302699</span>
                ],
                [
                  <span style="color:#099">-122.4798628</span>,
                  <span style="color:#099">37.8295146</span>
                ],
                [
                  <span style="color:#099">-122.4799157</span>,
                  <span style="color:#099">37.8295107</span>
                ],
                [
                  <span style="color:#099">-122.4798451</span>,
                  <span style="color:#099">37.8289002</span>
                ],
                [
                  <span style="color:#099">-122.4798369</span>,
                  <span style="color:#099">37.828829</span>
                ],
                [
                  <span style="color:#099">-122.479784</span>,
                  <span style="color:#099">37.8288329</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;Golden Gate Bridge&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:attraction&#34;</span>,
              <span style="color:#000080">&#34;loc_type&#34;</span>: <span style="color:#d14">&#34;Tourist Attraction&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Carriage Inn&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.3441509</span>,
                  <span style="color:#099">37.5792003</span>
                ],
                [
                  <span style="color:#099">-122.3438207</span>,
                  <span style="color:#099">37.5794257</span>
                ],
                [
                  <span style="color:#099">-122.3438987</span>,
                  <span style="color:#099">37.5794587</span>
                ],
                [
                  <span style="color:#099">-122.3442289</span>,
                  <span style="color:#099">37.5792333</span>
                ],
                [
                  <span style="color:#099">-122.3441509</span>,
                  <span style="color:#099">37.5792003</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;7th street&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:attraction&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;San Francisco Zoo&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.5036126</span>,
                  <span style="color:#099">37.7308562</span>
                ],
                [
                  <span style="color:#099">-122.5028991</span>,
                  <span style="color:#099">37.7305879</span>
                ],
                [
                  <span style="color:#099">-122.5028274</span>,
                  <span style="color:#099">37.7305622</span>
                ],
                [
                  <span style="color:#099">-122.5027812</span>,
                  <span style="color:#099">37.7305477</span>
                ],
                [
                  <span style="color:#099">-122.5026992</span>,
                  <span style="color:#099">37.7305269</span>
                ],
                [
                  <span style="color:#099">-122.5026211</span>,
                  <span style="color:#099">37.7305141</span>
                ],
                [
                  <span style="color:#099">-122.5025342</span>,
                  <span style="color:#099">37.7305081</span>
                ],
                [
                  <span style="color:#099">-122.5024478</span>,
                  <span style="color:#099">37.7305103</span>
                ],
                [
                  <span style="color:#099">-122.5023667</span>,
                  <span style="color:#099">37.7305221</span>
                ],
                [
                  <span style="color:#099">-122.5022769</span>,
                  <span style="color:#099">37.7305423</span>
                ],
                [
                  <span style="color:#099">-122.5017546</span>,
                  <span style="color:#099">37.7307008</span>
                ],
                [
                  <span style="color:#099">-122.5006917</span>,
                  <span style="color:#099">37.7311277</span>
                ],
                [
                  <span style="color:#099">-122.4992484</span>,
                  <span style="color:#099">37.7317075</span>
                ],
                [
                  <span style="color:#099">-122.4991414</span>,
                  <span style="color:#099">37.7317614</span>
                ],
                [
                  <span style="color:#099">-122.4990379</span>,
                  <span style="color:#099">37.7318177</span>
                ],
                [
                  <span style="color:#099">-122.4989369</span>,
                  <span style="color:#099">37.7318762</span>
                ],
                [
                  <span style="color:#099">-122.4988408</span>,
                  <span style="color:#099">37.731938</span>
                ],
                [
                  <span style="color:#099">-122.4987386</span>,
                  <span style="color:#099">37.7320142</span>
                ],
                [
                  <span style="color:#099">-122.4986377</span>,
                  <span style="color:#099">37.732092</span>
                ],
                [
                  <span style="color:#099">-122.4978359</span>,
                  <span style="color:#099">37.7328712</span>
                ],
                [
                  <span style="color:#099">-122.4979122</span>,
                  <span style="color:#099">37.7333232</span>
                ],
                [
                  <span style="color:#099">-122.4979485</span>,
                  <span style="color:#099">37.7333909</span>
                ],
                [
                  <span style="color:#099">-122.4980162</span>,
                  <span style="color:#099">37.7334494</span>
                ],
                [
                  <span style="color:#099">-122.4980945</span>,
                  <span style="color:#099">37.7334801</span>
                ],
                [
                  <span style="color:#099">-122.4989553</span>,
                  <span style="color:#099">37.7337384</span>
                ],
                [
                  <span style="color:#099">-122.4990551</span>,
                  <span style="color:#099">37.7337743</span>
                ],
                [
                  <span style="color:#099">-122.4991479</span>,
                  <span style="color:#099">37.7338184</span>
                ],
                [
                  <span style="color:#099">-122.4992482</span>,
                  <span style="color:#099">37.7338769</span>
                ],
                [
                  <span style="color:#099">-122.4993518</span>,
                  <span style="color:#099">37.7339426</span>
                ],
                [
                  <span style="color:#099">-122.4997605</span>,
                  <span style="color:#099">37.7342142</span>
                ],
                [
                  <span style="color:#099">-122.4997578</span>,
                  <span style="color:#099">37.7343433</span>
                ],
                [
                  <span style="color:#099">-122.5001258</span>,
                  <span style="color:#099">37.7345486</span>
                ],
                [
                  <span style="color:#099">-122.5003425</span>,
                  <span style="color:#099">37.7346621</span>
                ],
                [
                  <span style="color:#099">-122.5005576</span>,
                  <span style="color:#099">37.7347566</span>
                ],
                [
                  <span style="color:#099">-122.5007622</span>,
                  <span style="color:#099">37.7348353</span>
                ],
                [
                  <span style="color:#099">-122.500956</span>,
                  <span style="color:#099">37.7349063</span>
                ],
                [
                  <span style="color:#099">-122.5011438</span>,
                  <span style="color:#099">37.7349706</span>
                ],
                [
                  <span style="color:#099">-122.5011677</span>,
                  <span style="color:#099">37.7349215</span>
                ],
                [
                  <span style="color:#099">-122.5013556</span>,
                  <span style="color:#099">37.7349785</span>
                ],
                [
                  <span style="color:#099">-122.5013329</span>,
                  <span style="color:#099">37.7350294</span>
                ],
                [
                  <span style="color:#099">-122.5015181</span>,
                  <span style="color:#099">37.7350801</span>
                ],
                [
                  <span style="color:#099">-122.5017265</span>,
                  <span style="color:#099">37.7351269</span>
                ],
                [
                  <span style="color:#099">-122.5019229</span>,
                  <span style="color:#099">37.735164</span>
                ],
                [
                  <span style="color:#099">-122.5021252</span>,
                  <span style="color:#099">37.7351953</span>
                ],
                [
                  <span style="color:#099">-122.5023116</span>,
                  <span style="color:#099">37.7352187</span>
                ],
                [
                  <span style="color:#099">-122.50246</span>,
                  <span style="color:#099">37.7352327</span>
                ],
                [
                  <span style="color:#099">-122.5026074</span>,
                  <span style="color:#099">37.7352433</span>
                ],
                [
                  <span style="color:#099">-122.5027534</span>,
                  <span style="color:#099">37.7352501</span>
                ],
                [
                  <span style="color:#099">-122.5029253</span>,
                  <span style="color:#099">37.7352536</span>
                ],
                [
                  <span style="color:#099">-122.5029246</span>,
                  <span style="color:#099">37.735286</span>
                ],
                [
                  <span style="color:#099">-122.5033453</span>,
                  <span style="color:#099">37.7352858</span>
                ],
                [
                  <span style="color:#099">-122.5038376</span>,
                  <span style="color:#099">37.7352855</span>
                ],
                [
                  <span style="color:#099">-122.5038374</span>,
                  <span style="color:#099">37.7352516</span>
                ],
                [
                  <span style="color:#099">-122.5054006</span>,
                  <span style="color:#099">37.7352553</span>
                ],
                [
                  <span style="color:#099">-122.5056182</span>,
                  <span style="color:#099">37.7352867</span>
                ],
                [
                  <span style="color:#099">-122.5061792</span>,
                  <span style="color:#099">37.7352946</span>
                ],
                [
                  <span style="color:#099">-122.5061848</span>,
                  <span style="color:#099">37.7352696</span>
                ],
                [
                  <span style="color:#099">-122.5063093</span>,
                  <span style="color:#099">37.7352671</span>
                ],
                [
                  <span style="color:#099">-122.5063297</span>,
                  <span style="color:#099">37.7352886</span>
                ],
                [
                  <span style="color:#099">-122.5064719</span>,
                  <span style="color:#099">37.7352881</span>
                ],
                [
                  <span style="color:#099">-122.5064722</span>,
                  <span style="color:#099">37.735256</span>
                ],
                [
                  <span style="color:#099">-122.506505</span>,
                  <span style="color:#099">37.7352268</span>
                ],
                [
                  <span style="color:#099">-122.5065452</span>,
                  <span style="color:#099">37.7352287</span>
                ],
                [
                  <span style="color:#099">-122.5065508</span>,
                  <span style="color:#099">37.7351214</span>
                ],
                [
                  <span style="color:#099">-122.5065135</span>,
                  <span style="color:#099">37.7350885</span>
                ],
                [
                  <span style="color:#099">-122.5065011</span>,
                  <span style="color:#099">37.7351479</span>
                ],
                [
                  <span style="color:#099">-122.5062471</span>,
                  <span style="color:#099">37.7351127</span>
                ],
                [
                  <span style="color:#099">-122.5059669</span>,
                  <span style="color:#099">37.7349341</span>
                ],
                [
                  <span style="color:#099">-122.5060092</span>,
                  <span style="color:#099">37.7348205</span>
                ],
                [
                  <span style="color:#099">-122.5060405</span>,
                  <span style="color:#099">37.7347219</span>
                ],
                [
                  <span style="color:#099">-122.5060611</span>,
                  <span style="color:#099">37.734624</span>
                ],
                [
                  <span style="color:#099">-122.5060726</span>,
                  <span style="color:#099">37.7345101</span>
                ],
                [
                  <span style="color:#099">-122.5060758</span>,
                  <span style="color:#099">37.73439</span>
                ],
                [
                  <span style="color:#099">-122.5060658</span>,
                  <span style="color:#099">37.73427</span>
                ],
                [
                  <span style="color:#099">-122.5065549</span>,
                  <span style="color:#099">37.7342676</span>
                ],
                [
                  <span style="color:#099">-122.5067262</span>,
                  <span style="color:#099">37.7340364</span>
                ],
                [
                  <span style="color:#099">-122.506795</span>,
                  <span style="color:#099">37.7340317</span>
                ],
                [
                  <span style="color:#099">-122.5068355</span>,
                  <span style="color:#099">37.733827</span>
                ],
                [
                  <span style="color:#099">-122.5068791</span>,
                  <span style="color:#099">37.7335407</span>
                ],
                [
                  <span style="color:#099">-122.5068869</span>,
                  <span style="color:#099">37.7334106</span>
                ],
                [
                  <span style="color:#099">-122.5068877</span>,
                  <span style="color:#099">37.733281</span>
                ],
                [
                  <span style="color:#099">-122.5068713</span>,
                  <span style="color:#099">37.7329795</span>
                ],
                [
                  <span style="color:#099">-122.5068598</span>,
                  <span style="color:#099">37.7328652</span>
                ],
                [
                  <span style="color:#099">-122.506808</span>,
                  <span style="color:#099">37.7325954</span>
                ],
                [
                  <span style="color:#099">-122.5067837</span>,
                  <span style="color:#099">37.732482</span>
                ],
                [
                  <span style="color:#099">-122.5067561</span>,
                  <span style="color:#099">37.7323727</span>
                ],
                [
                  <span style="color:#099">-122.5066387</span>,
                  <span style="color:#099">37.7319688</span>
                ],
                [
                  <span style="color:#099">-122.5066273</span>,
                  <span style="color:#099">37.731939</span>
                ],
                [
                  <span style="color:#099">-122.5066106</span>,
                  <span style="color:#099">37.7319109</span>
                ],
                [
                  <span style="color:#099">-122.506581</span>,
                  <span style="color:#099">37.7318869</span>
                ],
                [
                  <span style="color:#099">-122.5065404</span>,
                  <span style="color:#099">37.731872</span>
                ],
                [
                  <span style="color:#099">-122.5064982</span>,
                  <span style="color:#099">37.7318679</span>
                ],
                [
                  <span style="color:#099">-122.5064615</span>,
                  <span style="color:#099">37.731878</span>
                ],
                [
                  <span style="color:#099">-122.5064297</span>,
                  <span style="color:#099">37.7318936</span>
                ],
                [
                  <span style="color:#099">-122.5063553</span>,
                  <span style="color:#099">37.7317985</span>
                ],
                [
                  <span style="color:#099">-122.5063872</span>,
                  <span style="color:#099">37.7317679</span>
                ],
                [
                  <span style="color:#099">-122.5064106</span>,
                  <span style="color:#099">37.7317374</span>
                ],
                [
                  <span style="color:#099">-122.5064136</span>,
                  <span style="color:#099">37.7317109</span>
                ],
                [
                  <span style="color:#099">-122.5063998</span>,
                  <span style="color:#099">37.7316828</span>
                ],
                [
                  <span style="color:#099">-122.5063753</span>,
                  <span style="color:#099">37.7316581</span>
                ],
                [
                  <span style="color:#099">-122.5061296</span>,
                  <span style="color:#099">37.7314636</span>
                ],
                [
                  <span style="color:#099">-122.5061417</span>,
                  <span style="color:#099">37.731453</span>
                ],
                [
                  <span style="color:#099">-122.5060145</span>,
                  <span style="color:#099">37.7313791</span>
                ],
                [
                  <span style="color:#099">-122.5057839</span>,
                  <span style="color:#099">37.7312678</span>
                ],
                [
                  <span style="color:#099">-122.5054352</span>,
                  <span style="color:#099">37.7311479</span>
                ],
                [
                  <span style="color:#099">-122.5043701</span>,
                  <span style="color:#099">37.7310447</span>
                ],
                [
                  <span style="color:#099">-122.5042805</span>,
                  <span style="color:#099">37.7310343</span>
                ],
                [
                  <span style="color:#099">-122.5041861</span>,
                  <span style="color:#099">37.7310189</span>
                ],
                [
                  <span style="color:#099">-122.5041155</span>,
                  <span style="color:#099">37.7310037</span>
                ],
                [
                  <span style="color:#099">-122.5036126</span>,
                  <span style="color:#099">37.7308562</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;San Francisco Zoo&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:zoo&#34;</span>,
              <span style="color:#000080">&#34;loc_type&#34;</span>: <span style="color:#d14">&#34;Zoo&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Flamingo Park&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.5033039</span>,
                  <span style="color:#099">37.7334601</span>
                ],
                [
                  <span style="color:#099">-122.5032811</span>,
                  <span style="color:#099">37.7334601</span>
                ],
                [
                  <span style="color:#099">-122.503261</span>,
                  <span style="color:#099">37.7334601</span>
                ],
                [
                  <span style="color:#099">-122.5032208</span>,
                  <span style="color:#099">37.7334495</span>
                ],
                [
                  <span style="color:#099">-122.5031846</span>,
                  <span style="color:#099">37.7334357</span>
                ],
                [
                  <span style="color:#099">-122.5031806</span>,
                  <span style="color:#099">37.7334718</span>
                ],
                [
                  <span style="color:#099">-122.5031685</span>,
                  <span style="color:#099">37.7334962</span>
                ],
                [
                  <span style="color:#099">-122.5031336</span>,
                  <span style="color:#099">37.7335078</span>
                ],
                [
                  <span style="color:#099">-122.503128</span>,
                  <span style="color:#099">37.7335189</span>
                ],
                [
                  <span style="color:#099">-122.5031222</span>,
                  <span style="color:#099">37.7335205</span>
                ],
                [
                  <span style="color:#099">-122.5030954</span>,
                  <span style="color:#099">37.7335269</span>
                ],
                [
                  <span style="color:#099">-122.5030692</span>,
                  <span style="color:#099">37.7335444</span>
                ],
                [
                  <span style="color:#099">-122.5030699</span>,
                  <span style="color:#099">37.7335677</span>
                ],
                [
                  <span style="color:#099">-122.5030813</span>,
                  <span style="color:#099">37.7335868</span>
                ],
                [
                  <span style="color:#099">-122.5031034</span>,
                  <span style="color:#099">37.7335948</span>
                ],
                [
                  <span style="color:#099">-122.5031511</span>,
                  <span style="color:#099">37.73359</span>
                ],
                [
                  <span style="color:#099">-122.5031933</span>,
                  <span style="color:#099">37.7335916</span>
                ],
                [
                  <span style="color:#099">-122.5032228</span>,
                  <span style="color:#099">37.7336022</span>
                ],
                [
                  <span style="color:#099">-122.5032697</span>,
                  <span style="color:#099">37.7335937</span>
                ],
                [
                  <span style="color:#099">-122.5033194</span>,
                  <span style="color:#099">37.7335874</span>
                ],
                [
                  <span style="color:#099">-122.5033515</span>,
                  <span style="color:#099">37.7335693</span>
                ],
                [
                  <span style="color:#099">-122.5033723</span>,
                  <span style="color:#099">37.7335518</span>
                ],
                [
                  <span style="color:#099">-122.503369</span>,
                  <span style="color:#099">37.7335068</span>
                ],
                [
                  <span style="color:#099">-122.5033603</span>,
                  <span style="color:#099">37.7334702</span>
                ],
                [
                  <span style="color:#099">-122.5033462</span>,
                  <span style="color:#099">37.7334474</span>
                ],
                [
                  <span style="color:#099">-122.5033073</span>,
                  <span style="color:#099">37.733449</span>
                ],
                [
                  <span style="color:#099">-122.5033039</span>,
                  <span style="color:#099">37.7334601</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;San Francisco Zoo&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:zoo&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Peace Lantern&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Point&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              <span style="color:#099">-122.4705776</span>,
              <span style="color:#099">37.7701084</span>
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;Golden Gate Park&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:attraction&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Buddha&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Point&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              <span style="color:#099">-122.469942</span>,
              <span style="color:#099">37.7703183</span>
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;Golden Gate Park&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:attraction&#34;</span>
            }
          ]
        },
        {
          <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;Japanese Tea Garden&#34;</span>,
          <span style="color:#000080">&#34;location&#34;</span>: {
            <span style="color:#000080">&#34;type&#34;</span>: <span style="color:#d14">&#34;Polygon&#34;</span>,
            <span style="color:#000080">&#34;coordinates&#34;</span>: [
              [
                [
                  <span style="color:#099">-122.4692131</span>,
                  <span style="color:#099">37.7705116</span>
                ],
                [
                  <span style="color:#099">-122.4698998</span>,
                  <span style="color:#099">37.7710069</span>
                ],
                [
                  <span style="color:#099">-122.4702431</span>,
                  <span style="color:#099">37.7710137</span>
                ],
                [
                  <span style="color:#099">-122.4707248</span>,
                  <span style="color:#099">37.7708919</span>
                ],
                [
                  <span style="color:#099">-122.4708911</span>,
                  <span style="color:#099">37.7701541</span>
                ],
                [
                  <span style="color:#099">-122.4708428</span>,
                  <span style="color:#099">37.7700354</span>
                ],
                [
                  <span style="color:#099">-122.4703492</span>,
                  <span style="color:#099">37.7695011</span>
                ],
                [
                  <span style="color:#099">-122.4699255</span>,
                  <span style="color:#099">37.7693989</span>
                ],
                [
                  <span style="color:#099">-122.4692131</span>,
                  <span style="color:#099">37.7705116</span>
                ]
              ]
            ]
          },
          <span style="color:#000080">&#34;street&#34;</span>: <span style="color:#d14">&#34;Golden Gate Park&#34;</span>,
          <span style="color:#000080">&#34;has_type&#34;</span>: [
            {
              <span style="color:#000080">&#34;uid&#34;</span>: <span style="color:#d14">&#34;_:attraction&#34;</span>
            }
          ]
        }
      ]
    }
  ]
}
</code></pre></div><p><em>Note: If this mutation syntax is new to you, refer to the <a href="https://blog.dgraph.io/post/tutorial-1-getting-started/">first tutorial</a> to learn the basics of mutations in Dgraph.</em></p>
<p>Run the query below to fetch the entire graph:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql">{<span style="color:#bbb">
</span><span style="color:#bbb">  </span>entire_graph(func:<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">has</span>(city))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span><span style="color:#bbb">    </span>city<span style="color:#bbb">
</span><span style="color:#bbb">    </span>has_location<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span><span style="color:#bbb">    </span>name<span style="color:#bbb">
</span><span style="color:#bbb">    </span>has_type<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span><span style="color:#bbb">      </span>loc_type<span style="color:#bbb">
</span><span style="color:#bbb">      </span>}<span style="color:#bbb">
</span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></code></pre></div><p><em>Note: Check the <a href="https://blog.dgraph.io/post/tutorial-2-getting-started/">second tutorial</a> if you want to learn more about traversal queries like the above one.</em></p>
<p>Here&rsquo;s our graph!
<img src="https://blog.dgraph.io/images/tutorials/8/d-full-graph.png" alt="full graph"></p>
<p>Our graph has:</p>
<ul>
<li>One blue <code>city node</code>.
We just have one node which represents the city of <code>San Francisco</code>.</li>
<li>The green ones are the the <code>location</code> nodes.
We have a total of 13 locations.</li>
<li>The pink nodes represent the <code>location types</code>.
We have four kinds of locations in our dataset: <code>museum</code>, <code>zoo</code>, <code>hotel</code>, and <code>tourist attractions</code>.</li>
</ul>
<p>You can also see that Dgraph has auto-detected the data types of the predicates from the schema tab, and the location predicate has been auto-assigned <code>geo</code> type.</p>
<p><img src="https://blog.dgraph.io/images/tutorials/8/e-schema.png" alt="type detection">
<em>Note: Check out the <a href="https://blog.dgraph.io/post/tutorial-3-getting-started/">previous tutorial</a> to know more about data types in Dgraph.</em></p>
<p>Before we start, please say Hello to <code>Mary</code>, a zoologist who has dedicated her research for the cause of conserving various bird species.</p>
<p>For the rest of the tutorial, let&rsquo;s help Mary and her team of zoologists in their mission to conserving birds.</p>
<h4 id="enter-san-francisco-hotel-booking">Enter San Francisco: Hotel booking</h4>
<p>Several research projects done by Mary suggested that Flamingos thrive better when there are abundant water bodies for their habitat.</p>
<p>Her team got approval for expanding the water source for the Flamingos in the San Francisco Zoo, and her team is ready for a trip to San Francisco with Mary remotely monitoring the progress of the team.</p>
<p>Her teammates wish to stay close to the <code>Golden Gate Bridge</code> so that they could cycle around the Golden gate, enjoy the breeze, and the sunrise every morning.</p>
<p>Let&rsquo;s help them find a hotel which is within a reasonable distance from the <code>Golden Gate Bridge</code>, and we&rsquo;ll do so using Dgraph&rsquo;s geolocation functions.</p>
<p>Dgraph provides a variety of functions to query geolocation data.
To use them, you have to set the <code>geo</code> index first.</p>
<p>Go to the Schema tab and set the index on the <code>location</code> predicate.</p>
<p><img src="https://blog.dgraph.io/images/tutorials/8/f-index.png" alt="geo-index"></p>
<p>After setting the <code>geo</code> index on the <code>location</code> predicate, you can use Dgraph&rsquo;s built-in function <code>near</code> to find the hotels near the Golden gate bridge.</p>
<p>Here is the syntax of the <code>near</code> function: <code>near(geo-predicate, [long, lat], distance)</code>.</p>
<p>The <a href="https://docs.dgraph.io/query-language/#near"><code>near</code> function</a> matches and returns all the geo-predicates stored in the database which are within <code>distance meters</code> of geojson coordinate <code>[long, lat]</code> provided by the user.</p>
<p>Let&rsquo;s search for hotels within 7KM of from a point on the Golden Gate bridge.</p>
<p>Go to the query tab, paste the query below and click Run.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql">{<span style="color:#bbb">
</span><span style="color:#bbb">  </span>find_hotel(func:<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">near</span>(location,<span style="color:#bbb"> </span>[<span style="color:#a61717;background-color:#e3d2d2">-</span>122<span style="color:#099">.479784</span>,37<span style="color:#099">.82883295</span>],7000)<span style="color:#bbb"> </span>)<span style="color:#bbb">  </span>{<span style="color:#bbb">
</span><span style="color:#bbb">    </span>name<span style="color:#bbb">
</span><span style="color:#bbb">    </span>has_type<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span><span style="color:#bbb">      </span>loc_type<span style="color:#bbb">
</span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></code></pre></div><p><img src="https://blog.dgraph.io/images/tutorials/8/g-near-1.png" alt="geo-index">
Wait! The search returns not just the hotels, but also all other locations within 7 Km from the point coordinate on the <code>Golden Gate Bridge</code>.</p>
<p>Let&rsquo;s use the <code>@filter</code> function to filter for search results containing only the hotels.
You can visit our <a href="https://blog.dgraph.io/post/tutorial-3-getting-started/">third tutorial</a> of the series to refresh our previous discussions around using the <code>@filter</code> directive.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql">{<span style="color:#bbb">
</span><span style="color:#bbb">  </span>find_hotel(func:<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">near</span>(location,<span style="color:#bbb"> </span>[<span style="color:#a61717;background-color:#e3d2d2">-</span>122<span style="color:#099">.479784</span>,37<span style="color:#099">.82883295</span>],7000))<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span><span style="color:#bbb">    </span>name<span style="color:#bbb">
</span><span style="color:#bbb">    </span>has_type<span style="color:#bbb"> </span><span style="color:#3c5d5d;font-weight:bold">@filter</span>(eq(loc_type,<span style="color:#bbb"> </span><span style="color:#d14">&#34;hotel&#34;</span>)){<span style="color:#bbb">
</span><span style="color:#bbb">      </span>loc_type<span style="color:#bbb">
</span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></code></pre></div><p>Oops, we forgot to add an index while using the <code>eq</code> comparator in the filter.</p>
<p><img src="https://blog.dgraph.io/images/tutorials/8/h-near-2.png" alt="geo-index"></p>
<p>Let&rsquo;s add a <code>hash</code> index to the <code>loc_type</code> and re-run the query.
<img src="https://blog.dgraph.io/images/tutorials/8/i-near-3.png" alt="geo-index">
<img src="https://blog.dgraph.io/images/tutorials/8/j-near-4.png" alt="geo-index"></p>
<p><em>Note: Refer to the <a href="https://blog.dgraph.io/post/tutorial-3-getting-started/">third tutorial</a> of the series to learn more about hash index and comparator functions in Dgraph.</em></p>
<p>The search result still contains nodes representing locations which are not hotels. That&rsquo;s because the root query first finds all the location nodes which are within 7KM from the specified point location, and then it applies the filter while selectively traversing to the <code>location type nodes</code>.</p>
<p>Only the predicates in the location nodes can be filtered at the root level, and you cannot filter the <code>location types</code> without traversing to the <code>location type nodes</code>.</p>
<p>We have the filter to select only the <code>hotels</code> while we traverse the <code>location type nodes</code>.
Can we cascade or bubble up the filter to the root level, so that, we only have <code>hotels</code> in the final result?</p>
<p>Yes you can! You can do by using the <code>@cascade</code> directive.
The <code>@cascade</code> directive helps you <code>cascade</code> or <code>bubble up</code> the filters applied to your inner query traversals to the root level nodes, by doing so, we get only the locations of <code>hotels</code> in our result.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql">{<span style="color:#bbb">
</span><span style="color:#bbb">  </span>find_hotel(func:<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">near</span>(location,<span style="color:#bbb"> </span>[<span style="color:#a61717;background-color:#e3d2d2">-</span>122<span style="color:#099">.479784</span>,37<span style="color:#099">.82883295</span>],7000))<span style="color:#bbb"> </span><span style="color:#3c5d5d;font-weight:bold">@cascade</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span><span style="color:#bbb">   </span>name<span style="color:#bbb">
</span><span style="color:#bbb">   </span>price_per_night<span style="color:#bbb">
</span><span style="color:#bbb">   </span>has_type<span style="color:#bbb"> </span><span style="color:#3c5d5d;font-weight:bold">@filter</span>(eq(loc_type,<span style="color:#d14">&#34;Hotel&#34;</span>)){<span style="color:#bbb">
</span><span style="color:#bbb">     </span>loc_type<span style="color:#bbb">
</span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></code></pre></div><p><img src="https://blog.dgraph.io/images/tutorials/8/k-near-5.png" alt="geo-index"></p>
<p>Voila! You can see in the result that, after adding the <code>@cascade</code> directive in the query, only the locations with type <code>hotel</code> appear in the result.</p>
<p>We have two hotels in the result, and one of them is over their budget of 300$ per night.
Let&rsquo;s add another filter to search for Hotels priced below $300 per night.</p>
<p>The price information of every hotel is stored in the <code>location nodes</code> along with their coordinates, hence the filter on the pricing should be at the root level of the query, not at the level we traverse the location type nodes.</p>
<p>Before you jump onto run the query, don&rsquo;t forget to add an index on the <code>price_per_night</code> predicate.</p>
<p><img src="https://blog.dgraph.io/images/tutorials/8/l-float-index.png" alt="geo-index"></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-graphql" data-lang="graphql">{<span style="color:#bbb">
</span><span style="color:#bbb">  </span>find_hotel(func:<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">near</span>(location,<span style="color:#bbb"> </span>[<span style="color:#a61717;background-color:#e3d2d2">-</span>122<span style="color:#099">.479784</span>,37<span style="color:#099">.82883295</span>],7000))<span style="color:#bbb"> </span><span style="color:#3c5d5d;font-weight:bold">@cascade</span><span style="color:#bbb"> </span><span style="color:#3c5d5d;font-weight:bold">@filter</span>(le(price_per_night,<span style="color:#bbb"> </span>300)){<span style="color:#bbb">
</span><span style="color:#bbb">    </span>name<span style="color:#bbb">
</span><span style="color:#bbb">    </span>price_per_night<span style="color:#bbb">
</span><span style="color:#bbb">    </span>has_type<span style="color:#bbb"> </span><span style="color:#3c5d5d;font-weight:bold">@filter</span>(eq(loc_type,<span style="color:#d14">&#34;Hotel&#34;</span>)){<span style="color:#bbb">
</span><span style="color:#bbb">      </span>loc_type<span style="color:#bbb">
</span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span><span style="color:#bbb">
</span></code></pre></div><p><img src="https://blog.dgraph.io/images/tutorials/8/m-final-result.png" alt="geo-index"></p>
<p>Now we have a hotel well within the budget, and also close to the Golden Gate Bridge!</p>
<h4 id="summary">Summary</h4>
<p>In this tutorial, we learned about geolocation capabilities in Dgraph, and helped Mary&rsquo;s team book a hotel near Golden bridge.</p>
<p>In the next episode, we&rsquo;ll showcase more geolocation functionalities in Dgraph and assist Mary&rsquo;s team in their quest for conserving Flamingo&rsquo;s.</p>
<p>See you all in the next episode.
Till then, happy Graphing!</p>
<p>Remember to click the &ldquo;Join our community&rdquo; button below and subscribe to our newsletter to get the latest tutorial right into your inbox.</p>
<script src="//unpkg.com/clipboard@2.0.4"></script>
<script src="https://blog.dgraph.io/js/tutorial-3.js"></script>
<style>
 pre.with-expand {
 position: relative;
 max-height: 300px;
 overflow: hidden;
 }

 pre.with-expand .expander {
 color: #ccc;
 cursor: pointer;
 padding: 32px 0 2px;
 position: absolute;
 text-align: center;
 bottom: 0;
 left: 0;
 right: 0;
 background: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.75));
 }

 pre.with-expand.expanded {
 max-height: unset;
 }
 pre.with-expand.expanded .expander {
 display: none;
 }

 .copy-btn {
 background: #fff;
 border: 1px solid #666;
 border-radius: 2px;
 cursor: pointer;
 display: block;
 padding: 2px 6px;
 position: absolute;
 top: 4px;
 right: 4px;
 }
</style>


                        
    <aside class="post__authors">
                <div class="tile author-tile">

    <img src="https://blog.dgraph.io/images/people/karthic.png" class="author-tile__photo">

    <h4 class="author-tile__title">
        <a href="https://blog.dgraph.io/authors/karthic/">Karthic Rao</a>,
        Author
    </h4>

    <p>Karthic is a Developer Advocate who strives to create value across multiple
areas at Dgraph. He has experience working with a wide range of startups in
different domains across the globe. Prior to Dgraph, Caddy Server and Minio are
the major Go open source projects he has contributed significantly to. He is an
avid blogger, speaker, and musician. When not at work you could find him
reading, at the gym, meditating, practicing music, or on motorcycle trips.</p>


    
        <nav class="author-tile__social">

            
                <a href="https://www.linkedin.com/in/hackintoshrao/" target="_blank">
                    <i class="fab fa-linkedin"></i>
                </a>
            

            
                <a href="https://twitter.com/hackintoshrao" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
            

            
                <a href="https://github.com/hackintoshrao" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
            

        </nav>
    

</div>

            
        

    </aside>



                        <div class="post__comments">

    <div id="discourse-comments"></div>

    
    <script type="text/javascript">
        DiscourseEmbed = {
            discourseUrl: "https:\/\/discuss.dgraph.io\/",
            topicId:  5984 
            };
        (function() {
            var d = document.createElement("script");
            d.type = "text/javascript";
            d.async = true;
            d.src = DiscourseEmbed.discourseUrl + "javascripts/embed.js";
            (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(d);
        })();
    </script>
    <noscript>Please enable JavaScript to view the comments on <a href="https://discuss.dgraph.io/">discuss</a>.</noscript>
    

</div>


                        <div class="modal fade" id="runnable-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <a href="#" data-dismiss="modal" class="modal-close-btn">
    Close
  </a>

  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">

      </div>
    </div>
  </div>
</div>
                    </div>

                    
                    <div class=" bg-gray xs-pt-60 xs-pb-60 round text-center md-pl-80 md-pr-80 own-success-story xs-mb-80 md-ml-80 md-mr-80">
                        <p>Create you own success story.</p>
                        <h2 class="font-medium">Interpret, store, distribute and execute GraphQL with the best.</h2>
                        <div class="xs-mt-50 d-flex align-items-center justify-content-center flex-column flex-md-row">
                            <a href="https://dgraph.io/downloads" class="button button--primary mr-0 mr-md-3"><span>Get Started</span> <i class="fas fa-arrow-right"></i></a>
                            <a class="button  button--outline" target="_blank" href="https://github.com/dgraph-io/dgraph"><span>View<span> on Github</span></span><i class="fas fa-arrow-right"></i></a>
                        </div>

                    </div>
                    <div class="  text-center subscribe-box">
    

    <h3>Get blog post to <br/>your inbox</h3>
    

<div id="mc_embed_signup">
<form action="https://dgraph.us17.list-manage.com/subscribe/post?u=f6c6a28bb40d10e26b88fff1c&amp;id=e85c448cac" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	
<div class="mc-field-group">
	
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="your Email">
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_f6c6a28bb40d10e26b88fff1c_e85c448cac" tabindex="-1" value=""></div>
    <div class="clear"><button type="submit"  name="subscribe" id="mc-embedded-subscribe" class="button button--secondary mt-2"><span>Subscribe</span><i class="fas fa-arrow-right"></i></button></div>
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<div class="d-flex align-items-center justify-content-center mt-4">
    <a href="https://github.com/dgraph-io/dgraph" target="_blank" ><i class="fa fa-github px-3"></i></a>
    <a href="https://slack.dgraph.io/" target="_blank"  ><i class="fa fa-slack px-3"></i></a>
    <a href="https://discuss.dgraph.io/" target="_blank"  ><i class="fa fa-comments px-3"></i></a>
</div>
<div class="close position-absolute d-block d-lg-none"><i class="fa fa-close"></i></div>

</div>

<div class="subscribe-box-mobi">
    <div class="d-flex align-items-center justify-content-center  flex-column">
        <a href="https://github.com/dgraph-io/dgraph" target="_blank" ><i class="fa fa-github py-3"></i></a>
        <a href="https://slack.dgraph.io/" target="_blank"  ><i class="fa fa-slack py-3"></i></a>
        <a href="https://discuss.dgraph.io/" target="_blank"  ><i class="fa fa-comments py-3"></i></a>
        <div class="click-btn"><i class="fa fa-envelope-o py-3"></i></div>

    </div>

</div>




            </div>


                    
                </div>
            </div>
           


        </div>
        </div>
    </section>
    <div class='bottom-section'>
        <div class="container">
            <div class="page-body__related-content mb-4">

                




<h3 class=" font-22 pb-4">But wait, theres more...</h3>

<div class=" row justify-content-center mt-4">


    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/graphql/cover-1.png">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Sun, Apr 12, 2020
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/designing-graphql-schemas/">Designing GraphQL schemas</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/karthic/">Karthic Rao</a>
        
    

</div>



    	</div>

    </div>
    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/tutorials/7/cover.jpg">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Fri, Jan 17, 2020
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/tutorial-7-getting-started/">Getting started with Dgraph tutorials series - 7: Give your users powerful search results with fuzzy search on graph</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/karthic/">Karthic Rao</a>
        
    

</div>



    	</div>

    </div>
    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/the-first-step.jpg">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Wed, Jan 8, 2020
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/introducing-getting-started-series/">Whats Next? Learn Dgraph with the Getting-Started Blog Series</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/prashant/">Prashant Shahi</a>
        
    

</div>



    	</div>

    </div>
    

</div>




                
<div class="post__tags">

    <h3>Tags</h3>

    <div>

        
            
            
                <a href="https://blog.dgraph.io/tags/tutorial/">tutorial</a>
            
        
            
            
                <a href="https://blog.dgraph.io/tags/devrel/">devrel</a>
            
        

    </div>

</div>




            </div>
        </div>
        <footer class="page-footer">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Products</h3>
            <ul>
              <li><a href="https://dgraph.io/graphql">GraphQL</a></li>
              <li><a href="https://dgraph.io/enterprise">Enterprise</a></li>
              <li><a href="https://dgraph.io/downloads">Downloads</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Learn</h3>
            <ul>
              <li><a href="https://dgraph.io/blog" target="_blank">Blog</a></li>
              <li><a href="https://tour.dgraph.io" target="_blank">Interactive Tour</a></li>
              <li><a href="https://discuss.dgraph.io" target="_blank">Forum</a></li>
              <li><a href="https://slack.dgraph.io" target="_blank">Slack</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Docs</h3>
            <ul>
              <li><a href="https://docs.dgraph.io" target="_blank">Dgraph Docs</a></li>
              <li><a href="https://graphql.dgraph.io/docs/" target="_blank">GraphQL Docs</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Company</h3>
            <ul>
              <li><a href="https://dgraph.io/about">Team</a></li>
              <li><a href="https://dgraph.io/careers">Careers</a></li>
              <li><a href="https://dgraph.io/contact">Contact</a></li>
              <li><a href="https://dgraph.io/conduct">Conduct</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 offset-lg-1 border-above-sm">
        <div class="page-footer__cta"><a href="https://dgraph.io/downloads" title="Download" class="button button--secondary"><span>Download</span><i class="fas fa-arrow-right"></i></a></div>
        <div class="page-footer__address">
          <p>
            655 Montgomery Street, 7th Floor<br>
            San Francisco, CA 94111
          </p>
          <hr>
          <p><a href="mailto:contact@dgraph.io">contact@dgraph.io</a></p>
        </div>
      </div>
    </div>
    <div class="page-footer__social">
      <ul>
        <li><a href="https://twitter.com/dgraphlabs" target="_blank"><i class="fab fa-twitter"></i></a></li>
        <li><a href="https://github.com/dgraph-io/dgraph" target="_blank"><i class="fab fa-github"></i></a></li>
        <li><a href="https://www.youtube.com/channel/UCghE41LR8nkKFlR3IFTRO4w" target="_blank"><i class="fab fa-youtube"></i></a></li>
        <li><a href="https://slack.dgraph.io" target="_blank"><i class="fab fa-slack"></i></a></li>
        <li><a href="https://www.linkedin.com/company/dgraph-labs" target="_blank"><i class="fab fa-linkedin"></i></a></li>
      </ul>
    </div>
    <div class="page-footer__copyright">
      <p>
        <Copyright>&copy; 2017-2020 Dgraph Labs, Inc.</Copyright>
      </p>
    </div>
  </div>
</footer>

    <script src="https://blog.dgraph.io//js/clipboard.min.js"></script>
    <script
      src='https://blog.dgraph.io//js/runnable.js?29f8ba4fb8d90804cf24ff53b70192ad'
    ></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>




<script>
  window.Countly = window.Countly || {};
  Countly.q = Countly.q || [];

  Countly.q.push(['track_sessions']);
  Countly.q.push(['track_pageview']);
  (function() {
  	var cly = document.createElement('script');
  	cly.type = 'text/javascript';
  	cly.async = true;
  	cly.src = "https://dgraph.io/assets/js/unminified/stats/dgraph-stats.min.js";
  	cly.onload = function() {
      Countly.init({
        app_key: "e93284ab5e5d21ef9eb16a94516b3c1c6eba1015",
        url: "https://stats.dgraph.io",
        force_post: true,
      })
  	};
  	document.body.appendChild(cly);
  })();
</script>


<script>
$(document.links)
  .filter(function() {
    return this.hostname != window.location.hostname;
  })
  .attr("target", "_blank");
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/visibility.js/1.2.4/visibility.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/heart.css?24a50879951b2391f04750723b4a012e'
  rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/github-engage.css?d60d80bf2b6a24350cdb5d834ab47e27'
  rel="stylesheet">

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js"
  integrity="sha256-7/yoZS3548fXSRXqc/xYzjsmuW3sFKzuvOCHd06Pmps="
  crossorigin="anonymous"
></script>
<script
  type="text/javascript"
  src='https://blog.dgraph.io//js/custom.js?94f0c667422b8dac293e14c9c49872e3'
></script>

<script src="//unpkg.com/@dgraph-io/community"></script>



    </div>



</body>

    <script src="https://blog.dgraph.io/js/footnotes.js"></script>

</html>
