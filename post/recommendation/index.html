<!DOCTYPE html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1">
  <link rel="canonical" href="https://blog.dgraph.io/post/recommendation/" />


  <link rel="apple-touch-icon" sizes="57x57" href="https://dgraph.io/assets/images/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://dgraph.io/assets/images/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://dgraph.io/assets/images/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://dgraph.io/assets/images/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://dgraph.io/assets/images/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://dgraph.io/assets/images/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://dgraph.io/assets/images/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://dgraph.io/assets/images/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://dgraph.io/assets/images/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"
    href="https://dgraph.io/assets/images/favicons/android-icon-192x192.png">
  <link rel="manifest" href="https://dgraph.io/assets/images/favicons/manifest.json">
  <link rel="icon" type="image/png" sizes="32x32" href="https://dgraph.io/assets/images/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://dgraph.io/assets/images/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://dgraph.io/assets/images/faviconsfavicon-16x16.png">
  <link rel="shortcut icon" href="https://dgraph.io/assets/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://dgraph.io/assets/images/faviconsms-icon-144x144.png">
  <meta name="msapplication-config" content="https://dgraph.io/assets/favicons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.dgraph.io//index.xml">
  
  <title>Build a Realtime Recommendation Engine: Part 1 - Dgraph Blog</title>
  <meta property='og:title' content="Build a Realtime Recommendation Engine: Part 1 - Dgraph Blog">
  <meta property="og:type" content="article">
  

  <meta property="og:url" content="https://blog.dgraph.io/post/recommendation/">
  
  
  <meta property="og:image" content="https://blog.dgraph.io//images/falcon.png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
    integrity="sha256-0rguYS0qgS6L4qVzANq4kjxPLtvnp5nn2nB5G1lWRv4=" crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css" rel="stylesheet"
    integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"
    integrity="sha256-sNPiigbfSkqUzMc5rgrdztLnneCMAp6W9wetJUZu9Zw=" crossorigin="anonymous"></script>
  <link
    href='https://blog.dgraph.io//css/runnable.css?7bbf71b4888bc97241e85bc7326a12fe'
    rel="stylesheet" />
  
  <link
    href='https://blog.dgraph.io//css/runnable-custom.css?74110b504a7b8a6e92a95279cfa96032'
    rel="stylesheet" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500&display=swap" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />

  <link href="https://dgraph.io/assets/css/style.min.css?06062020-1" rel="stylesheet" type="text/css" />

  <link href="https://dgraph.io/assets/css/font-awesome/css/all.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:ital@1&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">


  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js"
    integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css"
    integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js"
    integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js"
    integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin="anonymous"></script>
  

  <script src="https://cdn.jsdelivr.net/npm/algoliasearch@3/dist/algoliasearch.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.0.0/dist/instantsearch.production.min.js"
    integrity="sha256-6S7q0JJs/Kx4kb/fv0oMjS855QTz5Rc2hh9AkIUjUsk=" crossorigin="anonymous"></script>
  <script src="https://blog.dgraph.io//js/search.js?04292020"></script>
  <script>


    $(".subscribe-box").hide();
    $(window).scroll(function () {
      if ($(window).scrollTop() > 400) {
        $(".subscribe-box").fadeIn("fast");
      }
      else {
        $(".subscribe-box").fadeOut("fast");
      }
    });
   
    
    
    $(window).scroll(function () {
      if ($(window).scrollTop() > 180) {
        $("#page-header").addClass("bg-white");
      }
      else {
        $("#page-header").removeClass("bg-white");
      }
    });
   

    $(document).scroll(function () {
      checkOffset();
    });
    

   
    function checkOffset() {
      var x = $(".container").offset();
        var leftPosition = x.left + 75;
      if ($('.subscribe-box').offset().top + $('.subscribe-box').height()
        >= $('.bottom-section').offset().top - 10){
        $('.subscribe-box').addClass('footer-before');
        $('.footer-before').css('left',  -leftPosition  );
        }
      if ($(document).scrollTop() + window.innerHeight < $('.bottom-section').offset().top){
        $('.subscribe-box').removeClass('footer-before');
        $('.subscribe-box').css('left',  '30px' );
      }
         
    }
    $(document).ready(function () {
      
      
      $( ".page-search" ).wrapInner( "<div class='wrapper'></div>")
      $('.wrapper').after($('.page-search__results'))

      
      
      
      
      
      
      
      
      $('.nav-icon').click(function() {
  	    $('.page-nav').toggleClass('shownav');
  	    $(this).toggleClass('active');
    });
  var $nav = document.querySelector('.page-nav > ul');
	var $navItems = document.querySelectorAll('.page-nav > ul > li');
	var $navItemHeading = document.querySelectorAll('.page-nav > ul > li > div');
  var $subnav = document.querySelectorAll('.page-nav > ul > li > ul');
  $($navItemHeading).click(function(e) {
	    $($navItems).removeClass('active');
	    $(this).parent().toggleClass('active');
	});
  $('.nav-icon[target="_blank"]').removeAttr('target');
  
    });
  </script>

  
  
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://blog.dgraph.io//images/falcon.png" />
  
  

  <meta name="twitter:title" content="Build a Realtime Recommendation Engine: Part 1" />
  <meta name="twitter:description"
    content="Preface In today&rsquo;s world, user experience is paramount. It&rsquo;s no longer about basic CRUD, just serving user data; it&rsquo;s about mining the data to generate interesting predictions and suggesting actions to the user." />
  
  <meta name="twitter:site" content="@dgraphlabs" />

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-666192333"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'AW-666192333');</script>
</head>
<body class="blog-single has-lightning" data-gr-c-s-loaded="true">
   <header id="page-header" class="page-header">
	<div class="page-logo">
		<a href="https://dgraph.io/">
			<img src="https://dgraph.io/assets/images/logo.svg">
		</a>
		<a href="javascript:;" class="nav-icon" >
			<div class="hamburger">
				<div class="line line-1"></div>
				<div class="line line-2"></div>
				<div class="line line-3"></div>
			</div>
		</a>
	</div>
	<nav class="page-nav">
    <ul>
        <li>
            <div data-label="Products">
                <span>Products</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/graphql" data-label="GraphQL">
                        <span>GraphQL</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/enterprise" data-label="Enterprise">
                        <span>Enterprise</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/downloads" data-label="Downloads">
                        <span>Downloads</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/badger" data-label="Badger">
                        <span>Badger</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/compare-features" data-label="Compare Features">
                        <span>Compare Features</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Learn" class="is-active">
                <span>Learn</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/blog" data-label="Blog">
                        <span>Blog</span>
                    </a>
                </li>
                <li>
                    <a href="https://tour.dgraph.io" target="_blank" data-label="Interactive Tour">
                        <span>Interactive Tour</span>
                    </a>
                </li>
                <li>
                    <a href="https://discuss.dgraph.io" target="_blank" data-label="Forum">
                        <span>Forum</span>
                    </a>
                </li>
                <li>
                    <a href="https://slack.dgraph.io" target="_blank" data-label="Slack">
                        <span>Slack</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/paper" target="_blank" data-label="Paper">
                        <span>Paper</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Docs"><span>Docs</span></div>
            <ul>
                <li>
                    <a href="https://docs.dgraph.io" target="_blank" data-label="Dgraph Docs">
                        <span>Dgraph Docs</span>
                    </a>
                </li>
                <li>
                    <a href="https://graphql.dgraph.io/docs/" target="_blank" data-label="GraphQL Docs">
                        <span>GraphQL Docs</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Company"><span>Company</span></div>
            <ul>
                <li>
                    <a href="https://dgraph.io/about" data-label="Team">
                        <span>Team</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/careers" data-label="Careers">
                        <span>Careers</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/contact" data-label="Contact">
                        <span>Contact</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/conduct" data-label="Conduct">
                        <span>Conduct</span>
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</nav>

	<div class="page-cta">
    <ul>
        <li class="hide-tablet">
            <a href="https://dgraph.io/contact" title="Contact">Contact</a>
        </li>
        <li>
            <a href="https://dgraph.io/downloads" title="Download" class="button button--secondary">
                <span>Download</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        </li>
    </ul>
</div>

</header>


   <section class="page-body">
      <div class="page-body__content">
         <div class="container">
            <div class="row justify-content-center">
               <div class="col-xl-10  col-lg-11">
                  <div class="page-search form-group has-search">
	<span class="fas fa-search form-control-feedback"></span>
	
</div>
               </div>
            </div>
         </div>
      </div>
      <div class="container">
         <div class="row justify-content-center">
            <div class="col-xl-10 col-lg-11">
               <div class="">
                  <div class="post__meta">
                     <div class="post__date">

    
        Thu, Jun 29, 2017
    
    
</div>

                     <div class="post__share">
                        
                        <a href="https://twitter.com/share?text=Build%20a%20Realtime%20Recommendation%20Engine%3a%20Part%201&amp;url=https%3a%2f%2fblog.dgraph.io%2fpost%2frecommendation%2f&amp;via=dgraphlabs"
                           target="_blank">
                        <i class="fab fa-twitter"></i>
                        </a>
                        
                     </div>
                  </div>
                  <div class="post__cover">
                     <img
                        src="https://blog.dgraph.io//images/falcon.png">
                     <div class="post__header">
                        <h1 class="post__title">
                           Build a Realtime Recommendation Engine: Part 1
                        </h1>
                        
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/ashwin/">Ashwin Ramesh</a>
        
    

</div>


                     </div>
                  </div>
                  <div
                     class="post__content inner-content lg-pl-80 lg-pr-80 md-pl-30 md-pr-30  clearfix">
                     

<h2 id="preface">Preface</h2>

<p>In today&rsquo;s world, user experience is paramount. It&rsquo;s no longer about basic CRUD, just serving user
data; it&rsquo;s about mining the data to generate interesting predictions and suggesting actions to the
user.</p>

<p>That&rsquo;s the field of recommendations. They&rsquo;re everywhere. In fact, they happen so frequently that you
don&rsquo;t even realize them.</p>

<p><em>You wake up and open Facebook,</em> which shows you a feed of articles that it
has chosen for you based on your viewing history.</p>

<p><em>Want to buy something?</em> Amazon would recommend
you things to purchase based on what you&rsquo;ve viewed in the recent past.</p>

<p><em>Want to relax and unwind with a movie?</em> Netflix would recommend you what to watch based on your
interests.</p>

<p><em>No time to watch a full movie?</em> YouTube would recommend you smaller chunk videos.</p>

<p><em>Want to listen to music instead?</em> Spotify would generate a weekly discovery list of songs just for
you.</p>

<p>All this makes you wonder: <strong>Should recommendations be part of your application?</strong> While competing
against Netflix might be hard, in this two-part series, we&rsquo;ll explain the basics of a recommendation
engine. We&rsquo;ll show how you can build recommendations via two approaches: Content-based filtering and
Collaborative filtering. And, how you can use Dgraph to bring recommendations to your app without breaking a
sweat.</p>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<p>For this, we&rsquo;ll make use of Dgraph&rsquo;s query variables. To learn more about variables, head over to
<a href="https://tour.dgraph.io/blocksvars/1/">Dgraph tour</a> &mdash; <em>if you are new to Dgraph variables, you
really should check them out first before diving in here.</em></p>

<p>Let&rsquo;s first check out how recommendation systems work, and then we&rsquo;ll look at the support Dgraph queries offer.  We&rsquo;ll use two sample datasets.  One about movies and ratings (<a href="https://grouplens.org/datasets/movielens/100k/">Movielens</a>) and the other is part of <a href="https://archive.org/download/stackexchange/lifehacks.stackexchange.com.7z">Stack Exchange&rsquo;s data archive</a> &mdash; we&rsquo;ll just use the Lifehacks dataset here, but watch out for a coming series of posts where we show how to load all of Stack Overflow into Dgraph and run the entire website completely off Dgraph.</p>

<h2 id="recommendation-systems">Recommendation Systems</h2>

<p>Making Recommendations is a subtle art.  There are a number of approaches and a production worthy recommendation system might depend on data, weighting of various features, global user behaviour and maybe recent behaviour of the user we are recommending for.</p>

<p>Rather than just inventing recommendation queries, let&rsquo;s start somewhere more grounded.  For this post, we started with the Stanford University MOOC <a href="https://lagunita.stanford.edu/courses/course-v1:ComputerScience+MMDS+SelfPaced/about">Minning Massive Datasets</a>.  Part of the course is on recommender systems.  We&rsquo;ll show how the theory in the <em>&ldquo;Recommendation Systems&rdquo;</em> chapter of the <a href="http://www.mmds.org">text</a> can be translated into practice using Dgraph. We&rsquo;ll also talk about other approaches and how to run one at scale.</p>

<h3 id="making-recommendations">Making Recommendations</h3>

<p>Making recommendations is about taking past benaviour and preferences and trying to predict a preference for some unknown.  For example, later in the post, we&rsquo;ll talk about movie recommendations.  For this, we know what a user has watched and how they rated movies; how then can we predict what unwatched movies they&rsquo;ll enjoy.</p>

<p>As briefly mentioned before, broadly speaking, there are two basic approaches:</p>

<ol>
<li><p><strong>Content-based:</strong> Such systems base a recommendation on the properties of an item. Two items that have similar properties are deemed similar; the more properties shared, the more similar. For example, if a user likes movies with certain actors or directors, we can
recommend other movies involving the same people.</p></li>

<li><p><strong>Collaborative filtering:</strong> Such systems base recommendations on the relationship between users and items, and similarity to other users. Users are similar if they have relationships to items in common; the more items in common, the more similar.  For example, if many similar users enjoyed a particular movie, that might be a good one to recommend.</p></li>
</ol>

<p>There are also classification algorithms based on machine learning.  We&rsquo;ll focus here on how far we can get with Dgraph queries alone.  Machine learning or other algorithms could also be run over the Dgraph output.</p>

<h3 id="interpreting-the-data-for-recommendations">Interpreting the Data for Recommendations</h3>

<p>Our Stanford reference text represents data as a sparse matrix.  So for our movie data set, we might think of the user&rsquo;s ratings of movies as:</p>

<table>
<thead>
<tr>
<th>User</th>
<th>The Matrix</th>
<th>Toy Story</th>
<th>Jurassic Park</th>
<th>Forrest Gump</th>
<th>Braveheart</th>
</tr>
</thead>

<tbody>
<tr>
<td>A</td>
<td>5</td>
<td>4</td>
<td>4</td>
<td></td>
<td></td>
</tr>

<tr>
<td>B</td>
<td></td>
<td>3</td>
<td>4</td>
<td></td>
<td>1</td>
</tr>

<tr>
<td>C</td>
<td>1</td>
<td></td>
<td></td>
<td>2</td>
<td>5</td>
</tr>
</tbody>
</table>

<p>The movies also have other properties such as genres, not shown here.  We&rsquo;ve stored it all as a graph, which in itself is a nice way to store a sparse matrix.</p>

<p>The matrix (that&rsquo;s the matrix above, not <em>&ldquo;<a href="https://en.wikipedia.org/wiki/The_Matrix">The Matrix</a>&ldquo;</em>) is missing values because users haven&rsquo;t seen all movies &mdash; in fact, for the real dataset it&rsquo;s much sparser because users have each only rated a tiny percentage of the movies.</p>

<p>The challenge of recommendation is to predict values for the missing ratings.  Will user A enjoy Braveheart because it&rsquo;s an action movie and thus similar to movies they enjoyed? (content based filtering)</p>

<p>But maybe they won&rsquo;t enjoy it because they might have something in common with user B who seems to share similar ratings (collaborative filtering).</p>

<p>Maybe user A just gives high ratings and isn&rsquo;t very discriminating &mdash; sometimes benaviour rather than rating can be a better predictor. We&rsquo;ll need to combine a number of approaches.</p>

<p>The theory boils down to finding functions that serve as measures of similarity or distance.  For example, in content-based filtering, the function would take two movies and output a score (the distance or similarity).  If we start with a movie and apply the function repeatedly to it and all other movies, we can find the most similar movies.</p>

<p>We&rsquo;ll look at some distance measures below as we apply them in queries, but for any of them we&rsquo;ll need to propagate values through our query, so let&rsquo;s look at how that works in Dgraph and then try out some recommendation queries.</p>

<h2 id="variable-propagation">Variable Propagation</h2>

<p>A Dgraph <a href="https://docs.dgraph.io/query-language/#value-variables">value variable</a> is a mapping from graph nodes to values that have been computed for the nodes during the query.  Value variables can be passed around the query, aggregated etc.  Value variables also sum over paths as we move deeper into a query tree.</p>

<p>Within a query tree, a value variable defined at one level, propagates such that in a nested level, the variable is the sum of all paths from the definition.</p>

<p>We call this <strong>variable propagation.</strong>  Note that the queries in this post we built for our master branch for the upcoming v0.8 release.</p>

<p>Say you had a query:</p>

<pre><code>{
  var(func: uid(&lt;...P...&gt;)) {
    myscore as math(1)          # A
    friends {                   # B
      friends {                 # C
        fscore as math(myscore)
      }
    }
  }

  closeFriends(func: uid(fscore), orderdesc: val(fscore)) {
    name
    val(score)
  }
}
</code></pre>

<p>At line A, nodes are assigned a score of <code>1</code> (which in this case we&rsquo;ll assume is the single node <code>P</code>).
Traversing the <code>friend</code> edge twice reaches the friends of friends.  The variable <code>myscore</code> gets
propagated, such that the value inside the block marked C is the sum of values from all paths from A to C.</p>

<p>Here&rsquo;s how that propagation looks in a graph.</p>

<p><img src="https://blog.dgraph.io/images/vartransform.png" alt="Variable propagation" /></p>

<p><strong>In short, the value that a node receives is equal to the sum of values of all its parent nodes.</strong>
This propagation is useful when we want to normalize a sum across users, find the number of paths
between some nodes or accumulate a sum as we move through the graph.</p>

<h2 id="movielens">Movielens</h2>

<p>Let&rsquo;s start with the <a href="https://grouplens.org/datasets/movielens/100k/">ML-100k</a> dataset of
100,000 ratings from 1000 users on 1700 movies. We converted the dataset to RDF (the dataset and
script can be found at
<a href="https://github.com/dgraph-io/benchmarks/tree/master/movielens/conv100k">github</a>) and loaded it into
Dgraph.</p>

<p>It&rsquo;s about users and movies and user&rsquo;s ratings of movies.  So a user (a node in the graph) has a name and a gender and a <code>rated</code> edge to a movie.  The <code>rated</code> edge has a facet <code>rating</code> that tells us the users numeric 0&ndash;5 rating of the movie.</p>

<p><img src="https://blog.dgraph.io/images/movilensschema.png" alt="Movielens schema" /></p>

<h2 id="content-based-filtering">Content-based filtering</h2>

<p>Content-based filtering ranks items as similar or not based on their properties.  There are a number of measures we could use.  Our reference text from Stanford talks about <strong>Jaccard</strong> and <strong>Cosine</strong> distances.</p>

<h3 id="jaccard-distance">Jaccard Distance</h3>

<p>Let&rsquo;s try some measure functions based on Jaccard distance.  For two sets A and B the Jaccard distance is given by</p>

<p>$$1-\frac{|A\cap B|}{| A\cup B |}$$</p>

<p>That&rsquo;s the ratio of the size of the set intersection to the size of the union.  So if items have many properties in common (compared to how many properties each has) then the items are similar.  For our movie example, let&rsquo;s take $A$ and $B$ as the genre sets for each movie.  We can then express our difference function as:</p>

<p>$$d(M_1, M_2) = 1-\frac{|M_1.\mathcal{genres} \cap M_2.\mathcal{genres}|}{| M_1.\mathcal{genres}\cup M_2.\mathcal{genres} |}$$</p>

<p>The closer the result is to 0, the closer the movies &mdash; if the number of genres in common is more, the second term is close to 1, if movies have few genres in common, the second term is closer to 0.</p>

<p>For movie a $M_1$, we picked &ldquo;The Shawshank Redemption&rdquo; with unique ID <code>0x30d80</code>, and translated Jaccard distance to this query.</p>

<pre><code>{
  # Count the genres for every movie that has been rated
  var(func: has(~rated)) {
    M2_num_genres as count(genre)
  }


  # Calculate a Jaccard distance score for every movie that shares
  # at least 1 genre with the given movie.
  var(func: uid(0x30d80)) {    # M1
    norm as math(1)               # 1
    M1_num_genres as count(genre) # 2
    M1genres as genre {           # 3
      ~genre {
        # M2 -- movies reached here share a genre with the initial movie
        # normalize the count to account for multiple paths
        M1_num_genres_norm as math(M1_num_genres / norm)      # 4
        num_genres as count(genre @filter(uid(M1genres))) # 5
        distance as math( 1 - ( num_genres / (M1_num_genres_norm + M2_num_genres - num_genres) )) # 6
      }
    }
  }

  # Sort and return closest movies.
  similarMovies(func: uid(distance), orderasc: val(distance), first: 10) { # 7
    name
    val(distance)
  }
}
</code></pre>

<p>The query works as follows.</p>

<ol>
<li>We are going to need to normalize some results, so begin by setting <code>norm</code> to 1.</li>
<li>Count the number of genres for movie $M_1$.</li>
<li>Follow <code>genre</code> paths to find all movies $M_2$ that share a genre with $M_1$.</li>
<li>We may have reached this $M_2$ via multiple genre paths and the count of genres set at <code># 2</code> would have accumulated for each path, so normalize back to the original count.</li>
<li>Find the number of intersecting genres.</li>
<li>Apply the Jaccard distance formula &mdash; <code>distance</code> is thus a map for each $M_2$ to the Jaccard distance between $M_1$ and $M_2$.</li>
<li>Filter out the movies that were closest (had lowest distance)</li>
</ol>

<p>Here&rsquo;s the results we got for &ldquo;The Shawshank Redemption&rdquo;</p>

<pre><code>{
    &quot;similarMovies&quot;: [
        {
            &quot;name&quot;: &quot;Miracle on 34th Street (1994)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Postman, The (1997)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Mat' i syn (1997)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Winter Guest, The (1997)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Chamber, The (1996)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Shanghai Triad (Yao a yao yao dao waipo qiao) (1995)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Picnic (1955)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Nell (1994)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Dead Man Walking (1995)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Blue Angel, The (Blaue Engel, Der) (1930)&quot;,
            &quot;var(distance)&quot;: 0.0
        }
    ]
}
</code></pre>

<p>Ouch, there&rsquo;s a bunch of movies with distance 0.  That means all those movies share exactly the same genre set with &ldquo;The Shawshank Redemption&rdquo;, so we can&rsquo;t discriminate between them.  Let&rsquo;s test another movie.  With &ldquo;Toy Story&rdquo; we get.</p>

<pre><code>{
    &quot;similarMovies&quot;: [
        {
            &quot;name&quot;: &quot;Aladdin and the King of Thieves (1996)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Toy Story (1995)&quot;,
            &quot;var(distance)&quot;: 0.0
        },
        {
            &quot;name&quot;: &quot;Aladdin (1992)&quot;,
            &quot;var(distance)&quot;: 0.25
        },
        {
            &quot;name&quot;: &quot;Goofy Movie, A (1995)&quot;,
            &quot;var(distance)&quot;: 0.25
        },
        {
            &quot;name&quot;: &quot;Flintstones, The (1994)&quot;,
            &quot;var(distance)&quot;: 0.333333
        }
    ]
}
</code></pre>

<p>That&rsquo;s better.  At least similar movies have similar genres. But still, the Jaccard distance function isn&rsquo;t good enough because it can&rsquo;t discriminate a difference between many movies.  Our reference text suggests the same distance function but for data that also has actors and directors, which we don&rsquo;t.</p>

<p>As it stands, the Jaccard distance might not be so appropriate because the only items we have to compare are the genres, since the Jaccard distance doesn&rsquo;t take into account the magnitude of the ratings.  So let&rsquo;s play around with it and see how some variations come out.</p>

<h3 id="jaccard-distance-variation">Jaccard Distance Variation</h3>

<p>The size of the intersection of the genres seems a reasonable start, but how to bring the magnitude of the ratings into it?  If we are to use the ratings, then the average rating might be appropriate.  Let&rsquo;s try the number of genres in common plus an average rating.  Given a movie $M_1$ we&rsquo;ll find the similarity to all other movies $M_2$ as</p>

<p>$$d(M_1, M_2) = |M_1.\mathcal{genres}\cap M_2.\mathcal{genres}| + M_2.\overline{\mathcal{rating}}$$</p>

<p>Here&rsquo;s the Dgraph query for movie $M_1$ having unique ID <code>0x30d72</code>, that&rsquo;s &ldquo;Star Wars&rdquo;.</p>

<pre><code>{
  # M1 -- Star Wars by its unique ID
  var(func: uid(0x30d72)) {
    g as genre
  }

  # Calculate the average rating for every movie
  var(func: has(rated)) {
    allmovies as rated @facets(a as rating) {
      c as count(~rated)
      avg as math(a / c)
    }
  }

  # Give every movie a score
  var(func: uid(allmovies)) {
    x as count(genre @filter(uid(g)))
    score as math(avg + x)
  }

  # Return the top 10 movies
  fin(func: uid(score), orderdesc: val(score), first: 10) {
    name
    val(score)
  }
}
</code></pre>

<p><strong>In terms of variable propagation, the important part is the calculation of average rating.</strong>  If an edge has a facet and we assign the facet to a variable, we calculate the average. Then for each node reached by the block the variable is the sum of the facets of all such edges reaching the node.</p>

<p><img src="https://blog.dgraph.io/images/facetsumming.png" alt="Facet summing" /></p>

<p>Running the query we get the following results.</p>

<pre><code>{
    &quot;fin&quot;: [
        {
            &quot;name&quot;: &quot;Star Wars (1977)&quot;,
            &quot;var(score)&quot;: 9.358491
        },
        {
            &quot;name&quot;: &quot;Empire Strikes Back, The (1980)&quot;,
            &quot;var(score)&quot;: 9.20436
        },
        {
            &quot;name&quot;: &quot;Return of the Jedi (1983)&quot;,
            &quot;var(score)&quot;: 9.00789
        },
        {
            &quot;name&quot;: &quot;African Queen, The (1951)&quot;,
            &quot;var(score)&quot;: 8.184211
        },
        {
            &quot;name&quot;: &quot;Starship Troopers (1997)&quot;,
            &quot;var(score)&quot;: 7.232227
        },
        {
            &quot;name&quot;: &quot;Princess Bride, The (1987)&quot;,
            &quot;var(score)&quot;: 7.17284
        },
        {
            &quot;name&quot;: &quot;Star Kid (1997)&quot;,
            &quot;var(score)&quot;: 7.0
        },
        {
            &quot;name&quot;: &quot;Aliens (1986)&quot;,
            &quot;var(score)&quot;: 6.947183
        },
        {
            &quot;name&quot;: &quot;Star Trek: The Wrath of Khan (1982)&quot;,
            &quot;var(score)&quot;: 6.815574
        },
        {
            &quot;name&quot;: &quot;Men in Black (1997)&quot;,
            &quot;var(score)&quot;: 6.745875
        }
    ]
}
</code></pre>

<p><em>Note that we didn&rsquo;t filter out &ldquo;Star Wars&rdquo; and thankfully it came back as the first result.</em>  Looks like a pretty good distance function, especially given the top three results, but it&rsquo;s probably biased.  &ldquo;Star Wars&rdquo; is highly rated on average, and so we got back other highly rated movies with intersecting genres.  If we searched for a movie that wasn&rsquo;t highly rated on average, the measure would still prefer highly rated movies with intersecting genres.</p>

<p>That might be fine.  If a user likes certain genres, then maybe highly rated movie in those genres are good recommendations. Maybe it&rsquo;s better to normalize the result so that two movies come out as more similar if they have genres in common and similar average ratings.  That&rsquo;s what cosine distance does.</p>

<h3 id="cosine-distance">Cosine Distance</h3>

<p>Cosine distance treats our movies as vectors in an n-dimensional space.  The similarity of the movies is then a measure of the difference in angle between the vectors.  The smaller the angle between two vectors, the more similar the movies.  For our movie example, we can express that as follows.</p>

<p>If we treat our movies as vectors</p>

<p>$$x_1 &hellip; x_n$$ and $$y_1 &hellip; y_n$$</p>

<p>the cosine difference between them is computed by calculating the vector dot product divided by the multiple of the distances from the origin.</p>

<p><img src="https://blog.dgraph.io/images/cosine_diff.png" alt="cosine difference" /></p>

<!--
what's wrong with this???
$$\frac{\sum_{i=1}^n{x_iy_i}}{\sqrt{\sum_{i=1}^n{x_i^2}}\cdot \sqrt{\sum_{i=1}^n{y_i^2}}}$$
If I paste it into http://www.hostmath.com/ I get what I want
-->

<p>In our case the $x$&rsquo;s up to $x_{n-1}$ will represent the genres, with 1 for genre present and 0 for not present.  While the last term is the average rating.  So for our movie example we can express the cosine difference as.</p>

<p><img src="https://blog.dgraph.io/images/cosine_diff_movies.png" alt="cosine difference" /></p>

<!-- d(M_1,M_2) = \frac{|M_1.\mathcal{genres}\cap M_2.\mathcal{genres}| + M_1.\overline{\mathcal{rating}} \cdot M_2.\overline{\mathcal{rating}}}{\sqrt{|M_1.\mathcal{genres}| + {M_1.\overline{\mathcal{rating}}}^2}\cdot \sqrt{|M_2.\mathcal{genres}| + {M_2.\overline{\mathcal{rating}}}^2}} -->

<p>That factors in both the intersecting genres as well as the similarity of the average ratings.</p>

<p>As a single Dgraph query, that looks like this.</p>

<pre><code>{
  # Calculate the average rating of every movie
  var(func: has(rated)) {
    rated @facets(r as rating) {
      c as count(~rated)
      M2_avg_rating as math(r / c)
      M2_num_gen as count(genre)
    }
  }

  # Calculate a cosine difference score for every movie that shares
  # at least 1 genre with M1
  var(func: uid(0x30d80)) {    # movie M1
    norm as math(1)     # 1

    # Find the average rating for M1
    M1_num_ratings as count(~rated)
    ~rated @facets(B as rating)
    M1_ratings_sum as sum(val(B))
    M1_avg_rating as math(M1_ratings_sum / M1_num_ratings) # 2
    M1_num_gen as count(genre)                             # 3

    M1_genres as genre {
      ~genre { # 4
        # M2 -- movies reached here share a genre with the initial movie

        # normalize the M1 count and average to account for multiple paths
        M1_norm_avg as math(M1_avg_rating / norm)
        num_genN as math(M1_num_gen/norm)              # 5
        genint as count(genre @filter(uid(M1_genres))) # 6

        score as math((genint + (M1_norm_avg * M2_avg_rating)) /
          (sqrt(num_genN + (M1_norm_avg*M1_norm_avg)) *
          sqrt(M2_num_gen + (M2_avg_rating*M2_avg_rating))))    # 7

      }
    }
  }

  similarMovies(func: uid(score), first:20, orderdesc: val(score)) { # 8
    name
    val(score)
  }
}
</code></pre>

<p>The query works as follows.</p>

<ol>
<li>We are going to need to normalize some results, so begin by setting <code>norm</code> to 1.</li>
<li>Find the average rating for movie $M_1$.</li>
<li>Count the genres for $M_1$.</li>
<li>Follow <code>genre</code> paths to find all movies $M_2$ that share a genre with $M_1$.</li>
<li>We may have reached this $M_2$ via multiple genre paths and the values from <code># 2</code> and <code># 3</code> would have accumulated for each path, so normalize back to the originals.</li>
<li>Find the number of intersecting genres.</li>
<li>Apply the cosine distance formula &mdash; <code>score</code> is thus a map for each $M_2$ to the cosine distance between $M_1$ and $M_2$.</li>
<li>Filter out the movies that were closest (had cosine closer to 1, and thus lowest angle)</li>
</ol>

<p>We searched again for the &ldquo;The Shawshank Redemption&rdquo; and got these results.</p>

<pre><code>{
    &quot;similarMovies&quot;: [
        {
            &quot;name&quot;: &quot;Shawshank Redemption, The (1994)&quot;,
            &quot;var(score)&quot;: 1.0
        },
        {
            &quot;name&quot;: &quot;Anna (1996)&quot;,
            &quot;var(score)&quot;: 0.999997
        },
        {
            &quot;name&quot;: &quot;Some Mother's Son (1996)&quot;,
            &quot;var(score)&quot;: 0.999997
        },
        {
            &quot;name&quot;: &quot;12 Angry Men (1957)&quot;,
            &quot;var(score)&quot;: 0.999988
        },
        {
            &quot;name&quot;: &quot;Bitter Sugar (Azucar Amargo) (1996)&quot;,
            &quot;var(score)&quot;: 0.999985
        },
        {
            &quot;name&quot;: &quot;Citizen Kane (1941)&quot;,
            &quot;var(score)&quot;: 0.999971
        },
        {
            &quot;name&quot;: &quot;To Kill a Mockingbird (1962)&quot;,
            &quot;var(score)&quot;: 0.999971
        },
        {
            &quot;name&quot;: &quot;One Flew Over the Cuckoo's Nest (1975)&quot;,
            &quot;var(score)&quot;: 0.999971
        },
        {
            &quot;name&quot;: &quot;Pather Panchali (1955)&quot;,
            &quot;var(score)&quot;: 0.999965
        },
        {
            &quot;name&quot;: &quot;Good Will Hunting (1997)&quot;,
            &quot;var(score)&quot;: 0.999958
        }
    ]
}
</code></pre>

<p>We didn&rsquo;t filter out &ldquo;The Shawshank Redemption&rdquo; and thus it comes back as the top result &mdash; it has an angle of 0 with itself.  Following that the query returns the results that cosine difference calculates as most similar.</p>

<p><em>With that, we conclude this post.</em> In this post, we showcased Jaccard distance, a variation of Jaccard, and finally Cosine
distance. That&rsquo;s three content-based filtering distance metrics and queries for them in Dgraph.  The variables and math function in Dgraph allow us to encode the metrics directly in the query.</p>

<p>In the next post, we&rsquo;ll take a look at collaborative filtering.  We&rsquo;ll also look at making recommendations for Stack Overflow and how to build a scalable recommendation engine for big graphs.</p>



<aside class="post__references">

    <h4>References</h4><p>Top image: <a href="http://www.spacex.com/media-gallery/detail/149441/9516">FALCON 9 FIRST STAGE LANDING</a></p>
</aside>


                     





                     
    <aside class="post__authors">
                <div class="tile author-tile">

    <img src="https://blog.dgraph.io/images/people/ashwin.jpg" class="author-tile__photo">

    <h4 class="author-tile__title">
        <a href="https://blog.dgraph.io/authors/ashwin/">Ashwin Ramesh</a>,
        Author
    </h4>

    <p>Ashwin did his undergrad in computer science at IIT Madras and likes working on
distributed systems. He likes working out, hiking, swimming and everything
adventurous. Loves travelling to new places and trying out new food.</p>


    
        <nav class="author-tile__social">

            
                <a href="https://www.linkedin.com/in/ashwin95r/" target="_blank">
                    <i class="fab fa-linkedin"></i>
                </a>
            

            
                <a href="https://twitter.com/ashwin_rrr" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
            

            
                <a href="https://github.com/ashwin95r" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
            

        </nav>
    

</div>

            
        
                <div class="tile author-tile">

    <img src="https://blog.dgraph.io/images/people/michael.jpg" class="author-tile__photo">

    <h4 class="author-tile__title">
        <a href="https://blog.dgraph.io/authors/michael/">Michael Compton</a>,
        Editor
    </h4>

    <p>Michael did undergrad computer science at ANU in Canberra and a Ph.D. at
Cambridge in the U.K.  He&rsquo;s worked for a number of years with graph databases.
He likes sport and hanging out with his family.</p>


    

</div>

            
        

    </aside>


                  </div>
               </div>
            </div>
         </div>
      </div>
      </div>
   </section>
   <div class='bottom-section'>
      <div class="container">
         <div class="post__content inner-content lg-pl-80 lg-pr-80 md-pl-30 md-pr-30  clearfix">
            <div class="post__comments">

    <div id="discourse-comments"></div>

    
    <script type="text/javascript">
        DiscourseEmbed = {
            discourseUrl: "https:\/\/discuss.dgraph.io\/",
            topicId:  1703 
            };
        (function() {
            var d = document.createElement("script");
            d.type = "text/javascript";
            d.async = true;
            d.src = DiscourseEmbed.discourseUrl + "javascripts/embed.js";
            (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(d);
        })();
    </script>
    <noscript>Please enable JavaScript to view the comments on <a href="https://discuss.dgraph.io/">discuss</a>.</noscript>
    

</div>

            <div class="modal fade" id="runnable-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <a href="#" data-dismiss="modal" class="modal-close-btn">
    Close
  </a>

  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">

      </div>
    </div>
  </div>
</div>
        </div>
         <div class="d-flex flex-column flex-sm-row">
            <div class="mx-auto xs-mt-80 sm-mb-80 d-block d-xl-none" style="max-width:860px">
               <h3 class="d-block d-sm-none text-center">Get blog post to your inbox</h3>
               
<div class=" mobi-subscribe-box container">
    
    <div class="d-flex flex-column flex-sm-row align-items-center justify-content-cnete mobi-wrap">
        <div class="d-flex align-items-center justify-content-center share-btn">
            <div class="wrap"><a href="https://github.com/dgraph-io/dgraph" target="_blank" class="pr-3"><i class="fa fa-github  "></i></a></div>
            <div class="wrap"><a href="https://slack.dgraph.io/" target="_blank" class="pr-3"><i class="fa fa-slack "></i></a></div>
            <div class="wrap"><a href="https://discuss.dgraph.io/" target="_blank" class="pr-3"><i class="fa fa-comments  "></i></a></div>
        </div>
    </div>
</div>
            </div>
            <div class="  text-center subscribe-box">
    

    <h3>Get blog post to your inbox</h3>
    

<div id="mc_embed_signup">
<form action="https://dgraph.us17.list-manage.com/subscribe/post?u=f6c6a28bb40d10e26b88fff1c&amp;id=e85c448cac" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	
<div class="mc-field-group">
	
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="your Email">
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_f6c6a28bb40d10e26b88fff1c_e85c448cac" tabindex="-1" value=""></div>
    <div class="clear"><button type="submit"  name="subscribe" id="mc-embedded-subscribe" class="button button--secondary mt-2"><span>Subscribe</span><i class="fas fa-arrow-right"></i></button></div>
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<div class="d-flex align-items-center justify-content-center mt-4">
    <a href="https://github.com/dgraph-io/dgraph" target="_blank" ><i class="fa fa-github px-3"></i></a>
    <a href="https://slack.dgraph.io/" target="_blank"  ><i class="fa fa-slack px-3"></i></a>
    <a href="https://discuss.dgraph.io/" target="_blank"  ><i class="fa fa-comments px-3"></i></a>
</div>
<div class="close position-absolute d-block d-lg-none"><i class="fa fa-close"></i></div>

</div>



         </div>
        <div class="mx-auto" style="max-width:860px">

         <div
            class=" bg-gray xs-pt-60 xs-pb-60 round text-center md-pl-80 md-pr-80   own-success-story xs-mb-80  xs-mt-80 lg-ml-80 lg-mr-80 md-ml-30 md-mr-30 xs-ml-15 xs-mr-15 " >
            <p>Create you own success story.</p>
            <h2 class="font-medium">Interpret, store, distribute and execute GraphQL with the best.</h2>
            <div class="xs-mt-50 d-flex align-items-center justify-content-center flex-column flex-md-row">
               <a href="https://dgraph.io/downloads" class="button button--primary mr-0 mr-md-3"><span>Get
               Started</span> <i class="fas fa-arrow-right"></i></a>
               <a class="button  button--outline mt-3 mt-md-0" target="_blank"
                  href="https://github.com/dgraph-io/dgraph"><span>View<span> on Github</span></span><i
                  class="fas fa-arrow-right"></i></a>
            </div>
        </div>

         </div>
         <div class="page-body__related-content mb-4 container">
            




<h3 class=" font-22 pb-4">But wait, thereâ€™s more...</h3>

<div class=" row justify-flex-start mt-4">


    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/falconlanded.jpg">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Fri, Jun 30, 2017
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/recommendation2/">Build a Realtime Recommendation Engine: Part 2</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/ashwin/">Ashwin Ramesh</a>
        
    

</div>



    	</div>

    </div>
    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/rover-cmux.jpg">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Tue, Oct 4, 2016
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/cmux/">Golang: Run multiple services on one port</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/ashwin/">Ashwin Ramesh</a>
        
    

</div>



    	</div>

    </div>
    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/lander.jpg">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Tue, Jun 21, 2016
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/performance-throughput-latency/">Can it really scale?</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/ashwin/">Ashwin Ramesh</a>
        
    

</div>



    	</div>

    </div>
    

</div>



            
         </div>
      </div>
      <footer class="page-footer">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Products</h3>
            <ul>
              <li><a href="https://dgraph.io/graphql">GraphQL</a></li>
              <li><a href="https://dgraph.io/enterprise">Enterprise</a></li>
              <li><a href="https://dgraph.io/downloads">Downloads</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Learn</h3>
            <ul>
              <li><a href="https://dgraph.io/blog" target="_blank">Blog</a></li>
              <li><a href="https://tour.dgraph.io" target="_blank">Interactive Tour</a></li>
              <li><a href="https://discuss.dgraph.io" target="_blank">Forum</a></li>
              <li><a href="https://slack.dgraph.io" target="_blank">Slack</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Docs</h3>
            <ul>
              <li><a href="https://docs.dgraph.io" target="_blank">Dgraph Docs</a></li>
              <li><a href="https://graphql.dgraph.io/docs/" target="_blank">GraphQL Docs</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Company</h3>
            <ul>
              <li><a href="https://dgraph.io/about">Team</a></li>
              <li><a href="https://dgraph.io/careers">Careers</a></li>
              <li><a href="https://dgraph.io/contact">Contact</a></li>
              <li><a href="https://dgraph.io/conduct">Conduct</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 offset-lg-1 border-above-sm">
        <div class="page-footer__cta"><a href="https://dgraph.io/downloads" title="Download" class="button button--secondary"><span>Download</span><i class="fas fa-arrow-right"></i></a></div>
        <div class="page-footer__address">
          <p>
            655 Montgomery Street, 7th Floor<br>
            San Francisco, CA 94111
          </p>
          <hr>
          <p><a href="mailto:contact@dgraph.io">contact@dgraph.io</a></p>
        </div>
      </div>
    </div>
    <div class="page-footer__social">
      <ul>
        <li><a href="https://twitter.com/dgraphlabs" target="_blank"><i class="fab fa-twitter"></i></a></li>
        <li><a href="https://github.com/dgraph-io/dgraph" target="_blank"><i class="fab fa-github"></i></a></li>
        <li><a href="https://www.youtube.com/channel/UCghE41LR8nkKFlR3IFTRO4w" target="_blank"><i class="fab fa-youtube"></i></a></li>
        <li><a href="https://slack.dgraph.io" target="_blank"><i class="fab fa-slack"></i></a></li>
        <li><a href="https://www.linkedin.com/company/dgraph-labs" target="_blank"><i class="fab fa-linkedin"></i></a></li>
      </ul>
    </div>
    <div class="page-footer__copyright">
      <p>
        <Copyright>&copy; 2017-2020 Dgraph Labs, Inc.</Copyright>
      </p>
    </div>
  </div>
</footer>

    <script src="https://blog.dgraph.io//js/clipboard.min.js"></script>
    <script
      src='https://blog.dgraph.io//js/runnable.js?29f8ba4fb8d90804cf24ff53b70192ad'
    ></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>




<script>
  window.Countly = window.Countly || {};
  Countly.q = Countly.q || [];

  Countly.q.push(['track_sessions']);
  Countly.q.push(['track_pageview']);
  (function() {
  	var cly = document.createElement('script');
  	cly.type = 'text/javascript';
  	cly.async = true;
  	cly.src = "https://dgraph.io/assets/js/unminified/stats/dgraph-stats.min.js";
  	cly.onload = function() {
      Countly.init({
        app_key: "e93284ab5e5d21ef9eb16a94516b3c1c6eba1015",
        url: "https://stats.dgraph.io",
        force_post: true,
      })
  	};
  	document.body.appendChild(cly);
  })();
</script>


<script>
$(document.links)
  .filter(function() {
    return this.hostname != window.location.hostname;
  })
  .attr("target", "_blank");
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/visibility.js/1.2.4/visibility.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/heart.css?24a50879951b2391f04750723b4a012e'
  rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/github-engage.css?d60d80bf2b6a24350cdb5d834ab47e27'
  rel="stylesheet">

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js"
  integrity="sha256-7/yoZS3548fXSRXqc/xYzjsmuW3sFKzuvOCHd06Pmps="
  crossorigin="anonymous"
></script>
<script
  type="text/javascript"
  src='https://blog.dgraph.io//js/custom.js?94f0c667422b8dac293e14c9c49872e3'
></script>

<script src="//unpkg.com/@dgraph-io/community"></script>

   </div>
</body>
    <script src="https://blog.dgraph.io/js/footnotes.js"></script>

</html>
