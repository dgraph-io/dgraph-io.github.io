<!DOCTYPE html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, minimum-scale=1">
  <link rel="canonical" href="https://blog.dgraph.io/post/badger-over-rocksdb-in-dgraph/" />


  <link rel="apple-touch-icon" sizes="57x57" href="https://dgraph.io/assets/images/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://dgraph.io/assets/images/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://dgraph.io/assets/images/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://dgraph.io/assets/images/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://dgraph.io/assets/images/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://dgraph.io/assets/images/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://dgraph.io/assets/images/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://dgraph.io/assets/images/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://dgraph.io/assets/images/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"
    href="https://dgraph.io/assets/images/favicons/android-icon-192x192.png">
  <link rel="manifest" href="https://dgraph.io/assets/images/favicons/manifest.json">
  <link rel="icon" type="image/png" sizes="32x32" href="https://dgraph.io/assets/images/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="https://dgraph.io/assets/images/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://dgraph.io/assets/images/faviconsfavicon-16x16.png">
  <link rel="shortcut icon" href="https://dgraph.io/assets/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="https://dgraph.io/assets/images/faviconsms-icon-144x144.png">
  <meta name="msapplication-config" content="https://dgraph.io/assets/favicons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.dgraph.io//index.xml">
  
  <title>Why we choose Badger over RocksDB in Dgraph - Dgraph Blog</title>
  <meta property='og:title' content="Why we choose Badger over RocksDB in Dgraph - Dgraph Blog">
  <meta property="og:type" content="article">
  

  <meta property="og:url" content="https://blog.dgraph.io/post/badger-over-rocksdb-in-dgraph/">
  
  
  <meta property="og:image" content="https://blog.dgraph.io//images/keymaker.png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
    integrity="sha256-0rguYS0qgS6L4qVzANq4kjxPLtvnp5nn2nB5G1lWRv4=" crossorigin="anonymous"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/default.min.css" rel="stylesheet"
    integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"
    integrity="sha256-sNPiigbfSkqUzMc5rgrdztLnneCMAp6W9wetJUZu9Zw=" crossorigin="anonymous"></script>
  <link
    href='https://blog.dgraph.io//css/runnable.css?7bbf71b4888bc97241e85bc7326a12fe'
    rel="stylesheet" />
  
  <link
    href='https://blog.dgraph.io//css/runnable-custom.css?74110b504a7b8a6e92a95279cfa96032'
    rel="stylesheet" />

  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500&display=swap" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />

  <link href="https://dgraph.io/assets/css/style.min.css?06052020-1" rel="stylesheet" type="text/css" />

  <link href="https://dgraph.io/assets/css/font-awesome/css/all.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:ital@1&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&display=swap" rel="stylesheet">


  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.js"
    integrity="sha256-x3BtPVERvw1ozPlwivuFLZoViFCeAAs1Gt6SxEedmo8=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/codemirror.css"
    integrity="sha256-7sZe9dsqyNZC9Mk+WPRB7nVvPPPXyorzm2QKqlgXC4k=" crossorigin="anonymous" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/addon/edit/closebrackets.min.js"
    integrity="sha256-qhu2a7DSpQaammMaLw1iruxBpxmgdw8mdQaQWQUokcY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.25.0/mode/javascript/javascript.min.js"
    integrity="sha256-7Bdg/UdDMmHDPafpQDYZNPCEbnRP7eAvu+2hEoqRCXs=" crossorigin="anonymous"></script>
  

  <script src="https://cdn.jsdelivr.net/npm/algoliasearch@3/dist/algoliasearch.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.0.0/dist/instantsearch.production.min.js"
    integrity="sha256-6S7q0JJs/Kx4kb/fv0oMjS855QTz5Rc2hh9AkIUjUsk=" crossorigin="anonymous"></script>
  <script src="https://blog.dgraph.io//js/search.js?04292020"></script>
  <script>

    $(".subscribe-box").hide();
    $(window).scroll(function () {
      if ($(window).scrollTop() > 400) {
        $(".subscribe-box").fadeIn("fast");
      }
      else {
        $(".subscribe-box").fadeOut("fast");
      }
    });
   
    
    
    $(window).scroll(function () {
      if ($(window).scrollTop() > 180) {
        $("#page-header").addClass("bg-white");
      }
      else {
        $("#page-header").removeClass("bg-white");
      }
    });

    $(document).scroll(function () {
      checkOffset();
    });

   
    function checkOffset() {
      var x = $(".container").offset();
        var leftPosition = x.left + 75;
      if ($('.subscribe-box').offset().top + $('.subscribe-box').height()
        >= $('.bottom-section').offset().top - 10){
        $('.subscribe-box').addClass('footer-before');
        $('.footer-before').css('left',  -leftPosition  );
        }
      if ($(document).scrollTop() + window.innerHeight < $('.bottom-section').offset().top){
        $('.subscribe-box').removeClass('footer-before');
        $('.subscribe-box').css('left',  '30px' );
      }
         
    }
    $(document).ready(function () {
      $( ".page-search" ).wrapInner( "<div class='wrapper'></div>")
      $('.wrapper').after($('.page-search__results'))

      $(".subscribe-box-mobi .click-btn").click(function () {
        $(".subscribe-box").toggleClass("open");
        $(".subscribe-box-mobi").toggleClass('hide');
      });
      $(".subscribe-box .close").click(function () {
        $(".subscribe-box").toggleClass("open");
        $(".subscribe-box-mobi").toggleClass('hide');
      });
      $('.nav-icon').click(function() {
	    $('.page-nav').toggleClass('shownav');
	    $(this).toggleClass('active');
  });
  var $nav = document.querySelector('.page-nav > ul');
	var $navItems = document.querySelectorAll('.page-nav > ul > li');
	var $navItemHeading = document.querySelectorAll('.page-nav > ul > li > div');
  var $subnav = document.querySelectorAll('.page-nav > ul > li > ul');
  $($navItemHeading).click(function(e) {
	    $($navItems).removeClass('active');
	    $(this).parent().toggleClass('active');
	});
  $('.nav-icon[target="_blank"]').removeAttr('target');
  
    });
  </script>

  
  
  
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://blog.dgraph.io//images/keymaker.png" />
  
  

  <meta name="twitter:title" content="Why we choose Badger over RocksDB in Dgraph" />
  <meta name="twitter:description"
    content="At Dgraph, we&rsquo;re building the most advanced graph database in the world. It does distributed transactions, low-latency arbitrary depth joins, traversals, provides synchronous replication and horizontal scalability &mdash; with a simple GraphQL-like API." />
  
  <meta name="twitter:site" content="@dgraphlabs" />

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-666192333"></script>
  <script>window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'AW-666192333');</script>
</head>
<body class="blog-single has-lightning" data-gr-c-s-loaded="true">
   <header id="page-header" class="page-header">
	<div class="page-logo">
		<a href="https://dgraph.io/">
			<img src="https://dgraph.io/assets/images/logo.svg">
		</a>
		<a href="javascript:;" class="nav-icon" >
			<div class="hamburger">
				<div class="line line-1"></div>
				<div class="line line-2"></div>
				<div class="line line-3"></div>
			</div>
		</a>
	</div>
	<nav class="page-nav">
    <ul>
        <li>
            <div data-label="Products">
                <span>Products</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/graphql" data-label="GraphQL">
                        <span>GraphQL</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/enterprise" data-label="Enterprise">
                        <span>Enterprise</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/downloads" data-label="Downloads">
                        <span>Downloads</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/badger" data-label="Badger">
                        <span>Badger</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/compare-features" data-label="Compare Features">
                        <span>Compare Features</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Learn" class="is-active">
                <span>Learn</span>
            </div>
            <ul>
                <li>
                    <a href="https://dgraph.io/blog" data-label="Blog">
                        <span>Blog</span>
                    </a>
                </li>
                <li>
                    <a href="https://tour.dgraph.io" target="_blank" data-label="Interactive Tour">
                        <span>Interactive Tour</span>
                    </a>
                </li>
                <li>
                    <a href="https://discuss.dgraph.io" target="_blank" data-label="Forum">
                        <span>Forum</span>
                    </a>
                </li>
                <li>
                    <a href="https://slack.dgraph.io" target="_blank" data-label="Slack">
                        <span>Slack</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/paper" target="_blank" data-label="Paper">
                        <span>Paper</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Docs"><span>Docs</span></div>
            <ul>
                <li>
                    <a href="https://docs.dgraph.io" target="_blank" data-label="Dgraph Docs">
                        <span>Dgraph Docs</span>
                    </a>
                </li>
                <li>
                    <a href="https://graphql.dgraph.io/docs/" target="_blank" data-label="GraphQL Docs">
                        <span>GraphQL Docs</span>
                    </a>
                </li>
            </ul>
        </li>
        <li>
            <div data-label="Company"><span>Company</span></div>
            <ul>
                <li>
                    <a href="https://dgraph.io/about" data-label="Team">
                        <span>Team</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/careers" data-label="Careers">
                        <span>Careers</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/contact" data-label="Contact">
                        <span>Contact</span>
                    </a>
                </li>
                <li>
                    <a href="https://dgraph.io/conduct" data-label="Conduct">
                        <span>Conduct</span>
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</nav>

	<div class="page-cta">
    <ul>
        <li class="hide-tablet">
            <a href="https://dgraph.io/contact" title="Contact">Contact</a>
        </li>
        <li>
            <a href="https://dgraph.io/downloads" title="Download" class="button button--secondary">
                <span>Download</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        </li>
    </ul>
</div>

</header>


   <section class="page-body">
      <div class="page-body__content">
         <div class="container">
            <div class="row justify-content-center">
               <div class="col-10 ">
                  <div class="page-search form-group has-search">
	<span class="fas fa-search form-control-feedback"></span>
	
</div>
               </div>
            </div>
         </div>
      </div>
      <div class="container">
         <div class="row justify-content-center">
            <div class="col-10 ">
               <div class="">
                  <div class="post__meta">
                     <div class="post__date">

    
        Thu, Jan 24, 2019
    
    
</div>

                     <div class="post__share">
                        
                        <a href="https://twitter.com/share?text=Why%20we%20choose%20Badger%20over%20RocksDB%20in%20Dgraph&amp;url=https%3a%2f%2fblog.dgraph.io%2fpost%2fbadger-over-rocksdb-in-dgraph%2f&amp;via=dgraphlabs"
                           target="_blank">
                        <i class="fab fa-twitter"></i>
                        </a>
                        
                     </div>
                  </div>
                  <div class="post__cover">
                     <img
                        src="https://blog.dgraph.io//images/keymaker.png">
                     <div class="post__header">
                        <h1 class="post__title">
                           Why we choose Badger over RocksDB in Dgraph
                        </h1>
                        
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/mrjn/">Manish Rai Jain</a>
        
    

</div>


                     </div>
                  </div>
                  <div
                     class="post__content inner-content lg-pl-80 lg-pr-80 md-pl-50 md-pr-50 xs-pl-30 xs-pr-30 clearfix">
                     

<p>At Dgraph, we&rsquo;re building <strong>the most advanced graph database</strong> in the world. It
does distributed transactions, low-latency arbitrary depth joins, traversals,
provides synchronous replication and horizontal scalability &mdash; with a simple
GraphQL-like API. <em>Does it sounds like a tough problem?</em> That&rsquo;s because it is.</p>

<p>This blog post is about <a href="https://github.com/dgraph-io/badger">Badger</a>, the key-value database that makes it
all happen under the hood, housing all Dgraph data, including Raft logs. Badger
uses an <a href="https://en.wikipedia.org/wiki/Log-structured_merge-tree">LSM tree</a> structure for holding keys. Badger is different from
other LSM tree based DBs in that it colocates only small values or pointers
along with these keys, storing the values separately in a value log.</p>

<p>Many Go developers have to make this exact decision when they need to choose a
key-value database. Badger, RocksDB, or the various other KV DBs around, which
one they should base their projects on. As I write this blog post, Badger is
crossing <a href="https://github.com/dgraph-io/badger">5000 GitHub stars</a> proving its popularity in the Go community.
So, this is a perfect time for a post about our experience using Badger and
what makes it unique.</p>

<h3 id="the-motivation">The Motivation</h3>

<p>Recently, our friends at CockroachDB wrote about why <a href="https://www.cockroachlabs.com/blog/cockroachdb-on-rocksd/">they use RocksDB</a>. The
various APIs they rely upon internally and how they use them. They also mentioned the
things they&rsquo;re doing to get around the Cgo barrier.</p>

<p>That reminded me of the alternate path we embarked upon almost two years
<a href="https://github.com/dgraph-io/badger/commit/b31e045903a47b4a17bc2d42458e602d33fd33a1">ago</a>,
where we decided to cut out RocksDB and Cgo entirely from our code base and
write a fast key-value database purely in Go (see <a href="https://blog.dgraph.io/post/badger/">original post</a> for a
deeper look into the whys).</p>

<p>The Go language prides itself on the speed of compilation and its amazing debugging
tools. In fact, the debug tools built by Go are directly informed by the
tooling that existed at Google. The pprof charts that are common place now in
the Go community had only been available to a select few who worked at Google
backends. All of these benefits of the Go langauge are negated when Cgo is
used. That was the motivation which led us to write Badger.</p>

<p>We started at a disadvantage. <em>Replace a DB started at Google and pioneered at
Facebook? Go vs C++? New vs Established?</em> So, I knew we had to do things differently.</p>

<p>When starting the project, I remember telling my team that if we can be within
75% performance range of RocksDB, it would be a good outcome.  But as I started
spending more and more time thinking and reading about the problem, it became
clear that not only can we get the performance of RocksDB, <strong>we can actually do
better.</strong> There was research out there which improved upon LSM trees, in
particular, a paper I came across called <a href="https://blog.dgraph.io/post/badger/">WiscKey</a>.  The beauty of this paper
compared to others was in its logical simplicity: <strong>Separate key-values, reduce
write amplification, and reduce read amplification.</strong></p>

<h3 id="was-it-the-right-move">Was it the right move?</h3>

<p>Now that it&rsquo;s been 1.5 years since <a href="https://blog.dgraph.io/post/badger/">launch</a>, and almost 2 years since the
initial commit, we have had time to reflect on our decision to build
Badger.  And I can tell you, <em>there&rsquo;s not been a single day of regret over
writing Badger from scratch, and we&rsquo;d do it all over again.</em> The time and
effort required to build and maintain Badger <em>dwarfs</em> in comparison to the
advantages we have had using it in Dgraph. Over time, we&rsquo;ve pushed more and more
things from Dgraph to Badger, which has made Dgraph simpler and Badger even
more enticing to a broader community of Go developers.</p>

<p>Because Badger acted as a base for Dgraph first and foremost, we built some
unique things into it. <strong>These features are unique enough that it would be
prohibitively hard for any other KV DB to replace Badger in Dgraph.</strong> In this blog
post, I&rsquo;d like to talk about those unique features, that make Badger different
from other storage engines, <em>including RocksDB,</em> and provide wheels for the
<em>engineering wagon</em> at Dgraph Labs.</p>

<h3 id="performance-benefits">Performance Benefits</h3>

<p>Badger provides <a href="https://blog.dgraph.io/post/badger/">better performance</a> than RocksDB, both in terms of reads
<strong>and</strong> writes. Writes because each table in LSM tree can hold a lot more keys,
so there are fewer compactions. Reads because the LSM tree in Badger is
shallower, so fewer levels have to be queried.</p>

<p>Many developers automatically assume that RocksDB is faster than Badger and
dismiss performance of Badger over RocksDB as being due to lack of Cgo<sup class="footnote-ref" id="fnref:4"><a href="#fn:4">1</a></sup>.
Also, comparisons between Badger and RocksDB typically assume a zero-sum game.
<em>If Badger is faster, then it must be less consistent, or must have fewer
features.</em> That might be the case if the design was exactly the same. But that&rsquo;s
not the case here.</p>

<p>Badger&rsquo;s design is inherently more complex than RocksDB. Not only does Badger
need to deal with an LSM tree, but it also needs to maintain a value log. There&rsquo;s the
added complexity of maintaining a value log, doing live value log garbage
collection, and moving valid key-value pointers around&mdash;all while keeping the LSM
tree constraints valid (newer versions at the top, older below). This is a different
design and therefore there are bigger wins in performance, beyond just the cost of
Go to Cgo calls.<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">2</a></sup> The implementation of this wasn&rsquo;t easy, and the paper had left
out exactly these complex and important topics, worthy of another paper on its
own.</p>

<p><strong>Imitation is the best form of flattery. Our performance numbers and design
decisions have triggered <a href="https://pingcap.com/blog-cn/for-community-tidb-2019-level-up/">a fork of RocksDB</a> by authors of TiDB, where they
intend to implement separation of keys from values.</strong></p>

<p>Overall, we got a <em>Strongly Exceeds Expectations</em> on performance with Badger.
Today Badger is the most actively maintained KV DB in Go language and is being
adopted by more and more Go projects. It has crossed 5000 GitHub stars. In
addition to <a href="https://dgraph.io/">Dgraph</a>, Badger is being used by <a href="https://ipfs.io/">IPFS</a>, <a href="https://www.usenetexpress.com/">Usenet
Express</a> (Usenet Express is serving Petabytes of data via Badger),
various blockchain companies like <a href="https://decred.org/">Decred</a>, <a href="https://insolar.io/">Insolar</a>, <a href="https://iotex.io/">IoTex</a> and many
others. Godoc shows there are <a href="https://godoc.org/github.com/dgraph-io/badger?importers">194 Go packages</a> relying on Badger.</p>

<h3 id="badger-features">Badger features</h3>

<p>I&rsquo;ll start by mentioning all the staple features that Badger has. Badger stores keys in
a lexicographically sorted manner.  It exports <a href="https://godoc.org/github.com/dgraph-io/badger#Txn">Transaction API</a>, which can
Set, Get and Delete keys. You can iterate over the keys in both forward and
reverse order, using <a href="https://godoc.org/github.com/dgraph-io/badger#Iterator">Iterators</a>.  At Dgraph, we use iterations in both
directions to provide various <a href="https://docs.dgraph.io/query-language/#inequality">inequality operators</a>.</p>

<p>Beyond these basics, Badger has a lot of unique features that are hard to
find in other storage engines, built to help with the specific demands of a
distributed graph database. In fact, some of these features
were built in Dgraph first, before getting ported over to Badger (like
<a href="#anchor-stream">Stream</a> framework), while others were built specifically to avoid
rebuilding the same in Dgraph (like <a href="#anchor-managed">Managed mode</a>).</p>

<p>In general, our philosophy towards development in Dgraph has been that <strong>any
change which is generic enough and can be used by a wide-array of users, should
lie in Badger.</strong></p>

<p>So, let&rsquo;s have a look at these unique features.</p>

<h4 id="acid-ssi-transactions-a-id-anchor-acid-a">ACID SSI Transactions <a id="anchor-acid"></a></h4>

<p>Dgraph relies heavily on the transactional nature of Badger. Badger provides
<a href="https://en.wikipedia.org/wiki/Multiversion_concurrency_control">multiple version concurrency control</a>, snapshots and strong <a href="https://en.wikipedia.org/wiki/ACID_(computer_science)">ACID</a>
transactional guarantees. It provides serializable snapshot isolation (<a href="https://wiki.postgresql.org/wiki/SSI">SSI</a>)
guarantees, while also running transactions concurrently to achieve great
performance.</p>

<p>You can see these in action, by running <code>badger bank test</code>, which runs a
<a href="https://jepsen.io/">Jepsen</a>-style bank test, (by default) running 16 concurrent transactions over
10K accounts, moving money from one to another, constantly checking if the total
money in the bank has changed at all (it shouldn&rsquo;t). With this running nightly
for 8hrs, we get the confidence that Badger is capable of supporting distributed
ACID transactions in Dgraph.</p>

<h4 id="key-only-iteration">Key-Only Iteration</h4>

<p>Badger can push a lot of keys into a single SSTable, whatever the size of values
might be, because only small values or value pointers are stored in LSM tree.
Hence, our LSM tree is much smaller than the total amount of data, so we
can easily load the tables in RAM (via <code>options.LoadToRAM</code>, or
<code>options.MemoryMap</code>).</p>

<p>This quick RAM access to the LSM tree allows Badger to provide an option to
iterate over the keys very quickly (<code>PrefetchValues=false</code>), and get a bunch of
unique information about the values without fetching them: value identification
<a href="#anchor-vid">bits</a>, size of the value, expiry time and and so on.</p>

<p>In Dgraph, we use <code>Item.EstimatedSize()</code> to calculate the size of certain ranges
of data without ever touching the values. And use the identification bits to
support the <a href="https://docs.dgraph.io/query-language/#has">has function</a>. We also use this in the Stream framework,
described later.</p>

<h4 id="3d-access-key-value-versions-a-id-anchor-3d-a">3D Access (Key-Value-Versions) <a id="anchor-3d"></a></h4>

<p>Badger is probably the only key-value database which exposes the
versions of the values to the user. When opening a Badger DB, you can set the
<code>options.NumVersionsToKeep</code>. We set this by default to 1 in Badger, but in
Dgraph, we set this to infinity <sup class="footnote-ref" id="fnref:2"><a href="#fn:2">3</a></sup>.</p>

<p>A typical <code>Txn.Get</code> in Badger would only retrieve the latest version back. But,
<code>Txn.Iterator</code> can be instructed to retrieve all the available versions, via
<code>IteratorOptions.AllVersions</code>. Badger stores
versions in reverse order. That is, if you are iterating in the forward
direction, Badger would return the latest version first, then the older versions
in descending order (opposite in reverse iteration).</p>

<p>In Dgraph, we use this feature very heavily. All the writes to Dgraph, are
stored as <em>deltas</em> in Badger, using <a href="#anchor-vid">value identification</a> bits.
Periodically, we <em>roll-up</em> the deltas into a state, using the Stream framework
(described <a href="#anchor-stream">below</a>). Which keys need to be rollup can be quickly
determined using the very fast key-only iteration.</p>

<h4 id="single-key-iteration">Single-Key Iteration</h4>

<p>Just the idea of this is beyond the scope of other storage engines. Because
Badger supports 3D access (described <a href="#anchor-3d">above</a>), it can optimize iterations
where the user only wants to iterate over versions of the same key (as explained
in the <a href="https://www.cockroachlabs.com/blog/cockroachdb-on-rocksd/">Fast scans</a> section of CockroachDB&rsquo;s blog post). It can do that by
using table boundaries and bloom filters to eliminate tables from LSM tree in
advance, picking only those which might have the key (multiple versions of the
key could lie across multiple levels in the LSM tree). This is more efficient
than typical iteration.</p>

<p>In Dgraph, whenever we need to read a key, we use this iterator.</p>

<h4 id="value-identification-bits-a-id-anchor-vid-a">Value Identification Bits <a id="anchor-vid"></a></h4>

<p>Badger allows users to specify an optional byte when storing keys and values,
exposed via <code>Txn.SetWithMeta</code>.  This byte can be used to uniquely identify the
type of the value. In Dgraph, we use this byte in all our writes, to identify
whether the value is a delta, a state, a schema, or empty; before even
retrieving the value (see <a href="https://github.com/dgraph-io/dgraph/blob/f6a2c045aca6073cfa60414de8fd729e9f07bd41/posting/list.go#L63-L66">code here</a>). This knowledge allows our access
to be very efficient.</p>

<h4 id="separation-but-only-as-much-as-needed">Separation, but only as much as needed</h4>

<p>While Badger is designed around key-value separation, it provides a knob to the
user to specify a <code>ValueThreshold</code>. Any values below this threshold are
colocated with the keys in the LSM tree. For values above this threshold, only
their pointers are stored in the LSM tree. By default, the threshold is set to
32 bytes.</p>

<p>Dgraph uses this fact to fine tune performance based on access patterns.
Dgraph opens up two instances of Badger: one for data, and one for Raft logs. We
set these knobs differently for these two. For data, we set the
<code>ValueThreshold</code> to 1KB. For Raft logs, we use <code>badger.LSMOnlyOptions</code>, which
sets the threshold to the maximum allowed value of <code>uint16</code> (minus a few bytes to
avoid edge cases), around 64KB.</p>

<p>And surely, the resulting behavior is quite different. Raft logs are constantly
being written and deleted. LSM tree compactions do a good job of quickly
reclaiming the space while maintaining the valid small sized data, which we
keep in memory via <code>options.LoadtoRAM</code>.</p>

<p>The data instance keeps long-lived keys, can have large values, and can grow
unbounded to TBs in size. But we know our users are not all on SSDs, using
a range of different devices (or network drives) with varying capabilities of
IOPS. So the <code>ValueThreshold</code> of 1KB gives us a sweet spot where our writes are
still fast, while our reads require less random reads from the value log.</p>

<h4 id="managed-mode-a-id-anchor-managed-a">Managed Mode <a id="anchor-managed"></a></h4>

<p>Badger was written to support building another DB on top of it. That knowledge
is part of Badger&rsquo;s DNA. It provides a unique mode, called <em>managed mode</em> &mdash;
which allows a user to specify the version a key-value gets written at.
Similarly, it allows specifying a read timestamp to use to get a consistent
snapshot of the data.  This avoids having to build another versioning system on
top of Badger (which is already versioned), something we rely upon in Dgraph. In
other words, <strong>we can directly use Dgraph transaction timestamps to write data
in Badger.</strong></p>

<p>Badger provides a set of APIs to that extent: <code>db.OpenManaged</code>,
<code>db.NewTransactionAt</code>, <code>db.NewStreamAt</code>, etc. to support this use case.</p>

<p>In <em>normal mode</em>, Badger relies on an internal <code>Oracle</code> to hand out
monotonically increasing timestamps. This is what most users of Badger use.</p>

<h4 id="stream-framework-a-id-anchor-stream-a">Stream Framework <a id="anchor-stream"></a></h4>

<p>A key-value database&rsquo;s job is not just to store data, but also to allow very fast
ways to access that data. Typical ways of accessing data provided by most DBs
are <code>Txn.Get</code>, or <code>Txn.Iterator</code>, etc. But Dgraph deals with a lot of data
movement and doing a serial iteration over the entire DB or even certain
prefixes isn&rsquo;t efficient.  Synchronous replication, for example, requires that in
case of machine failures resulting in data loss, or in case a server falls behind its
peers, a data snapshot must be sent to the follower to bring it up to date.</p>

<p>We realized we <strong>needed to quickly grab a lot of data from Badger from certain
ranges and move that over the wire.</strong> Not only that, but we also realized that sending
a lot of small bits over Go channels or <a href="https://grpc.io/">gRPC</a> is very slow. For example, sending
every key-value individually over any of these mediums is almost <em>disastrous</em> for
the performance that we need in Dgraph. So, within Dgraph, we developed the <code>Stream</code>
framework, which is highly optimized for concurrent iteration and data
transmission while avoiding contention.</p>

<p>Usage of the <code>Stream</code> framework, while initially designed only to move data
between servers, quickly spread to other modules and before we knew it, data
exports, data backups, rolling up deltas into states, all were using it. At some
point, I determined that the framework itself was generic enough to lie in
Badger, and I <a href="https://github.com/dgraph-io/badger/commit/14cbd89eb9238d4f32828ccb0822da2ac2397306">ported</a> it over.</p>

<p>What <code>Stream</code> framework does is that, for any prefix (or even for the entire
DB), it splits up the entire data into key ranges (exposed via <code>db.Tables</code> and
<code>db.KeySplits</code>). These key ranges are then split among a bunch of goroutine
workers which iterate over these ranges, while providing a few methods for the
users to overwrite.</p>

<pre><code class="language-go">ChooseKey func(item *Item) bool
KeyToList func(key []byte, itr *Iterator) (*pb.KVList, error)
Send func(*pb.KVList) error
</code></pre>

<p>In addition to specifying a key <code>Prefix</code> to iterate over, a user can optionally
choose if they want to pick a certain key or not. For example, when doing roll-ups
(as described in <a href="#anchor-3d">3D access</a>), we use the <code>item.UserMeta</code> in
<code>ChooseKey(item)</code> to determine if the latest key version is already a state or a
delta, so we can skip the keys whose latest value is already a state.</p>

<p><img src="https://blog.dgraph.io/images/stream.png" alt="Stream Framework" /></p>

<p>The framework then provides a way for a user to create a list of key-values from
a single key in <code>KeyToList</code> (default implementation is provided). The
framework picks up multiple <code>KVList</code>, batches them up into 4MB chunks, and
sends them out to a channel. Most users would return a single KV for a single
key input, but in Dgraph, we use versioning heavily, and so can return multiple
KVs for a single key. Note that both <code>ChooseKey</code> and <code>KeyToList</code> are run
concurrently via goroutines to speed the data retrieval process.</p>

<p>Finally, a goroutine picks up data from this channel, further utilizing the
power of smart batching to sequentially call <code>Send</code>. In smart batching, data
gets buffered until the current Send call returns. Thus, there&rsquo;s always one
pending call to <code>Send</code>. <strong>This framework can move data as fast as <code>Send</code> would
allow it.</strong></p>

<p>In Dgraph, we use this function to plug into <a href="https://grpc.io/">gRPC</a> and send data over the
wire (send snapshots or predicates out, or take backups over the network), or
even back to Badger (roll up deltas into states). In fact, we&rsquo;re using it in <a href="https://github.com/dgraph-io/dgraph/search?q=NewStreamAt&amp;unscoped_q=NewStreamAt">5
different places</a> in Dgraph. Badger itself uses it to provide fast full
and incremental backups.</p>

<h4 id="dropall-a-clean-slate">DropAll: A clean slate</h4>

<p>When a new Snapshot is received, Dgraph needs a way to quickly drop all the data
present in Badger and get ready to receive the new data. Initially, we did this
using key-only iteration and setting delete markers at the latest version of
their values. However, we found that this caused issues
when the new data&rsquo;s version was below the delete marker.</p>

<p>So, we built a way in Badger to drop all the data and start from scratch,
without changing the DB pointer held by the process. Badger achieves this
complex feat in a very methodical way by stopping the writes, then the
compactors, deleting LSM tree, value logs, and finally restarting the compactors
and writes. During this process, concurrent reads and writes calls can still be
made, they&rsquo;d return errors without causing panics. In Dgraph, this avoids having
to stop all the reads from users while <code>DropAll</code> is running, which saves us
from code complexity.</p>

<p>We have plans to introduce dropping a prefix of the keys, which is the other
functionality that we use in Dgraph.</p>

<h4 id="tooling">Tooling</h4>

<p>Over time, we have built some very interesting tools around Badger. Most users
have concerns about data correctness and integrity. We ourselves wanted to
ensure that Badger provides the highest level of ACID transaction guarantees
(SSI). So, we baked a tool, called <code>badger bank</code>, as described <a href="#anchor-acid">above</a>.</p>

<p>We built <code>badger fill</code> to quickly fill up Badger with random data for testing
purposes. Similarly, we built <code>badger flatten</code> to flatten up the LSM tree into a
single level. This uses the <code>db.Flatten</code> API, which can also be run live.</p>

<p>Badger, of course, has <code>badger backup</code> and <code>badger restore</code>, both using internal
<code>db.Backup</code> and <code>db.Load</code> APIs.</p>

<p>Finally, a user can use <code>badger info</code> to check the state of the instance, as
seen by MANIFEST: the levels where each table is stored, the size of
each table, its SHA-256 checksum and the size of each level, value logs and a
summary of any abnormalities observed by the tool.</p>

<p>We use these tools on a regular basis to help debug Dgraph instances.</p>

<p><em>There are others which are not mentioned here, like TTL for keys and setting
<code>Txn.SetWithDiscard</code>, etc. But, I&rsquo;ll take a break from features here and talk
about the challenges of building Badger and the unique design choices we made.</em></p>

<h3 id="what-wisckey-did-not-mention-complexity">What WiscKey did not mention: Complexity</h3>

<p>The <a href="https://blog.dgraph.io/post/badger/">WiscKey</a> paper made a good case for the novel idea of key-value separation.
During the implementation of Badger, we realized that the LSM tree part, i.e.
reading, writing and running compactions, was the easier portion of the code. The
harder portion was to garbage collect data from value logs. The paper
briefly mentioned doing value log GC offline with a technique which doesn&rsquo;t
work well for production systems. In particular, punching holes in files isn&rsquo;t
supported by Windows or Mac and does not play well with the various things you
need to do to ensure data consistency across file system failures.</p>

<p>The paper missed out two very important questions:</p>

<ol>
<li>How to run value log garbage collection live?</li>
<li>How to do that, while maintaining the 3D key-value-version access?</li>
</ol>

<p>Getting those details right has been an iterative process for us, causing us
a bunch of headaches. The solution that we finally put in place is a good
one and warrants a blog post on its own (or a paper).</p>

<h3 id="unique-design-choices">Unique Design Choices</h3>

<p>Badger does not have any cache or do any compression <sup class="footnote-ref" id="fnref:3"><a href="#fn:3">4</a></sup>. Badger&rsquo;s LSM tree is
typically small enough that it can fit in RAM, or at least be memory mapped
efficiently. We use prefix-diffing over keys to achieve key compression, but
because we can already fit millions of keys in a single table, there&rsquo;s no need to
pay for the higher cost of block or table compression.</p>

<p>RocksDB has a lot bigger LSM tree, lot more tables, lot more blocks. To achieve
good read performance, they do both compression and caching. In fact, it
is spread across two levels, one for compressed blocks and one for uncompressed
blocks. All this is unnecessary in Badger. If values are large, they would lie
in the value log and be retrieved via a single lookup (LSM tree does the hard
work of finding the key). A user can optionally compress the value upfront,
before passing it to Badger, and use the <a href="#anchor-vid">value identification</a> bits to
know when a value is compressed if needed.</p>

<h3 id="future-work">Future Work</h3>

<p>Recently, we <a href="https://github.com/dgraph-io/dgraph/commit/b9990f4619b64615c2c18bb7627d198b4397109c">removed</a> the LRU cache from Dgraph because of a high level of
contention and gained a lot in query performance&mdash;we saw Badger was perfectly
capable of providing us the fast access that we needed to run Dgraph queries.
But we think, we can get more performance out of it. So, we plan to introduce an
LRU cache in Badger instead.</p>

<p>We also have plans to add encryption at rest in Badger, which might require us
to introduce a table level or block level cache (read from disk, decrypt,
cache).</p>

<p>And with over 5000 GitHub stars and almost 200 projects using <a href="https://github.com/dgraph-io/badger">Badger</a>,
within the span of 1.5 years, we have a very active community whom we like to
hear from.  <em>So, tell us what you&rsquo;d like to see happen in Badger this year!</em></p>



<aside class="post__references">

    <h4>References</h4><p>Top image: Caption the image and identify the location of two easter eggs in
it.  The first three developers to find them and <a href="mailto:contact@dgraph.io">reply back to
us</a> will receive a Dgraph T-shirt.</p>
</aside>

<div class="footnotes">

<hr />

<ol>
<li id="fn:4"><p>We have already tackled the crash resilience of Badger in our <a href="https://blog.dgraph.io/post/alice/">previous
  blog post</a>. In addition, we have an open
  bounty on proving that <a href="https://github.com/dgraph-io/badger/issues/601">Badger loses
  data</a>.</p>
 <a class="footnote-return" href="#fnref:4"><sup>[return]</sup></a></li>

<li id="fn:1"><p>One could argue that if that was the only differentiator, then Go being a slower
  language than C++ in a single-threaded execution, Badger would always be slower
  than RocksDB.</p>
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>

<li id="fn:2"><p>This is similar to how Google&rsquo;s Bigtable works, which exposes the z-axis,
  i.e.  the timestamp/version axis, and allows users to set the version when
  writing a key-value. One could also set the GC policy on the versions, based
  on the number (<code>NumVersionsToKeep</code> in Badger), age (<code>SetWithTTL</code>),
  or other factors. And the way we&rsquo;re using the versions in Dgraph is exactly
  like how I wrote a real-time graph indexing system back in 2012 at Google to
  unify all structured data in the company under one system.</p>
 <a class="footnote-return" href="#fnref:2"><sup>[return]</sup></a></li>

<li id="fn:3"><p>This might change later with the introduction of new features, as described in
  Future work.</p>
 <a class="footnote-return" href="#fnref:3"><sup>[return]</sup></a></li>
</ol>
</div>

                     
    <aside class="post__authors">
                <div class="tile author-tile">

    <img src="https://blog.dgraph.io/images/people/manish.jpg" class="author-tile__photo">

    <h4 class="author-tile__title">
        <a href="https://blog.dgraph.io/authors/mrjn/">Manish Rai Jain</a>,
        Author
    </h4>

    <p>Manish is the Chief decision maker at Dgraph. He got thrust into distributed
systems right out of college, working on real time web indexing systems at
Google. He then lead various projects to consolidate and serve Knowledge Graph
right behind web search.</p>

<p>Implementing GTD and Zero Waste practices, Manish is into efficient and
minimalist living. He loves cycling, swimming and ultra light travelling.</p>


    
        <nav class="author-tile__social">

            

            
                <a href="https://twitter.com/manishrjain" target="_blank">
                    <i class="fab fa-twitter"></i>
                </a>
            

            
                <a href="https://github.com/manishrjain" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
            

        </nav>
    

</div>

            
        

    </aside>


                     <div class="  text-center subscribe-box">
    

    <h3>Get blog post to <br/>your inbox</h3>
    

<div id="mc_embed_signup">
<form action="https://dgraph.us17.list-manage.com/subscribe/post?u=f6c6a28bb40d10e26b88fff1c&amp;id=e85c448cac" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	
<div class="mc-field-group">
	
	<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="your Email">
</div>
	<div id="mce-responses" class="clear">
		<div class="response" id="mce-error-response" style="display:none"></div>
		<div class="response" id="mce-success-response" style="display:none"></div>
	</div>    
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_f6c6a28bb40d10e26b88fff1c_e85c448cac" tabindex="-1" value=""></div>
    <div class="clear"><button type="submit"  name="subscribe" id="mc-embedded-subscribe" class="button button--secondary mt-2"><span>Subscribe</span><i class="fas fa-arrow-right"></i></button></div>
    </div>
</form>
</div>
<script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
<div class="d-flex align-items-center justify-content-center mt-4">
    <a href="https://github.com/dgraph-io/dgraph" target="_blank" ><i class="fa fa-github px-3"></i></a>
    <a href="https://slack.dgraph.io/" target="_blank"  ><i class="fa fa-slack px-3"></i></a>
    <a href="https://discuss.dgraph.io/" target="_blank"  ><i class="fa fa-comments px-3"></i></a>
</div>
<div class="close position-absolute d-block d-lg-none"><i class="fa fa-close"></i></div>

</div>

<div class="subscribe-box-mobi">
    <div class="d-flex align-items-center justify-content-center  flex-column">
        <a href="https://github.com/dgraph-io/dgraph" target="_blank" ><i class="fa fa-github py-3"></i></a>
        <a href="https://slack.dgraph.io/" target="_blank"  ><i class="fa fa-slack py-3"></i></a>
        <a href="https://discuss.dgraph.io/" target="_blank"  ><i class="fa fa-comments py-3"></i></a>
        <div class="click-btn"><i class="fa fa-envelope-o py-3"></i></div>

    </div>

</div>

                  </div>
               </div>
            </div>
         </div>
      </div>
      </div>
   </section>
   <div class='bottom-section'>
      <div class="container">
         <div class="post__content inner-content lg-pl-80 lg-pr-80 md-pl-50 md-pr-50 xs-pl-30 xs-pr-30 clearfix">
            <div class="post__comments">

    <div id="discourse-comments"></div>

    
    <script type="text/javascript">
        DiscourseEmbed = {
            discourseUrl: "https:\/\/discuss.dgraph.io\/",
            topicId:  3928 
            };
        (function() {
            var d = document.createElement("script");
            d.type = "text/javascript";
            d.async = true;
            d.src = DiscourseEmbed.discourseUrl + "javascripts/embed.js";
            (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(d);
        })();
    </script>
    <noscript>Please enable JavaScript to view the comments on <a href="https://discuss.dgraph.io/">discuss</a>.</noscript>
    

</div>

            <div class="modal fade" id="runnable-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <a href="#" data-dismiss="modal" class="modal-close-btn">
    Close
  </a>

  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">

      </div>
    </div>
  </div>
</div>
        </div>
        <div class="mx-auto" style="max-width:860px">

         <div
            class=" bg-gray xs-pt-60 xs-pb-60 round text-center md-pl-80 md-pr-80 own-success-story xs-mb-80  xs-mt-80 lg-ml-80 lg-mr-80 md-ml-50 md-mr-50 xs-ml-30 xs-mr-30 " >
            <p>Create you own success story.</p>
            <h2 class="font-medium">Interpret, store, distribute and execute GraphQL with the best.</h2>
            <div class="xs-mt-50 d-flex align-items-center justify-content-center flex-column flex-md-row">
               <a href="https://dgraph.io/downloads" class="button button--primary mr-0 mr-md-3"><span>Get
               Started</span> <i class="fas fa-arrow-right"></i></a>
               <a class="button  button--outline" target="_blank"
                  href="https://github.com/dgraph-io/dgraph"><span>View<span> on Github</span></span><i
                  class="fas fa-arrow-right"></i></a>
            </div>
        </div>

         </div>
         <div class="page-body__related-content mb-4">
            




<h3 class=" font-22 pb-4">But wait, theres more...</h3>

<div class=" row justify-content-center mt-4">


    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/milky_way.jpg">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Thu, Mar 12, 2020
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/encryption-at-rest-dgraph-badger/">Encryption at Rest in Dgraph and Badger</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/balaji/">Balaji Jinnah</a>
        
    

</div>



    	</div>

    </div>
    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/badger2.jpg">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Mon, Nov 18, 2019
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/releasing-badger-v2/">Releasing BadgerDB v2.0</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/karthic/">Karthic Rao</a>
        
    

</div>



    	</div>

    </div>
    
    <div class="post col-sm-4">

        <div class="post__image">
    <img src="https://blog.dgraph.io//images/landing-soyuz.png">
</div>


    	<div class="post__header">

    		<div class="post__date">

    
        Wed, Jul 3, 2019
    
    
</div>


    		<h4 class="post__title">
    			<a href="https://blog.dgraph.io/post/badger-v1.6.0-release/">Releasing BadgerDB v1.6.0</a>
    		</h4>

    		
<div class="post__byline">

    
            by <a href="https://blog.dgraph.io/authors/francesc/">Francesc Campoy</a>
        
    

</div>



    	</div>

    </div>
    

</div>



            
<div class="post__tags">

    <h3 class="text-center">Tags</h3>

    <div class="tag-inner">

        
            
            
                <a href="https://blog.dgraph.io/tags/badger/">badger</a>
            
        
            
            
                <a href="https://blog.dgraph.io/tags/rocksdb/">rocksdb</a>
            
        

    </div>

</div>


         </div>
      </div>
      <footer class="page-footer">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Products</h3>
            <ul>
              <li><a href="https://dgraph.io/graphql">GraphQL</a></li>
              <li><a href="https://dgraph.io/enterprise">Enterprise</a></li>
              <li><a href="https://dgraph.io/downloads">Downloads</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Learn</h3>
            <ul>
              <li><a href="https://dgraph.io/blog" target="_blank">Blog</a></li>
              <li><a href="https://tour.dgraph.io" target="_blank">Interactive Tour</a></li>
              <li><a href="https://discuss.dgraph.io" target="_blank">Forum</a></li>
              <li><a href="https://slack.dgraph.io" target="_blank">Slack</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-5 col-sm-4">
        <div class="row">
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Docs</h3>
            <ul>
              <li><a href="https://docs.dgraph.io" target="_blank">Dgraph Docs</a></li>
              <li><a href="https://graphql.dgraph.io/docs/" target="_blank">GraphQL Docs</a></li>
            </ul>
          </div>
          <div class="col-12 col-md-6 page-footer__nav">
            <h3 class="zeta">Company</h3>
            <ul>
              <li><a href="https://dgraph.io/about">Team</a></li>
              <li><a href="https://dgraph.io/careers">Careers</a></li>
              <li><a href="https://dgraph.io/contact">Contact</a></li>
              <li><a href="https://dgraph.io/conduct">Conduct</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3 offset-lg-1 border-above-sm">
        <div class="page-footer__cta"><a href="https://dgraph.io/downloads" title="Download" class="button button--secondary"><span>Download</span><i class="fas fa-arrow-right"></i></a></div>
        <div class="page-footer__address">
          <p>
            655 Montgomery Street, 7th Floor<br>
            San Francisco, CA 94111
          </p>
          <hr>
          <p><a href="mailto:contact@dgraph.io">contact@dgraph.io</a></p>
        </div>
      </div>
    </div>
    <div class="page-footer__social">
      <ul>
        <li><a href="https://twitter.com/dgraphlabs" target="_blank"><i class="fab fa-twitter"></i></a></li>
        <li><a href="https://github.com/dgraph-io/dgraph" target="_blank"><i class="fab fa-github"></i></a></li>
        <li><a href="https://www.youtube.com/channel/UCghE41LR8nkKFlR3IFTRO4w" target="_blank"><i class="fab fa-youtube"></i></a></li>
        <li><a href="https://slack.dgraph.io" target="_blank"><i class="fab fa-slack"></i></a></li>
        <li><a href="https://www.linkedin.com/company/dgraph-labs" target="_blank"><i class="fab fa-linkedin"></i></a></li>
      </ul>
    </div>
    <div class="page-footer__copyright">
      <p>
        <Copyright>&copy; 2017-2020 Dgraph Labs, Inc.</Copyright>
      </p>
    </div>
  </div>
</footer>

    <script src="https://blog.dgraph.io//js/clipboard.min.js"></script>
    <script
      src='https://blog.dgraph.io//js/runnable.js?29f8ba4fb8d90804cf24ff53b70192ad'
    ></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>




<script>
  window.Countly = window.Countly || {};
  Countly.q = Countly.q || [];

  Countly.q.push(['track_sessions']);
  Countly.q.push(['track_pageview']);
  (function() {
  	var cly = document.createElement('script');
  	cly.type = 'text/javascript';
  	cly.async = true;
  	cly.src = "https://dgraph.io/assets/js/unminified/stats/dgraph-stats.min.js";
  	cly.onload = function() {
      Countly.init({
        app_key: "e93284ab5e5d21ef9eb16a94516b3c1c6eba1015",
        url: "https://stats.dgraph.io",
        force_post: true,
      })
  	};
  	document.body.appendChild(cly);
  })();
</script>


<script>
$(document.links)
  .filter(function() {
    return this.hostname != window.location.hostname;
  })
  .attr("target", "_blank");
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/visibility.js/1.2.4/visibility.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/heart.css?24a50879951b2391f04750723b4a012e'
  rel="stylesheet">
<link
  href='https://blog.dgraph.io//css/github-engage.css?d60d80bf2b6a24350cdb5d834ab47e27'
  rel="stylesheet">

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.min.js"
  integrity="sha256-7/yoZS3548fXSRXqc/xYzjsmuW3sFKzuvOCHd06Pmps="
  crossorigin="anonymous"
></script>
<script
  type="text/javascript"
  src='https://blog.dgraph.io//js/custom.js?94f0c667422b8dac293e14c9c49872e3'
></script>

<script src="//unpkg.com/@dgraph-io/community"></script>

   </div>
</body>
    <script src="https://blog.dgraph.io/js/footnotes.js"></script>

</html>
